var Yi=Object.defineProperty,ts=Object.defineProperties,es=Object.getOwnPropertyDescriptors,Ui=Object.getOwnPropertySymbols,ns=Object.prototype.hasOwnProperty,is=Object.prototype.propertyIsEnumerable,$i=(Nt,K,yt)=>K in Nt?Yi(Nt,K,{enumerable:!0,configurable:!0,writable:!0,value:yt}):Nt[K]=yt,bt=(Nt,K)=>{for(var yt in K||(K={}))ns.call(K,yt)&&$i(Nt,yt,K[yt]);if(Ui)for(var yt of Ui(K))is.call(K,yt)&&$i(Nt,yt,K[yt]);return Nt},bi=(Nt,K)=>ts(Nt,es(K));!function(Nt,K){"object"==typeof exports&&"undefined"!=typeof module?module.exports=K(require("@popperjs/core")):"function"==typeof define&&define.amd?define(["@popperjs/core"],K):(Nt="undefined"!=typeof globalThis?globalThis:Nt||self).bootstrap=K(Nt.Popper)}(this,function(Nt){"use strict";const yt=function(E){if(E&&E.__esModule)return E;const h=Object.create(null);if(E)for(const _ in E)if("default"!==_){const k=Object.getOwnPropertyDescriptor(E,_);Object.defineProperty(h,_,k.get?k:{enumerable:!0,get:()=>E[_]})}return h.default=E,Object.freeze(h)}(Nt),kt="transitionend",C=E=>{let h=E.getAttribute("data-bs-target");if(!h||"#"===h){let _=E.getAttribute("href");if(!_||!_.includes("#")&&!_.startsWith("."))return null;_.includes("#")&&!_.startsWith("#")&&(_=`#${_.split("#")[1]}`),h=_&&"#"!==_?_.trim():null}return h},un=E=>{const h=C(E);return h&&document.querySelector(h)?h:null},$t=E=>{const h=C(E);return h?document.querySelector(h):null},_n=E=>{E.dispatchEvent(new Event(kt))},Pe=E=>!(!E||"object"!=typeof E)&&(void 0!==E.jquery&&(E=E[0]),void 0!==E.nodeType),Wt=E=>Pe(E)?E.jquery?E[0]:E:"string"==typeof E&&E.length>0?document.querySelector(E):null,ct=(E,h,_)=>{Object.keys(_).forEach(k=>{const z=_[k],V=h[k],Y=V&&Pe(V)?"element":null==(ut=V)?`${ut}`:{}.toString.call(ut).match(/\s([a-z]+)/i)[1].toLowerCase();var ut;if(!new RegExp(z).test(Y))throw new TypeError(`${E.toUpperCase()}: Option "${k}" provided type "${Y}" but expected type "${z}".`)})},Ze=E=>!(!Pe(E)||0===E.getClientRects().length)&&"visible"===getComputedStyle(E).getPropertyValue("visibility"),M=E=>!E||E.nodeType!==Node.ELEMENT_NODE||!!E.classList.contains("disabled")||(void 0!==E.disabled?E.disabled:E.hasAttribute("disabled")&&"false"!==E.getAttribute("disabled")),qe=E=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof E.getRootNode){const h=E.getRootNode();return h instanceof ShadowRoot?h:null}return E instanceof ShadowRoot?E:E.parentNode?qe(E.parentNode):null},it=()=>{},rt=()=>{const{jQuery:E}=window;return E&&!document.body.hasAttribute("data-bs-no-jquery")?E:null},Vn=[],gt=()=>"rtl"===document.documentElement.dir,Pt=E=>{var h;h=()=>{const _=rt();if(_){const k=E.NAME,z=_.fn[k];_.fn[k]=E.jQueryInterface,_.fn[k].Constructor=E,_.fn[k].noConflict=()=>(_.fn[k]=z,E.jQueryInterface)}},"loading"===document.readyState?(Vn.length||document.addEventListener("DOMContentLoaded",()=>{Vn.forEach(_=>_())}),Vn.push(h)):h()},Le=E=>{"function"==typeof E&&E()},pt=(E,h,_=!0)=>{if(!_)return void Le(E);const k=(Y=>{if(!Y)return 0;let{transitionDuration:ut,transitionDelay:St}=window.getComputedStyle(Y);const Ut=Number.parseFloat(ut),jt=Number.parseFloat(St);return Ut||jt?(ut=ut.split(",")[0],St=St.split(",")[0],1e3*(Number.parseFloat(ut)+Number.parseFloat(St))):0})(h)+5;let z=!1;const V=({target:Y})=>{Y===h&&(z=!0,h.removeEventListener(kt,V),Le(E))};h.addEventListener(kt,V),setTimeout(()=>{z||_n(h)},k)},Ne=(E,h,_,k)=>{let z=E.indexOf(h);if(-1===z)return E[!_&&k?E.length-1:0];const V=E.length;return z+=_?1:-1,k&&(z=(z+V)%V),E[Math.max(0,Math.min(z,V-1))]},pn=/[^.]*(?=\..*)\.|.*/,fe=/\..*/,mn=/::\d+$/,vn={};let je=1;const Ve={mouseenter:"mouseover",mouseleave:"mouseout"},st=/^(mouseenter|mouseleave)/i,Ln=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function J(E,h){return h&&`${h}::${je++}`||E.uidEvent||je++}function Se(E){const h=J(E);return E.uidEvent=h,vn[h]=vn[h]||{},vn[h]}function Qe(E,h,_=null){const k=Object.keys(E);for(let z=0,V=k.length;z<V;z++){const Y=E[k[z]];if(Y.originalHandler===h&&Y.delegationSelector===_)return Y}return null}function Ct(E,h,_){const k="string"==typeof h,z=k?_:h;let V=ni(E);return Ln.has(V)||(V=E),[k,z,V]}function ke(E,h,_,k,z){if("string"!=typeof h||!E)return;if(_||(_=k,k=null),st.test(h)){const Gt=Ce=>function(ve){if(!ve.relatedTarget||ve.relatedTarget!==ve.delegateTarget&&!ve.delegateTarget.contains(ve.relatedTarget))return Ce.call(this,ve)};k?k=Gt(k):_=Gt(_)}const[V,Y,ut]=Ct(h,_,k),St=Se(E),Ut=St[ut]||(St[ut]={}),jt=Qe(Ut,Y,V?_:null);if(jt)return void(jt.oneOff=jt.oneOff&&z);const Et=J(Y,h.replace(pn,"")),ne=V?(Gt=E,Ce=_,ve=k,function Ge(rn){const In=Gt.querySelectorAll(Ce);for(let{target:Oe}=rn;Oe&&Oe!==this;Oe=Oe.parentNode)for(let an=In.length;an--;)if(In[an]===Oe)return rn.delegateTarget=Oe,Ge.oneOff&&Z.off(Gt,rn.type,Ce,ve),ve.apply(Oe,[rn]);return null}):function(Gt,Ce){return function ve(Ge){return Ge.delegateTarget=Gt,ve.oneOff&&Z.off(Gt,Ge.type,Ce),Ce.apply(Gt,[Ge])}}(E,_);var Gt,Ce,ve;ne.delegationSelector=V?_:null,ne.originalHandler=Y,ne.oneOff=z,ne.uidEvent=Et,Ut[Et]=ne,E.addEventListener(ut,ne,V)}function Nn(E,h,_,k,z){const V=Qe(h[_],k,z);V&&(E.removeEventListener(_,V,Boolean(z)),delete h[_][V.uidEvent])}function ni(E){return E=E.replace(fe,""),Ve[E]||E}const Z={on(E,h,_,k){ke(E,h,_,k,!1)},one(E,h,_,k){ke(E,h,_,k,!0)},off(E,h,_,k){if("string"!=typeof h||!E)return;const[z,V,Y]=Ct(h,_,k),ut=Y!==h,St=Se(E),Ut=h.startsWith(".");if(void 0!==V)return St&&St[Y]?void Nn(E,St,Y,V,z?_:null):void 0;Ut&&Object.keys(St).forEach(Et=>{!function(ne,Gt,Ce,ve){const Ge=Gt[Ce]||{};Object.keys(Ge).forEach(rn=>{if(rn.includes(ve)){const In=Ge[rn];Nn(ne,Gt,Ce,In.originalHandler,In.delegationSelector)}})}(E,St,Et,h.slice(1))});const jt=St[Y]||{};Object.keys(jt).forEach(Et=>{const ne=Et.replace(mn,"");if(!ut||h.includes(ne)){const Gt=jt[Et];Nn(E,St,Y,Gt.originalHandler,Gt.delegationSelector)}})},trigger(E,h,_){if("string"!=typeof h||!E)return null;const k=rt(),z=ni(h),V=h!==z,Y=Ln.has(z);let ut,St=!0,Ut=!0,jt=!1,Et=null;return V&&k&&(ut=k.Event(h,_),k(E).trigger(ut),St=!ut.isPropagationStopped(),Ut=!ut.isImmediatePropagationStopped(),jt=ut.isDefaultPrevented()),Y?(Et=document.createEvent("HTMLEvents"),Et.initEvent(z,St,!0)):Et=new CustomEvent(h,{bubbles:St,cancelable:!0}),void 0!==_&&Object.keys(_).forEach(ne=>{Object.defineProperty(Et,ne,{get:()=>_[ne]})}),jt&&Et.preventDefault(),Ut&&E.dispatchEvent(Et),Et.defaultPrevented&&void 0!==ut&&ut.preventDefault(),Et}},Ke=new Map,zt={set(E,h,_){Ke.has(E)||Ke.set(E,new Map);const k=Ke.get(E);k.has(h)||0===k.size?k.set(h,_):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(k.keys())[0]}.`)},get:(E,h)=>Ke.has(E)&&Ke.get(E).get(h)||null,remove(E,h){if(!Ke.has(E))return;const _=Ke.get(E);_.delete(h),0===_.size&&Ke.delete(E)}};class he{constructor(h){(h=Wt(h))&&(this._element=h,zt.set(this._element,this.constructor.DATA_KEY,this))}dispose(){zt.remove(this._element,this.constructor.DATA_KEY),Z.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach(h=>{this[h]=null})}_queueCallback(h,_,k=!0){pt(h,_,k)}static getInstance(h){return zt.get(Wt(h),this.DATA_KEY)}static getOrCreateInstance(h,_={}){return this.getInstance(h)||new this(h,"object"==typeof _?_:null)}static get VERSION(){return"5.1.3"}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}const hn=(E,h="hide")=>{const k=E.NAME;Z.on(document,`click.dismiss${E.EVENT_KEY}`,`[data-bs-dismiss="${k}"]`,function(z){if(["A","AREA"].includes(this.tagName)&&z.preventDefault(),M(this))return;const V=$t(this)||this.closest(`.${k}`);E.getOrCreateInstance(V)[h]()})};class Je extends he{static get NAME(){return"alert"}close(){if(Z.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const h=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,h)}_destroyElement(){this._element.remove(),Z.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(h){return this.each(function(){const _=Je.getOrCreateInstance(this);if("string"==typeof h){if(void 0===_[h]||h.startsWith("_")||"constructor"===h)throw new TypeError(`No method named "${h}"`);_[h](this)}})}}hn(Je,"close"),Pt(Je);const Rt='[data-bs-toggle="button"]';class Dt extends he{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(h){return this.each(function(){const _=Dt.getOrCreateInstance(this);"toggle"===h&&_[h]()})}}function qt(E){return"true"===E||"false"!==E&&(E===Number(E).toString()?Number(E):""===E||"null"===E?null:E)}function ge(E){return E.replace(/[A-Z]/g,h=>`-${h.toLowerCase()}`)}Z.on(document,"click.bs.button.data-api",Rt,E=>{E.preventDefault();const h=E.target.closest(Rt);Dt.getOrCreateInstance(h).toggle()}),Pt(Dt);const Kt={setDataAttribute(E,h,_){E.setAttribute(`data-bs-${ge(h)}`,_)},removeDataAttribute(E,h){E.removeAttribute(`data-bs-${ge(h)}`)},getDataAttributes(E){if(!E)return{};const h={};return Object.keys(E.dataset).filter(_=>_.startsWith("bs")).forEach(_=>{let k=_.replace(/^bs/,"");k=k.charAt(0).toLowerCase()+k.slice(1,k.length),h[k]=qt(E.dataset[_])}),h},getDataAttribute:(E,h)=>qt(E.getAttribute(`data-bs-${ge(h)}`)),offset(E){const h=E.getBoundingClientRect();return{top:h.top+window.pageYOffset,left:h.left+window.pageXOffset}},position:E=>({top:E.offsetTop,left:E.offsetLeft})},at={find:(E,h=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(h,E)),findOne:(E,h=document.documentElement)=>Element.prototype.querySelector.call(h,E),children:(E,h)=>[].concat(...E.children).filter(_=>_.matches(h)),parents(E,h){const _=[];let k=E.parentNode;for(;k&&k.nodeType===Node.ELEMENT_NODE&&3!==k.nodeType;)k.matches(h)&&_.push(k),k=k.parentNode;return _},prev(E,h){let _=E.previousElementSibling;for(;_;){if(_.matches(h))return[_];_=_.previousElementSibling}return[]},next(E,h){let _=E.nextElementSibling;for(;_;){if(_.matches(h))return[_];_=_.nextElementSibling}return[]},focusableChildren(E){const h=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(_=>`${_}:not([tabindex^="-"])`).join(", ");return this.find(h,E).filter(_=>!M(_)&&Ze(_))}},Ye="carousel",Hn={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},ii={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},Ot="next",tn="prev",ze="left",bn="right",si={ArrowLeft:bn,ArrowRight:ze},ri="slid.bs.carousel",en="active",zn=".active.carousel-item";class De extends he{constructor(h,_){super(h),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(_),this._indicatorsElement=at.findOne(".carousel-indicators",this._element),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return Hn}static get NAME(){return Ye}next(){this._slide(Ot)}nextWhenVisible(){!document.hidden&&Ze(this._element)&&this.next()}prev(){this._slide(tn)}pause(h){h||(this._isPaused=!0),at.findOne(".carousel-item-next, .carousel-item-prev",this._element)&&(_n(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(h){h||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(h){this._activeElement=at.findOne(zn,this._element);const _=this._getItemIndex(this._activeElement);if(!(h>this._items.length-1||h<0)){if(!this._isSliding)return _===h?(this.pause(),void this.cycle()):void this._slide(h>_?Ot:tn,this._items[h]);Z.one(this._element,ri,()=>this.to(h))}}_getConfig(h){return h=bt(bt(bt({},Hn),Kt.getDataAttributes(this._element)),"object"==typeof h?h:{}),ct(Ye,h,ii),h}_handleSwipe(){const h=Math.abs(this.touchDeltaX);if(h<=40)return;const _=h/this.touchDeltaX;this.touchDeltaX=0,_&&this._slide(_>0?bn:ze)}_addEventListeners(){this._config.keyboard&&Z.on(this._element,"keydown.bs.carousel",h=>this._keydown(h)),"hover"===this._config.pause&&(Z.on(this._element,"mouseenter.bs.carousel",h=>this.pause(h)),Z.on(this._element,"mouseleave.bs.carousel",h=>this.cycle(h))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){const h=V=>this._pointerEvent&&("pen"===V.pointerType||"touch"===V.pointerType),_=V=>{h(V)?this.touchStartX=V.clientX:this._pointerEvent||(this.touchStartX=V.touches[0].clientX)},k=V=>{this.touchDeltaX=V.touches&&V.touches.length>1?0:V.touches[0].clientX-this.touchStartX},z=V=>{h(V)&&(this.touchDeltaX=V.clientX-this.touchStartX),this._handleSwipe(),"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(Y=>this.cycle(Y),500+this._config.interval))};at.find(".carousel-item img",this._element).forEach(V=>{Z.on(V,"dragstart.bs.carousel",Y=>Y.preventDefault())}),this._pointerEvent?(Z.on(this._element,"pointerdown.bs.carousel",V=>_(V)),Z.on(this._element,"pointerup.bs.carousel",V=>z(V)),this._element.classList.add("pointer-event")):(Z.on(this._element,"touchstart.bs.carousel",V=>_(V)),Z.on(this._element,"touchmove.bs.carousel",V=>k(V)),Z.on(this._element,"touchend.bs.carousel",V=>z(V)))}_keydown(h){if(/input|textarea/i.test(h.target.tagName))return;const _=si[h.key];_&&(h.preventDefault(),this._slide(_))}_getItemIndex(h){return this._items=h&&h.parentNode?at.find(".carousel-item",h.parentNode):[],this._items.indexOf(h)}_getItemByOrder(h,_){return Ne(this._items,_,h===Ot,this._config.wrap)}_triggerSlideEvent(h,_){const k=this._getItemIndex(h),z=this._getItemIndex(at.findOne(zn,this._element));return Z.trigger(this._element,"slide.bs.carousel",{relatedTarget:h,direction:_,from:z,to:k})}_setActiveIndicatorElement(h){if(this._indicatorsElement){const _=at.findOne(".active",this._indicatorsElement);_.classList.remove(en),_.removeAttribute("aria-current");const k=at.find("[data-bs-target]",this._indicatorsElement);for(let z=0;z<k.length;z++)if(Number.parseInt(k[z].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(h)){k[z].classList.add(en),k[z].setAttribute("aria-current","true");break}}}_updateInterval(){const h=this._activeElement||at.findOne(zn,this._element);if(!h)return;const _=Number.parseInt(h.getAttribute("data-bs-interval"),10);_?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=_):this._config.interval=this._config.defaultInterval||this._config.interval}_slide(h,_){const k=this._directionToOrder(h),z=at.findOne(zn,this._element),V=this._getItemIndex(z),Y=_||this._getItemByOrder(k,z),ut=this._getItemIndex(Y),St=Boolean(this._interval),Ut=k===Ot,jt=Ut?"carousel-item-start":"carousel-item-end",Et=Ut?"carousel-item-next":"carousel-item-prev",ne=this._orderToDirection(k);if(Y&&Y.classList.contains(en))return void(this._isSliding=!1);if(this._isSliding||this._triggerSlideEvent(Y,ne).defaultPrevented||!z||!Y)return;this._isSliding=!0,St&&this.pause(),this._setActiveIndicatorElement(Y),this._activeElement=Y;const Gt=()=>{Z.trigger(this._element,ri,{relatedTarget:Y,direction:ne,from:V,to:ut})};this._element.classList.contains("slide")?(Y.classList.add(Et),z.classList.add(jt),Y.classList.add(jt),this._queueCallback(()=>{Y.classList.remove(jt,Et),Y.classList.add(en),z.classList.remove(en,Et,jt),this._isSliding=!1,setTimeout(Gt,0)},z,!0)):(z.classList.remove(en),Y.classList.add(en),this._isSliding=!1,Gt()),St&&this.cycle()}_directionToOrder(h){return[bn,ze].includes(h)?gt()?h===ze?tn:Ot:h===ze?Ot:tn:h}_orderToDirection(h){return[Ot,tn].includes(h)?gt()?h===tn?ze:bn:h===tn?bn:ze:h}static carouselInterface(h,_){const k=De.getOrCreateInstance(h,_);let{_config:z}=k;"object"==typeof _&&(z=bt(bt({},z),_));const V="string"==typeof _?_:z.slide;if("number"==typeof _)k.to(_);else if("string"==typeof V){if(void 0===k[V])throw new TypeError(`No method named "${V}"`);k[V]()}else z.interval&&z.ride&&(k.pause(),k.cycle())}static jQueryInterface(h){return this.each(function(){De.carouselInterface(this,h)})}static dataApiClickHandler(h){const _=$t(this);if(!_||!_.classList.contains("carousel"))return;const k=bt(bt({},Kt.getDataAttributes(_)),Kt.getDataAttributes(this)),z=this.getAttribute("data-bs-slide-to");z&&(k.interval=!1),De.carouselInterface(_,k),z&&De.getInstance(_).to(z),h.preventDefault()}}Z.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",De.dataApiClickHandler),Z.on(window,"load.bs.carousel.data-api",()=>{const E=at.find('[data-bs-ride="carousel"]');for(let h=0,_=E.length;h<_;h++)De.carouselInterface(E[h],De.getInstance(E[h]))}),Pt(De);const Un="collapse",Ht={toggle:!0,parent:null},$n={toggle:"boolean",parent:"(null|element)"},Bt="show",yn="collapse",Ee="collapsing",Wn="collapsed",Zn=":scope .collapse .collapse",Kn='[data-bs-toggle="collapse"]';class He extends he{constructor(h,_){super(h),this._isTransitioning=!1,this._config=this._getConfig(_),this._triggerArray=[];const k=at.find(Kn);for(let z=0,V=k.length;z<V;z++){const Y=k[z],ut=un(Y),St=at.find(ut).filter(Ut=>Ut===this._element);null!==ut&&St.length&&(this._selector=ut,this._triggerArray.push(Y))}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Ht}static get NAME(){return Un}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let h,_=[];if(this._config.parent){const Y=at.find(Zn,this._config.parent);_=at.find(".collapse.show, .collapse.collapsing",this._config.parent).filter(ut=>!Y.includes(ut))}const k=at.findOne(this._selector);if(_.length){const Y=_.find(ut=>k!==ut);if(h=Y?He.getInstance(Y):null,h&&h._isTransitioning)return}if(Z.trigger(this._element,"show.bs.collapse").defaultPrevented)return;_.forEach(Y=>{k!==Y&&He.getOrCreateInstance(Y,{toggle:!1}).hide(),h||zt.set(Y,"bs.collapse",null)});const z=this._getDimension();this._element.classList.remove(yn),this._element.classList.add(Ee),this._element.style[z]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const V=`scroll${z[0].toUpperCase()+z.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Ee),this._element.classList.add(yn,Bt),this._element.style[z]="",Z.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[z]=`${this._element[V]}px`}hide(){if(this._isTransitioning||!this._isShown()||Z.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const h=this._getDimension();this._element.style[h]=`${this._element.getBoundingClientRect()[h]}px`,this._element.classList.add(Ee),this._element.classList.remove(yn,Bt);const _=this._triggerArray.length;for(let k=0;k<_;k++){const z=this._triggerArray[k],V=$t(z);V&&!this._isShown(V)&&this._addAriaAndCollapsedClass([z],!1)}this._isTransitioning=!0,this._element.style[h]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Ee),this._element.classList.add(yn),Z.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}_isShown(h=this._element){return h.classList.contains(Bt)}_getConfig(h){return(h=bt(bt(bt({},Ht),Kt.getDataAttributes(this._element)),h)).toggle=Boolean(h.toggle),h.parent=Wt(h.parent),ct(Un,h,$n),h}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const h=at.find(Zn,this._config.parent);at.find(Kn,this._config.parent).filter(_=>!h.includes(_)).forEach(_=>{const k=$t(_);k&&this._addAriaAndCollapsedClass([_],this._isShown(k))})}_addAriaAndCollapsedClass(h,_){h.length&&h.forEach(k=>{_?k.classList.remove(Wn):k.classList.add(Wn),k.setAttribute("aria-expanded",_)})}static jQueryInterface(h){return this.each(function(){const _={};"string"==typeof h&&/show|hide/.test(h)&&(_.toggle=!1);const k=He.getOrCreateInstance(this,_);if("string"==typeof h){if(void 0===k[h])throw new TypeError(`No method named "${h}"`);k[h]()}})}}Z.on(document,"click.bs.collapse.data-api",Kn,function(E){("A"===E.target.tagName||E.delegateTarget&&"A"===E.delegateTarget.tagName)&&E.preventDefault();const h=un(this);at.find(h).forEach(_=>{He.getOrCreateInstance(_,{toggle:!1}).toggle()})}),Pt(He);const wn="dropdown",Dn="Escape",Xn="ArrowUp",be="ArrowDown",_e=new RegExp("ArrowUp|ArrowDown|Escape"),nn="click.bs.dropdown.data-api",Gn="keydown.bs.dropdown.data-api",Ae="show",ln='[data-bs-toggle="dropdown"]',Bn=".dropdown-menu",ai=gt()?"top-end":"top-start",oi=gt()?"top-start":"top-end",ui=gt()?"bottom-end":"bottom-start",Cn=gt()?"bottom-start":"bottom-end",hi=gt()?"left-start":"right-start",Fn=gt()?"right-start":"left-start",li={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},mt={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"};class t extends he{constructor(h,_){super(h),this._popper=null,this._config=this._getConfig(_),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar()}static get Default(){return li}static get DefaultType(){return mt}static get NAME(){return wn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(M(this._element)||this._isShown(this._menu))return;const h={relatedTarget:this._element};if(Z.trigger(this._element,"show.bs.dropdown",h).defaultPrevented)return;const _=t.getParentFromElement(this._element);this._inNavbar?Kt.setDataAttribute(this._menu,"popper","none"):this._createPopper(_),"ontouchstart"in document.documentElement&&!_.closest(".navbar-nav")&&[].concat(...document.body.children).forEach(k=>Z.on(k,"mouseover",it)),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ae),this._element.classList.add(Ae),Z.trigger(this._element,"shown.bs.dropdown",h)}hide(){!M(this._element)&&this._isShown(this._menu)&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(h){Z.trigger(this._element,"hide.bs.dropdown",h).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(_=>Z.off(_,"mouseover",it)),this._popper&&this._popper.destroy(),this._menu.classList.remove(Ae),this._element.classList.remove(Ae),this._element.setAttribute("aria-expanded","false"),Kt.removeDataAttribute(this._menu,"popper"),Z.trigger(this._element,"hidden.bs.dropdown",h))}_getConfig(h){if(h=bt(bt(bt({},this.constructor.Default),Kt.getDataAttributes(this._element)),h),ct(wn,h,this.constructor.DefaultType),"object"==typeof h.reference&&!Pe(h.reference)&&"function"!=typeof h.reference.getBoundingClientRect)throw new TypeError(`${wn.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return h}_createPopper(h){if(void 0===yt)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let _=this._element;"parent"===this._config.reference?_=h:Pe(this._config.reference)?_=Wt(this._config.reference):"object"==typeof this._config.reference&&(_=this._config.reference);const k=this._getPopperConfig(),z=k.modifiers.find(V=>"applyStyles"===V.name&&!1===V.enabled);this._popper=yt.createPopper(_,this._menu,k),z&&Kt.setDataAttribute(this._menu,"popper","static")}_isShown(h=this._element){return h.classList.contains(Ae)}_getMenuElement(){return at.next(this._element,Bn)[0]}_getPlacement(){const h=this._element.parentNode;if(h.classList.contains("dropend"))return hi;if(h.classList.contains("dropstart"))return Fn;const _="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return h.classList.contains("dropup")?_?oi:ai:_?Cn:ui}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:h}=this._config;return"string"==typeof h?h.split(",").map(_=>Number.parseInt(_,10)):"function"==typeof h?_=>h(_,this._element):h}_getPopperConfig(){const h={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return"static"===this._config.display&&(h.modifiers=[{name:"applyStyles",enabled:!1}]),bt(bt({},h),"function"==typeof this._config.popperConfig?this._config.popperConfig(h):this._config.popperConfig)}_selectMenuItem({key:h,target:_}){const k=at.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(Ze);k.length&&Ne(k,_,h===be,!k.includes(_)).focus()}static jQueryInterface(h){return this.each(function(){const _=t.getOrCreateInstance(this,h);if("string"==typeof h){if(void 0===_[h])throw new TypeError(`No method named "${h}"`);_[h]()}})}static clearMenus(h){if(h&&(2===h.button||"keyup"===h.type&&"Tab"!==h.key))return;const _=at.find(ln);for(let k=0,z=_.length;k<z;k++){const V=t.getInstance(_[k]);if(!V||!1===V._config.autoClose||!V._isShown())continue;const Y={relatedTarget:V._element};if(h){const ut=h.composedPath(),St=ut.includes(V._menu);if(ut.includes(V._element)||"inside"===V._config.autoClose&&!St||"outside"===V._config.autoClose&&St||V._menu.contains(h.target)&&("keyup"===h.type&&"Tab"===h.key||/input|select|option|textarea|form/i.test(h.target.tagName)))continue;"click"===h.type&&(Y.clickEvent=h)}V._completeHide(Y)}}static getParentFromElement(h){return $t(h)||h.parentNode}static dataApiKeydownHandler(h){if(/input|textarea/i.test(h.target.tagName)?"Space"===h.key||h.key!==Dn&&(h.key!==be&&h.key!==Xn||h.target.closest(Bn)):!_e.test(h.key))return;const _=this.classList.contains(Ae);if(!_&&h.key===Dn||(h.preventDefault(),h.stopPropagation(),M(this)))return;const k=this.matches(ln)?this:at.prev(this,ln)[0],z=t.getOrCreateInstance(k);if(h.key!==Dn)return h.key===Xn||h.key===be?(_||z.show(),void z._selectMenuItem(h)):void(_&&"Space"!==h.key||t.clearMenus());z.hide()}}Z.on(document,Gn,ln,t.dataApiKeydownHandler),Z.on(document,Gn,Bn,t.dataApiKeydownHandler),Z.on(document,nn,t.clearMenus),Z.on(document,"keyup.bs.dropdown.data-api",t.clearMenus),Z.on(document,nn,ln,function(E){E.preventDefault(),t.getOrCreateInstance(this).toggle()}),Pt(t);const e=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",n=".sticky-top";class i{constructor(){this._element=document.body}getWidth(){const h=document.documentElement.clientWidth;return Math.abs(window.innerWidth-h)}hide(){const h=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",_=>_+h),this._setElementAttributes(e,"paddingRight",_=>_+h),this._setElementAttributes(n,"marginRight",_=>_-h)}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(h,_,k){const z=this.getWidth();this._applyManipulationCallback(h,V=>{if(V!==this._element&&window.innerWidth>V.clientWidth+z)return;this._saveInitialAttribute(V,_);const Y=window.getComputedStyle(V)[_];V.style[_]=`${k(Number.parseFloat(Y))}px`})}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(e,"paddingRight"),this._resetElementAttributes(n,"marginRight")}_saveInitialAttribute(h,_){const k=h.style[_];k&&Kt.setDataAttribute(h,_,k)}_resetElementAttributes(h,_){this._applyManipulationCallback(h,k=>{const z=Kt.getDataAttribute(k,_);void 0===z?k.style.removeProperty(_):(Kt.removeDataAttribute(k,_),k.style[_]=z)})}_applyManipulationCallback(h,_){Pe(h)?_(h):at.find(h,this._element).forEach(_)}isOverflowing(){return this.getWidth()>0}}const s={className:"modal-backdrop",isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},r={className:"string",isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"},a="show",o="mousedown.bs.backdrop";class u{constructor(h){this._config=this._getConfig(h),this._isAppended=!1,this._element=null}show(h){this._config.isVisible?(this._append(),this._config.isAnimated&&this._getElement(),this._getElement().classList.add(a),this._emulateAnimation(()=>{Le(h)})):Le(h)}hide(h){this._config.isVisible?(this._getElement().classList.remove(a),this._emulateAnimation(()=>{this.dispose(),Le(h)})):Le(h)}_getElement(){if(!this._element){const h=document.createElement("div");h.className=this._config.className,this._config.isAnimated&&h.classList.add("fade"),this._element=h}return this._element}_getConfig(h){return(h=bt(bt({},s),"object"==typeof h?h:{})).rootElement=Wt(h.rootElement),ct("backdrop",h,r),h}_append(){this._isAppended||(this._config.rootElement.append(this._getElement()),Z.on(this._getElement(),o,()=>{Le(this._config.clickCallback)}),this._isAppended=!0)}dispose(){this._isAppended&&(Z.off(this._element,o),this._element.remove(),this._isAppended=!1)}_emulateAnimation(h){pt(h,this._getElement(),this._config.isAnimated)}}const l={trapElement:null,autofocus:!0},c={trapElement:"element",autofocus:"boolean"},d=".bs.focustrap",m="backward";class p{constructor(h){this._config=this._getConfig(h),this._isActive=!1,this._lastTabNavDirection=null}activate(){const{trapElement:h,autofocus:_}=this._config;this._isActive||(_&&h.focus(),Z.off(document,d),Z.on(document,"focusin.bs.focustrap",k=>this._handleFocusin(k)),Z.on(document,"keydown.tab.bs.focustrap",k=>this._handleKeydown(k)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,Z.off(document,d))}_handleFocusin(h){const{target:_}=h,{trapElement:k}=this._config;if(_===document||_===k||k.contains(_))return;const z=at.focusableChildren(k);0===z.length?k.focus():this._lastTabNavDirection===m?z[z.length-1].focus():z[0].focus()}_handleKeydown(h){"Tab"===h.key&&(this._lastTabNavDirection=h.shiftKey?m:"forward")}_getConfig(h){return h=bt(bt({},l),"object"==typeof h?h:{}),ct("focustrap",h,c),h}}const b="modal",g="Escape",v={backdrop:!0,keyboard:!0,focus:!0},f={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},y="hidden.bs.modal",x="show.bs.modal",A="resize.bs.modal",I="click.dismiss.bs.modal",w="keydown.dismiss.bs.modal",N="mousedown.dismiss.bs.modal",B="modal-open",D="show",F="modal-static";class L extends he{constructor(h,_){super(h),this._config=this._getConfig(_),this._dialog=at.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new i}static get Default(){return v}static get NAME(){return b}toggle(h){return this._isShown?this.hide():this.show(h)}show(h){this._isShown||this._isTransitioning||Z.trigger(this._element,x,{relatedTarget:h}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add(B),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),Z.on(this._dialog,N,()=>{Z.one(this._element,"mouseup.dismiss.bs.modal",_=>{_.target===this._element&&(this._ignoreBackdropClick=!0)})}),this._showBackdrop(()=>this._showElement(h)))}hide(){if(!this._isShown||this._isTransitioning||Z.trigger(this._element,"hide.bs.modal").defaultPrevented)return;this._isShown=!1;const h=this._isAnimated();h&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),this._focustrap.deactivate(),this._element.classList.remove(D),Z.off(this._element,I),Z.off(this._dialog,N),this._queueCallback(()=>this._hideModal(),this._element,h)}dispose(){[window,this._dialog].forEach(h=>Z.off(h,".bs.modal")),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new u({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new p({trapElement:this._element})}_getConfig(h){return h=bt(bt(bt({},v),Kt.getDataAttributes(this._element)),"object"==typeof h?h:{}),ct(b,h,f),h}_showElement(h){const _=this._isAnimated(),k=at.findOne(".modal-body",this._dialog);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,k&&(k.scrollTop=0),this._element.classList.add(D),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Z.trigger(this._element,"shown.bs.modal",{relatedTarget:h})},this._dialog,_)}_setEscapeEvent(){this._isShown?Z.on(this._element,w,h=>{this._config.keyboard&&h.key===g?(h.preventDefault(),this.hide()):this._config.keyboard||h.key!==g||this._triggerBackdropTransition()}):Z.off(this._element,w)}_setResizeEvent(){this._isShown?Z.on(window,A,()=>this._adjustDialog()):Z.off(window,A)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(B),this._resetAdjustments(),this._scrollBar.reset(),Z.trigger(this._element,y)})}_showBackdrop(h){Z.on(this._element,I,_=>{this._ignoreBackdropClick?this._ignoreBackdropClick=!1:_.target===_.currentTarget&&(!0===this._config.backdrop?this.hide():"static"===this._config.backdrop&&this._triggerBackdropTransition())}),this._backdrop.show(h)}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(Z.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const{classList:h,scrollHeight:_,style:k}=this._element,z=_>document.documentElement.clientHeight;!z&&"hidden"===k.overflowY||h.contains(F)||(z||(k.overflowY="hidden"),h.add(F),this._queueCallback(()=>{h.remove(F),z||this._queueCallback(()=>{k.overflowY=""},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const h=this._element.scrollHeight>document.documentElement.clientHeight,_=this._scrollBar.getWidth(),k=_>0;(!k&&h&&!gt()||k&&!h&&gt())&&(this._element.style.paddingLeft=`${_}px`),(k&&!h&&!gt()||!k&&h&&gt())&&(this._element.style.paddingRight=`${_}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(h,_){return this.each(function(){const k=L.getOrCreateInstance(this,h);if("string"==typeof h){if(void 0===k[h])throw new TypeError(`No method named "${h}"`);k[h](_)}})}}Z.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(E){const h=$t(this);["A","AREA"].includes(this.tagName)&&E.preventDefault(),Z.one(h,x,k=>{k.defaultPrevented||Z.one(h,y,()=>{Ze(this)&&this.focus()})});const _=at.findOne(".modal.show");_&&L.getInstance(_).hide(),L.getOrCreateInstance(h).toggle(this)}),hn(L),Pt(L);const T="offcanvas",P={backdrop:!0,keyboard:!0,scroll:!1},q={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"},O="show",R=".offcanvas.show",U="hidden.bs.offcanvas";class W extends he{constructor(h,_){super(h),this._config=this._getConfig(_),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get NAME(){return T}static get Default(){return P}toggle(h){return this._isShown?this.hide():this.show(h)}show(h){this._isShown||Z.trigger(this._element,"show.bs.offcanvas",{relatedTarget:h}).defaultPrevented||(this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||(new i).hide(),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(O),this._queueCallback(()=>{this._config.scroll||this._focustrap.activate(),Z.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:h})},this._element,!0))}hide(){this._isShown&&(Z.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.remove(O),this._backdrop.hide(),this._queueCallback(()=>{this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._element.style.visibility="hidden",this._config.scroll||(new i).reset(),Z.trigger(this._element,U)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_getConfig(h){return h=bt(bt(bt({},P),Kt.getDataAttributes(this._element)),"object"==typeof h?h:{}),ct(T,h,q),h}_initializeBackDrop(){return new u({className:"offcanvas-backdrop",isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_initializeFocusTrap(){return new p({trapElement:this._element})}_addEventListeners(){Z.on(this._element,"keydown.dismiss.bs.offcanvas",h=>{this._config.keyboard&&"Escape"===h.key&&this.hide()})}static jQueryInterface(h){return this.each(function(){const _=W.getOrCreateInstance(this,h);if("string"==typeof h){if(void 0===_[h]||h.startsWith("_")||"constructor"===h)throw new TypeError(`No method named "${h}"`);_[h](this)}})}}Z.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(E){const h=$t(this);if(["A","AREA"].includes(this.tagName)&&E.preventDefault(),M(this))return;Z.one(h,U,()=>{Ze(this)&&this.focus()});const _=at.findOne(R);_&&_!==h&&W.getInstance(_).hide(),W.getOrCreateInstance(h).toggle(this)}),Z.on(window,"load.bs.offcanvas.data-api",()=>at.find(R).forEach(E=>W.getOrCreateInstance(E).show())),hn(W),Pt(W);const G=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),X=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Q=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,et=(E,h)=>{const _=E.nodeName.toLowerCase();if(h.includes(_))return!G.has(_)||Boolean(X.test(E.nodeValue)||Q.test(E.nodeValue));const k=h.filter(z=>z instanceof RegExp);for(let z=0,V=k.length;z<V;z++)if(k[z].test(_))return!0;return!1};function tt(E,h,_){if(!E.length)return E;if(_&&"function"==typeof _)return _(E);const k=(new window.DOMParser).parseFromString(E,"text/html"),z=[].concat(...k.body.querySelectorAll("*"));for(let V=0,Y=z.length;V<Y;V++){const ut=z[V],St=ut.nodeName.toLowerCase();if(!Object.keys(h).includes(St)){ut.remove();continue}const Ut=[].concat(...ut.attributes),jt=[].concat(h["*"]||[],h[St]||[]);Ut.forEach(Et=>{et(Et,jt)||ut.removeAttribute(Et.nodeName)})}return k.body.innerHTML}const wt="tooltip",_t=new Set(["sanitize","allowList","sanitizeFn"]),xt={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},ot={AUTO:"auto",TOP:"top",RIGHT:gt()?"left":"right",BOTTOM:"bottom",LEFT:gt()?"right":"left"},It={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},popperConfig:null},lt={HIDE:"hide.bs.tooltip",HIDDEN:"hidden.bs.tooltip",SHOW:"show.bs.tooltip",SHOWN:"shown.bs.tooltip",INSERTED:"inserted.bs.tooltip",CLICK:"click.bs.tooltip",FOCUSIN:"focusin.bs.tooltip",FOCUSOUT:"focusout.bs.tooltip",MOUSEENTER:"mouseenter.bs.tooltip",MOUSELEAVE:"mouseleave.bs.tooltip"},Mt="fade",Zt="show",ee="show",le=".tooltip-inner",Xt="hide.bs.modal",Yt="hover";class Te extends he{constructor(h,_){if(void 0===yt)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(h),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(_),this.tip=null,this._setListeners()}static get Default(){return It}static get NAME(){return wt}static get Event(){return lt}static get DefaultType(){return xt}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(h){if(this._isEnabled)if(h){const _=this._initializeOnDelegatedTarget(h);_._activeTrigger.click=!_._activeTrigger.click,_._isWithActiveTrigger()?_._enter(null,_):_._leave(null,_)}else{if(this.getTipElement().classList.contains(Zt))return void this._leave(null,this);this._enter(null,this)}}dispose(){clearTimeout(this._timeout),Z.off(this._element.closest(".modal"),Xt,this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this.isWithContent()||!this._isEnabled)return;const h=Z.trigger(this._element,this.constructor.Event.SHOW),_=qe(this._element),k=null===_?this._element.ownerDocument.documentElement.contains(this._element):_.contains(this._element);if(h.defaultPrevented||!k)return;"tooltip"===this.constructor.NAME&&this.tip&&this.getTitle()!==this.tip.querySelector(le).innerHTML&&(this._disposePopper(),this.tip.remove(),this.tip=null);const z=this.getTipElement(),V=(Et=>{do{Et+=Math.floor(1e6*Math.random())}while(document.getElementById(Et));return Et})(this.constructor.NAME);z.setAttribute("id",V),this._element.setAttribute("aria-describedby",V),this._config.animation&&z.classList.add(Mt);const Y="function"==typeof this._config.placement?this._config.placement.call(this,z,this._element):this._config.placement,ut=this._getAttachment(Y);this._addAttachmentClass(ut);const{container:St}=this._config;zt.set(z,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(St.append(z),Z.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=yt.createPopper(this._element,z,this._getPopperConfig(ut)),z.classList.add(Zt);const Ut=this._resolvePossibleFunction(this._config.customClass);Ut&&z.classList.add(...Ut.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(Et=>{Z.on(Et,"mouseover",it)});const jt=this.tip.classList.contains(Mt);this._queueCallback(()=>{const Et=this._hoverState;this._hoverState=null,Z.trigger(this._element,this.constructor.Event.SHOWN),"out"===Et&&this._leave(null,this)},this.tip,jt)}hide(){if(!this._popper)return;const h=this.getTipElement();if(Z.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented)return;h.classList.remove(Zt),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(k=>Z.off(k,"mouseover",it)),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1;const _=this.tip.classList.contains(Mt);this._queueCallback(()=>{this._isWithActiveTrigger()||(this._hoverState!==ee&&h.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),Z.trigger(this._element,this.constructor.Event.HIDDEN),this._disposePopper())},this.tip,_),this._hoverState=""}update(){null!==this._popper&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;const h=document.createElement("div");h.innerHTML=this._config.template;const _=h.children[0];return this.setContent(_),_.classList.remove(Mt,Zt),this.tip=_,this.tip}setContent(h){this._sanitizeAndSetContent(h,this.getTitle(),le)}_sanitizeAndSetContent(h,_,k){const z=at.findOne(k,h);_||!z?this.setElementContent(z,_):z.remove()}setElementContent(h,_){if(null!==h)return Pe(_)?(_=Wt(_),void(this._config.html?_.parentNode!==h&&(h.innerHTML="",h.append(_)):h.textContent=_.textContent)):void(this._config.html?(this._config.sanitize&&(_=tt(_,this._config.allowList,this._config.sanitizeFn)),h.innerHTML=_):h.textContent=_)}getTitle(){const h=this._element.getAttribute("data-bs-original-title")||this._config.title;return this._resolvePossibleFunction(h)}updateAttachment(h){return"right"===h?"end":"left"===h?"start":h}_initializeOnDelegatedTarget(h,_){return _||this.constructor.getOrCreateInstance(h.delegateTarget,this._getDelegateConfig())}_getOffset(){const{offset:h}=this._config;return"string"==typeof h?h.split(",").map(_=>Number.parseInt(_,10)):"function"==typeof h?_=>h(_,this._element):h}_resolvePossibleFunction(h){return"function"==typeof h?h.call(this._element):h}_getPopperConfig(h){const _={placement:h,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:k=>this._handlePopperPlacementChange(k)}],onFirstUpdate:k=>{k.options.placement!==k.placement&&this._handlePopperPlacementChange(k)}};return bt(bt({},_),"function"==typeof this._config.popperConfig?this._config.popperConfig(_):this._config.popperConfig)}_addAttachmentClass(h){this.getTipElement().classList.add(`${this._getBasicClassPrefix()}-${this.updateAttachment(h)}`)}_getAttachment(h){return ot[h.toUpperCase()]}_setListeners(){this._config.trigger.split(" ").forEach(h=>{if("click"===h)Z.on(this._element,this.constructor.Event.CLICK,this._config.selector,_=>this.toggle(_));else if("manual"!==h){const k=h===Yt?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;Z.on(this._element,h===Yt?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,this._config.selector,z=>this._enter(z)),Z.on(this._element,k,this._config.selector,z=>this._leave(z))}}),this._hideModalHandler=()=>{this._element&&this.hide()},Z.on(this._element.closest(".modal"),Xt,this._hideModalHandler),this._config.selector?this._config=bi(bt({},this._config),{trigger:"manual",selector:""}):this._fixTitle()}_fixTitle(){const h=this._element.getAttribute("title"),_=typeof this._element.getAttribute("data-bs-original-title");(h||"string"!==_)&&(this._element.setAttribute("data-bs-original-title",h||""),!h||this._element.getAttribute("aria-label")||this._element.textContent||this._element.setAttribute("aria-label",h),this._element.setAttribute("title",""))}_enter(h,_){_=this._initializeOnDelegatedTarget(h,_),h&&(_._activeTrigger["focusin"===h.type?"focus":Yt]=!0),_.getTipElement().classList.contains(Zt)||_._hoverState===ee?_._hoverState=ee:(clearTimeout(_._timeout),_._hoverState=ee,_._config.delay&&_._config.delay.show?_._timeout=setTimeout(()=>{_._hoverState===ee&&_.show()},_._config.delay.show):_.show())}_leave(h,_){_=this._initializeOnDelegatedTarget(h,_),h&&(_._activeTrigger["focusout"===h.type?"focus":Yt]=_._element.contains(h.relatedTarget)),_._isWithActiveTrigger()||(clearTimeout(_._timeout),_._hoverState="out",_._config.delay&&_._config.delay.hide?_._timeout=setTimeout(()=>{"out"===_._hoverState&&_.hide()},_._config.delay.hide):_.hide())}_isWithActiveTrigger(){for(const h in this._activeTrigger)if(this._activeTrigger[h])return!0;return!1}_getConfig(h){const _=Kt.getDataAttributes(this._element);return Object.keys(_).forEach(k=>{_t.has(k)&&delete _[k]}),(h=bt(bt(bt({},this.constructor.Default),_),"object"==typeof h&&h?h:{})).container=!1===h.container?document.body:Wt(h.container),"number"==typeof h.delay&&(h.delay={show:h.delay,hide:h.delay}),"number"==typeof h.title&&(h.title=h.title.toString()),"number"==typeof h.content&&(h.content=h.content.toString()),ct(wt,h,this.constructor.DefaultType),h.sanitize&&(h.template=tt(h.template,h.allowList,h.sanitizeFn)),h}_getDelegateConfig(){const h={};for(const _ in this._config)this.constructor.Default[_]!==this._config[_]&&(h[_]=this._config[_]);return h}_cleanTipClass(){const h=this.getTipElement(),_=new RegExp(`(^|\\s)${this._getBasicClassPrefix()}\\S+`,"g"),k=h.getAttribute("class").match(_);null!==k&&k.length>0&&k.map(z=>z.trim()).forEach(z=>h.classList.remove(z))}_getBasicClassPrefix(){return"bs-tooltip"}_handlePopperPlacementChange(h){const{state:_}=h;_&&(this.tip=_.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(_.placement)))}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(h){return this.each(function(){const _=Te.getOrCreateInstance(this,h);if("string"==typeof h){if(void 0===_[h])throw new TypeError(`No method named "${h}"`);_[h]()}})}}Pt(Te);const dn=bi(bt({},Te.Default),{placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),Sn=bi(bt({},Te.DefaultType),{content:"(string|element|function)"}),ci={HIDE:"hide.bs.popover",HIDDEN:"hidden.bs.popover",SHOW:"show.bs.popover",SHOWN:"shown.bs.popover",INSERTED:"inserted.bs.popover",CLICK:"click.bs.popover",FOCUSIN:"focusin.bs.popover",FOCUSOUT:"focusout.bs.popover",MOUSEENTER:"mouseenter.bs.popover",MOUSELEAVE:"mouseleave.bs.popover"};class kn extends Te{static get Default(){return dn}static get NAME(){return"popover"}static get Event(){return ci}static get DefaultType(){return Sn}isWithContent(){return this.getTitle()||this._getContent()}setContent(h){this._sanitizeAndSetContent(h,this.getTitle(),".popover-header"),this._sanitizeAndSetContent(h,this._getContent(),".popover-body")}_getContent(){return this._resolvePossibleFunction(this._config.content)}_getBasicClassPrefix(){return"bs-popover"}static jQueryInterface(h){return this.each(function(){const _=kn.getOrCreateInstance(this,h);if("string"==typeof h){if(void 0===_[h])throw new TypeError(`No method named "${h}"`);_[h]()}})}}Pt(kn);const Rn="scrollspy",Qn={offset:10,method:"auto",target:""},pe={offset:"number",method:"string",target:"(string|element)"},re="active",ae=".nav-link, .list-group-item, .dropdown-item",ye="position";class te extends he{constructor(h,_){super(h),this._scrollElement="BODY"===this._element.tagName?window:this._element,this._config=this._getConfig(_),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,Z.on(this._scrollElement,"scroll.bs.scrollspy",()=>this._process()),this.refresh(),this._process()}static get Default(){return Qn}static get NAME(){return Rn}refresh(){const _="auto"===this._config.method?this._scrollElement===this._scrollElement.window?"offset":ye:this._config.method,k=_===ye?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),at.find(ae,this._config.target).map(z=>{const V=un(z),Y=V?at.findOne(V):null;if(Y){const ut=Y.getBoundingClientRect();if(ut.width||ut.height)return[Kt[_](Y).top+k,V]}return null}).filter(z=>z).sort((z,V)=>z[0]-V[0]).forEach(z=>{this._offsets.push(z[0]),this._targets.push(z[1])})}dispose(){Z.off(this._scrollElement,".bs.scrollspy"),super.dispose()}_getConfig(h){return(h=bt(bt(bt({},Qn),Kt.getDataAttributes(this._element)),"object"==typeof h&&h?h:{})).target=Wt(h.target)||document.documentElement,ct(Rn,h,pe),h}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){const h=this._getScrollTop()+this._config.offset,_=this._getScrollHeight(),k=this._config.offset+_-this._getOffsetHeight();if(this._scrollHeight!==_&&this.refresh(),h>=k){const z=this._targets[this._targets.length-1];this._activeTarget!==z&&this._activate(z)}else{if(this._activeTarget&&h<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(let z=this._offsets.length;z--;)this._activeTarget!==this._targets[z]&&h>=this._offsets[z]&&(void 0===this._offsets[z+1]||h<this._offsets[z+1])&&this._activate(this._targets[z])}}_activate(h){this._activeTarget=h,this._clear();const _=ae.split(",").map(z=>`${z}[data-bs-target="${h}"],${z}[href="${h}"]`),k=at.findOne(_.join(","),this._config.target);k.classList.add(re),k.classList.contains("dropdown-item")?at.findOne(".dropdown-toggle",k.closest(".dropdown")).classList.add(re):at.parents(k,".nav, .list-group").forEach(z=>{at.prev(z,".nav-link, .list-group-item").forEach(V=>V.classList.add(re)),at.prev(z,".nav-item").forEach(V=>{at.children(V,".nav-link").forEach(Y=>Y.classList.add(re))})}),Z.trigger(this._scrollElement,"activate.bs.scrollspy",{relatedTarget:h})}_clear(){at.find(ae,this._config.target).filter(h=>h.classList.contains(re)).forEach(h=>h.classList.remove(re))}static jQueryInterface(h){return this.each(function(){const _=te.getOrCreateInstance(this,h);if("string"==typeof h){if(void 0===_[h])throw new TypeError(`No method named "${h}"`);_[h]()}})}}Z.on(window,"load.bs.scrollspy.data-api",()=>{at.find('[data-bs-spy="scroll"]').forEach(E=>new te(E))}),Pt(te);const Ie="active",we=".active",En=":scope > li > .active";class sn extends he{static get NAME(){return"tab"}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains(Ie))return;let h;const _=$t(this._element),k=this._element.closest(".nav, .list-group");k&&(h=at.find("UL"===k.nodeName||"OL"===k.nodeName?En:we,k),h=h[h.length-1]);const z=h?Z.trigger(h,"hide.bs.tab",{relatedTarget:this._element}):null;if(Z.trigger(this._element,"show.bs.tab",{relatedTarget:h}).defaultPrevented||null!==z&&z.defaultPrevented)return;this._activate(this._element,k);const V=()=>{Z.trigger(h,"hidden.bs.tab",{relatedTarget:this._element}),Z.trigger(this._element,"shown.bs.tab",{relatedTarget:h})};_?this._activate(_,_.parentNode,V):V()}_activate(h,_,k){const z=(!_||"UL"!==_.nodeName&&"OL"!==_.nodeName?at.children(_,we):at.find(En,_))[0],V=k&&z&&z.classList.contains("fade"),Y=()=>this._transitionComplete(h,z,k);z&&V?(z.classList.remove("show"),this._queueCallback(Y,h,!0)):Y()}_transitionComplete(h,_,k){if(_){_.classList.remove(Ie);const V=at.findOne(":scope > .dropdown-menu .active",_.parentNode);V&&V.classList.remove(Ie),"tab"===_.getAttribute("role")&&_.setAttribute("aria-selected",!1)}h.classList.add(Ie),"tab"===h.getAttribute("role")&&h.setAttribute("aria-selected",!0),h.classList.contains("fade")&&h.classList.add("show");let z=h.parentNode;if(z&&"LI"===z.nodeName&&(z=z.parentNode),z&&z.classList.contains("dropdown-menu")){const V=h.closest(".dropdown");V&&at.find(".dropdown-toggle",V).forEach(Y=>Y.classList.add(Ie)),h.setAttribute("aria-expanded",!0)}k&&k()}static jQueryInterface(h){return this.each(function(){const _=sn.getOrCreateInstance(this);if("string"==typeof h){if(void 0===_[h])throw new TypeError(`No method named "${h}"`);_[h]()}})}}Z.on(document,"click.bs.tab.data-api",'[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',function(E){["A","AREA"].includes(this.tagName)&&E.preventDefault(),M(this)||sn.getOrCreateInstance(this).show()}),Pt(sn);const Be="show",Fe="showing",Re={animation:"boolean",autohide:"boolean",delay:"number"},xe={animation:!0,autohide:!0,delay:5e3};class me extends he{constructor(h,_){super(h),this._config=this._getConfig(_),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return Re}static get Default(){return xe}static get NAME(){return"toast"}show(){Z.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.classList.add(Be),this._element.classList.add(Fe),this._queueCallback(()=>{this._element.classList.remove(Fe),Z.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this._element.classList.contains(Be)&&(Z.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(Fe),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove(Fe),this._element.classList.remove(Be),Z.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this._element.classList.contains(Be)&&this._element.classList.remove(Be),super.dispose()}_getConfig(h){return h=bt(bt(bt({},xe),Kt.getDataAttributes(this._element)),"object"==typeof h&&h?h:{}),ct("toast",h,this.constructor.DefaultType),h}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(h,_){switch(h.type){case"mouseover":case"mouseout":this._hasMouseInteraction=_;break;case"focusin":case"focusout":this._hasKeyboardInteraction=_}if(_)return void this._clearTimeout();const k=h.relatedTarget;this._element===k||this._element.contains(k)||this._maybeScheduleHide()}_setListeners(){Z.on(this._element,"mouseover.bs.toast",h=>this._onInteraction(h,!0)),Z.on(this._element,"mouseout.bs.toast",h=>this._onInteraction(h,!1)),Z.on(this._element,"focusin.bs.toast",h=>this._onInteraction(h,!0)),Z.on(this._element,"focusout.bs.toast",h=>this._onInteraction(h,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(h){return this.each(function(){const _=me.getOrCreateInstance(this,h);if("string"==typeof h){if(void 0===_[h])throw new TypeError(`No method named "${h}"`);_[h](this)}})}}return hn(me),Pt(me),{Alert:Je,Button:Dt,Carousel:De,Collapse:He,Dropdown:t,Modal:L,Offcanvas:W,Popover:kn,ScrollSpy:te,Tab:sn,Toast:me,Tooltip:Te}});var paper=function(Nt,K){var yt=(Nt=Nt||require("./node/self.js")).window,kt=Nt.document,C=new function(){function t(d,m,p){var b;return d&&((b=r(d,"length"))&&"number"==typeof b.value?o:function(g,v){for(var f in this)this.hasOwnProperty(f)&&g.call(v,this[f],f,this)}).call(d,m,p=p||d),p}var e=/^(statics|enumerable|beans|preserve)$/,n=[],i=n.slice,s=Object.create,r=Object.getOwnPropertyDescriptor,a=Object.defineProperty,o=n.forEach||function(d,m){for(var p=0,b=this.length;p<b;p++)d.call(m,this[p],p,this)},u=Object.assign||function(d){for(var m=1,p=arguments.length;m<p;m++){var b,g=arguments[m];for(b in g)g.hasOwnProperty(b)&&(d[b]=g[b])}return d};function l(d,m,p,b,g){var v={};function f(I,w){var N,B="function"==typeof(w="string"==typeof(w=w||(w=r(m,I))&&(w.get?w:w.value))&&"#"===w[0]&&d[w.substring(1)]||w),D=w,F=g||B&&!w.base?w&&w.get?I in d:d[I]:null;g&&F||(B&&F&&(w.base=F),B&&!1!==b&&(N=I.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(v[N[3].toLowerCase()+N[4]]=N[2]),D&&!B&&D.get&&"function"==typeof D.get&&c.isPlainObject(D)||(D={value:D,writable:!0}),(r(d,I)||{configurable:!0}).configurable&&(D.configurable=!0,D.enumerable=null!=p?p:!N),a(d,I,D))}if(m){for(var y in m)m.hasOwnProperty(y)&&!e.test(y)&&f(y);for(var y in v){var x,A=d["set"+(x=v[y])];!(x=d["get"+x]||A&&d["is"+x])||!0!==b&&0!==x.length||f(y,{get:x,set:A})}}return d}function c(){for(var d=0,m=arguments.length;d<m;d++){var p=arguments[d];p&&u(this,p)}return this}return l(c,{inject:function(d){var m,p,b;d&&(p=d.beans,b=d.preserve,(m=!0===d.statics?d:d.statics)!==d&&l(this.prototype,d,d.enumerable,p,b),l(this,m,null,p,b));for(var g=1,v=arguments.length;g<v;g++)this.inject(arguments[g]);return this},extend:function(){for(var d,m,p,b=this,g=0,v=arguments.length;g<v&&(!d||!m);g++)p=arguments[g],d=d||p.initialize,m=m||p.prototype;return m=(d=d||function(){b.apply(this,arguments)}).prototype=m||s(this.prototype),a(m,"constructor",{value:d,writable:!0,configurable:!0}),l(d,this),arguments.length&&this.inject.apply(d,arguments),d.base=b,d}}).inject({enumerable:!1,initialize:c,set:c,inject:function(){for(var d=0,m=arguments.length;d<m;d++){var p=arguments[d];p&&l(this,p,p.enumerable,p.beans,p.preserve)}return this},extend:function(){var d=s(this);return d.inject.apply(d,arguments)},each:function(d,m){return t(this,d,m)},clone:function(){return new this.constructor(this)},statics:{set:u,each:t,create:s,define:a,describe:r,clone:function(d){return u(new d.constructor,d)},isPlainObject:function(d){return(d=null!=d&&d.constructor)&&(d===Object||d===c||"Object"===d.name)},pick:function(d,m){return d!==K?d:m},slice:function(d,m,p){return i.call(d,m,p)}}})};"undefined"!=typeof module&&(module.exports=C),C.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+C.each(this,function(t,e){/^_/.test(e)||this.push(e+": "+("number"==(e=typeof t)?Wt.instance.number(t):"string"==e?"'"+t+"'":t))},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return C.importJSON(t,this)},exportJSON:function(t){return C.exportJSON(this,t)},toJSON:function(){return C.serialize(this)},set:function(t,e){return t&&C.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),n=e.prototype._class;return n&&!C.exports[n]&&(C.exports[n]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){if((n=t.length)!==e.length)return!1;for(;n--;)if(!C.equals(t[n],e[n]))return!1}else{var n,i=Object.keys(t);if((n=i.length)!==Object.keys(e).length)return!1;for(;n--;){var s=i[n];if(!e.hasOwnProperty(s)||!C.equals(t[s],e[s]))return!1}}return!0}return!1},read:function(t,e,n,i){if(this===C){var o=this.peek(t,e);return t.__index++,o}var s=this.prototype,r=s._readIndex,a=e||r&&t.__index||0;return o=t.length,i=i||o-a,(e=t[a])instanceof this||n&&n.readNull&&null==e&&i<=1?(r&&(t.__index=a+1),e&&n&&n.clone?e.clone():e):(e=C.create(s),r&&(e.__read=!0),e=e.initialize.apply(e,0<a||a+i<o?C.slice(t,a,a+i):t)||e,r&&(t.__index=a+e.__read,(a=e.__filtered)&&(t.__filtered=a,e.__filtered=K),e.__read=K),e)},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,n,i){for(var s,r=[],a=(e=e||0,i?e+i:t.length),o=e;o<a;o++)r.push(Array.isArray(s=t[o])?this.read(s,0,n):this.read(t,o,n,1));return r},readNamed:function(t,e,n,i,s){var r,a,o=this.getNamed(t,e),u=o!==K;return u&&((a=t.__filtered)||(r=this.getSource(t),(a=t.__filtered=C.create(r)).__unfiltered=r),a[e]=K),this.read(u?[o]:t,n,i,s)},readSupported:function(t,e){var n=this.getSource(t),i=this,s=!1;return n&&Object.keys(n).forEach(function(r){var a;r in e&&((a=i.readNamed(t,r))!==K&&(e[r]=a),s=!0)}),s},getSource:function(t){var e,n=t.__source;return n===K&&(n=t.__source=(e=1===t.length&&t[0])&&C.isPlainObject(e)?e:null),n},getNamed:function(t,e){var n=this.getSource(t);if(n)return e?n[e]:t.__filtered||n},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,e,n,i){var s;function r(c){var d;n&&c in n||s&&c in s||(d=e[c])!==K&&(t[c]=d)}if(i){for(var a,o={},u=0,l=i.length;u<l;u++)(a=i[u])in e&&(r(a),o[a]=!0);s=o}return Object.keys(e.__unfiltered||e).forEach(r),t},isPlainValue:function(t,e){return C.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,n,i){e=e||{};var s=!i;if(s&&(e.formatter=new Wt(e.precision),i={length:0,definitions:{},references:{},add:function(d,m){var p="#"+d._id,b=this.references[p];return b||(this.length++,m=m.call(d),(d=d._class)&&m[0]!==d&&m.unshift(d),this.definitions[p]=m,b=this.references[p]=[p]),b}}),t&&t._serialize){var r=t._serialize(e,i),a=t._class;!a||t._compactSerialize||!s&&n||r[0]===a||r.unshift(a)}else if(Array.isArray(t)){r=[];for(var o=0,u=t.length;o<u;o++)r[o]=C.serialize(t[o],e,n,i)}else if(C.isPlainObject(t)){r={};var l=Object.keys(t);for(o=0,u=l.length;o<u;o++){var c=l[o];r[c]=C.serialize(t[c],e,n,i)}}else r="number"==typeof t?e.formatter.number(t,e.precision):t;return s&&0<i.length?[["dictionary",i.definitions],r]:r},deserialize:function(t,e,n,i,s){var r=t,a=!n,o=a&&t&&t.length&&"dictionary"===t[0][0];if(n=n||{},Array.isArray(t)){var u=t[0],l="dictionary"===u;if(1==t.length&&/^#/.test(u))return n.dictionary[u];r=[];for(var c,d=(u=C.exports[u])?1:0,m=t.length;d<m;d++)r.push(C.deserialize(t[d],e,n,l,o));u&&(c=r,r=e?e(u,c,a||s):new u(c))}else if(C.isPlainObject(t))for(var p in r={},i&&(n.dictionary=r),t)r[p]=C.deserialize(t[p],e,n);return o?r[1]:r},exportJSON:function(t,e){return t=C.serialize(t,e),e&&0==e.asString?t:JSON.stringify(t)},importJSON:function(t,e){return C.deserialize("string"==typeof t?JSON.parse(t):t,function(n,i,s){var r=s&&e&&e.constructor===n,a=r?e:C.create(n.prototype);return!(1===i.length&&a instanceof pt)||!r&&a instanceof pn||C.isPlainObject(s=i[0])&&(s.insert=!1,r&&(i=i.concat([{insert:!0}]))),(r?a.set:n).apply(a,i),r&&(e=null),a})},push:function(t,e){var n=e.length;if(n<4096)t.push.apply(t,e);else{var i=t.length;t.length+=n;for(var s=0;s<n;s++)t[i+s]=e[s]}return t},splice:function(t,e,n,i){var s=e&&e.length,r=n===K;(n=r?t.length:n)>t.length&&(n=t.length);for(var a=0;a<s;a++)e[a]._index=n+a;if(r)return C.push(t,e),[];i=[n,i],e&&C.push(i,e);for(var o=t.splice.apply(t,i),u=(a=0,o.length);a<u;a++)o[a]._index=K;for(a=n+s,u=t.length;a<u;a++)t[a]._index=a;return o},capitalize:function(t){return t.replace(/\b[a-z]/g,function(e){return e.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(e,n){return n.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var un={on:function(t,e){var n,i;return"string"!=typeof t?C.each(t,function(s,r){this.on(r,s)},this):(n=(i=this._eventTypes)&&i[t],-1===(i=(i=this._callbacks=this._callbacks||{})[t]=i[t]||[]).indexOf(e)&&(i.push(e),n&&n.install&&1===i.length&&n.install.call(this,t))),this},off:function(t,e){if("string"==typeof t){var n,i,s=(i=this._eventTypes)&&i[t];return(i=this._callbacks&&this._callbacks[t])&&(!e||-1!==(n=i.indexOf(e))&&1===i.length?(s&&s.uninstall&&s.uninstall.call(this,t),delete this._callbacks[t]):-1!==n&&i.splice(n,1)),this}C.each(t,function(r,a){this.off(a,r)},this)},once:function(t,e){return this.on(t,function n(){e.apply(this,arguments),this.off(t,n)})},emit:function(t,e){if(!(s=this._callbacks&&this._callbacks[t]))return!1;var n=C.slice(arguments,1),i=e&&e.target&&!e.currentTarget,s=s.slice();i&&(e.currentTarget=this);for(var r=0,a=s.length;r<a;r++)if(0==s[r].apply(this,n)){e&&e.stop&&e.stop();break}return i&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e,n=this._eventTypes,i=this._callbacks,s=t?"install":"uninstall";if(n)for(var r in i)0<i[r].length&&(e=(e=n[r])&&e[s])&&e.call(this,r)},statics:{inject:function t(e){var n,i=e._events;return i&&(n={},C.each(i,function(s,r){var a="string"==typeof s,o=a?s:r,u=(r=C.capitalize(o),o.substring(2).toLowerCase());n[u]=a?{}:s,o="_"+o,e["get"+r]=function(){return this[o]},e["set"+r]=function(l){var c=this[o];c&&this.off(u,c),l&&this.on(u,l),this[o]=l}}),e._eventTypes=n),t.base.apply(this,arguments)}}},$t=C.extend({_class:"PaperScope",initialize:function t(){(mt=this).settings=new C({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var e,n,i,s=t.prototype;this.support||(n=Ht.getContext(1,1)||{},s.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:$n.nativeModes},Ht.release(n)),this.agent||(e=Nt.navigator.userAgent.toLowerCase(),n=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(e)||[])[0],i=s.agent=s.browser={platform:n="darwin"===n?"mac":n},n&&(i[n]=!0),e.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(r,a,o,u,l){i.chrome||(o="opera"===a?u:/^(node|trident)$/.test(a)?l:o,i.version=o,i.versionNumber=parseFloat(o),i.name=a={trident:"msie",jsdom:"node"}[a]||a,i[a]=!0)}),i.chrome&&delete i.webkit,i.atom&&delete i.chrome)},version:"0.12.15",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){return e=mt.PaperScript.execute(t,this,e),Ot.updateFocus(),e},install:function(t){var e,n=this;for(e in C.each(["project","view","tool"],function(i){C.define(t,i,{configurable:!0,get:function(){return n[i]}})}),this)!/^_/.test(e)&&this[e]&&(t[e]=this[e])},setup:function(t){return(mt=this).project=new Le(t),this},createCanvas:function(t,e){return Ht.getCanvas(t,e)},activate:function(){mt=this},clear:function(){for(var t=this.projects,e=this.tools,n=t.length-1;0<=n;n--)t[n].remove();for(n=e.length-1;0<=n;n--)e[n].remove()},remove:function(){this.clear(),delete $t._scopes[this._id]},statics:new function(){function t(e){return e+="Attribute",function(n,i){return n[e](i)||n[e]("data-paper-"+i)}}return{_scopes:{},_id:0,get:function(e){return this._scopes[e]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),_n=C.extend(un,{initialize:function(t){this._scope=mt,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),(this._scope[this._reference]=this).emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(C.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),!(this._scope=null))},getView:function(){return this._scope.getView()}}),Pe={findItemBoundsCollisions:function(t,e,n){function i(r){for(var a=new Array(r.length),o=0;o<r.length;o++){var u=r[o].getBounds();a[o]=[u.left,u.top,u.right,u.bottom]}return a}var s=i(t);return e=e&&e!==t?i(e):s,this.findBoundsCollisions(s,e,n||0)},findCurveBoundsCollisions:function(t,e,n,i){function s(d){for(var m=Math.min,p=Math.max,b=new Array(d.length),g=0;g<d.length;g++){var v=d[g];b[g]=[m(v[0],v[2],v[4],v[6]),m(v[1],v[3],v[5],v[7]),p(v[0],v[2],v[4],v[6]),p(v[1],v[3],v[5],v[7])]}return b}var r=s(t);if(e=e&&e!==t?s(e):r,i){for(var a=this.findBoundsCollisions(r,e,n||0,!1,!0),o=this.findBoundsCollisions(r,e,n||0,!0,!0),u=[],l=0,c=a.length;l<c;l++)u[l]={hor:a[l],ver:o[l]};return u}return this.findBoundsCollisions(r,e,n||0)},findBoundsCollisions:function(t,e,n,i,s){var r=!e||t===e,a=r?t:t.concat(e),o=t.length,u=a.length;function l(U,W,G){for(var X=0,Q=U.length;X<Q;){var et=Q+X>>>1;a[U[et]][W]<G?X=1+et:Q=et}return X-1}for(var c=i?1:0,d=2+c,m=i?0:1,p=2+m,b=new Array(u),g=0;g<u;g++)b[g]=g;b.sort(function(U,W){return a[U][c]-a[W][c]});var v=[],f=new Array(o);for(g=0;g<u;g++){var y=b[g],x=a[y],A=r?y:y-o,I=y<o,w=r||!I,N=I?[]:null;if(v.length){var B=l(v,d,x[c]-n)+1;if(v.splice(0,B),r&&s){N=N.concat(v);for(var D=0;D<v.length;D++)f[T=v[D]].push(A)}else{var F=x[p],L=x[m];for(D=0;D<v.length;D++){var T=v[D],P=a[T],q=T<o,O=r||o<=T;(s||(I&&O||w&&q)&&F>=P[m]-n&&L<=P[p]+n)&&(I&&O&&N.push(r?T:T-o),w&&q&&f[T].push(A))}}}I&&(t===e&&N.push(y),f[y]=N),v.length?(x=l(v,d,x[d]),v.splice(x+1,0,y)):v.push(y)}for(g=0;g<f.length;g++){var R=f[g];R&&R.sort(function(U,W){return U-W})}return f}},Wt=C.extend({initialize:function(t){this.precision=C.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,n){return this.number(t)+(n||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});Wt.instance=new Wt;var ct=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,i=Math.sqrt,s=Math.pow,r=Math.log2||function(d){return Math.log(d)*Math.LOG2E},a=1e-12,o=112e-18;function u(d,m,p){return d<m?m:p<d?p:d}function l(d,m,p){function b(x){var A;return[A=x-(A=134217729*x)+A,x-A]}var g,v,f=m*m-d*p,y=m*m+d*p;return 3*n(f)<y&&(g=b(d),v=b(m),y=b(p),f=(m*=m)-(p*=d)+(v[0]*v[0]-m+2*v[0]*v[1]+v[1]*v[1]-(g[0]*y[0]-p+g[0]*y[1]+g[1]*y[0]+g[1]*y[1]))),f}function c(){var d=Math.max.apply(Math,arguments);return d&&(d<1e-8||1e8<d)?s(2,-Math.round(r(d))):0}return{EPSILON:a,MACHINE_EPSILON:o,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(i(2)-1)/3,isZero:function(d){return-a<=d&&d<=a},isMachineZero:function(d){return-o<=d&&d<=o},clamp:u,integrate:function(d,m,p,b){for(var g=t[b-2],v=e[b-2],f=.5*(p-m),y=f+m,x=0,A=b+1>>1,I=1&b?v[x++]*d(y):0;x<A;){var w=f*g[x];I+=v[x++]*(d(y+w)+d(y-w))}return f*I},findRoot:function(d,m,p,b,g,v,f){for(var y=0;y<v;y++){var x=d(p),A=x/m(p),I=p-A;if(n(A)<f){p=I;break}p=0<x?(g=p,I<=b?.5*(b+g):I):(b=p,g<=I?.5*(b+g):I)}return u(p,b,g)},solveQuadratic:function(d,m,p,b,g,v){var f,y=1/0;if(n(d)<a){if(n(m)<a)return n(p)<a?-1:0;f=-p/m}else{var x,A=l(d,m*=-.5,p);A&&n(A)<o&&(x=c(n(d),n(m),n(p)))&&(A=l(d*=x,m*=x,p*=x)),-o<=A&&(I=A<0?0:i(A),y=0===(w=m+(m<0?-I:I))?-(f=p/d):(f=w/d,p/w))}var I=0,w=(d=null==g,p=g-a,v+a);return isFinite(f)&&(d||p<f&&f<w)&&(b[I++]=d?f:u(f,g,v)),y!==f&&isFinite(y)&&(d||p<y&&y<w)&&(b[I++]=d?y:u(y,g,v)),I},solveCubic:function(d,m,p,b,g,v,f){var y,x,A,I,w,N=c(n(d),n(m),n(p),n(b));function B(P){P=d*(y=P),I=(P+(x=P+m))*y+(A=x*y+p),w=A*y+b}if(N&&(d*=N,m*=N,p*=N,b*=N),n(d)<a)d=m,x=p,A=b,y=1/0;else if(n(b)<a)x=m,A=p,y=0;else{B(-m/d/3);var F=s(n(D=w/d),1/3),L=D<0?-1:1,D=0<(D=-I/d)?1.324717957244746*Math.max(F,i(D)):F,T=y-L*D;if(T!==y){for(;B(T),L*y<L*(T=0===I?y:y-w/I/(1+o)););n(d)*y*y>n(b/y)&&(x=((A=-b/y)-p)/y)}}return F=ct.solveQuadratic(d,x,A,g,v,f),D=null==v,isFinite(y)&&(0===F||0<F&&y!==g[0]&&y!==g[1])&&(D||v-a<y&&y<f+a)&&(g[F++]=D?y:u(y,v,f)),F}}},Ze={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return(e=e||(this._pools[t]={_id:1}))._id++}return this._id++}},M=C.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var n,i=typeof t,s=this.__read,r=0;return"number"==i?(this._set(t,(n="number"==typeof e)?e:t),s&&(r=n?2:1)):"undefined"==i||null===t?(this._set(0,0),s&&(r=null===t?1:0)):(t="string"==i?t.split(/[\s,]+/)||[]:t,r=1,Array.isArray(t)?this._set(+t[0],+(1<t.length?t[1]:t[0])):"x"in t?this._set(t.x||0,t.y||0):"width"in t?this._set(t.width||0,t.height||0):"angle"in t?(this._set(t.length||0,0),this.setAngle(t.angle||0)):(this._set(0,0),r=0)),s&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new M(this.x,this.y)},toString:function(){var t=Wt.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){return[(t=t.formatter).number(this.x),t.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){var e;this.isZero()?(e=this._angle||0,this._set(Math.cos(e)*t,Math.sin(e)*t)):(t/=this.getLength(),ct.isZero(t)&&this.getAngle(),this._set(this.x*t,this.y*t))},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=M.read(arguments),e=this.getLength()*t.getLength();return ct.isZero(e)?NaN:(e=this.dot(t)/e,Math.acos(e<-1?-1:1<e?1:e))}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){var e;this._angle=t,this.isZero()||(e=this.getLength(),this._set(Math.cos(t)*e,Math.sin(t)*e))},getQuadrant:function(){return 0<=this.x?0<=this.y?1:4:0<=this.y?2:3}},{beans:!1,getDirectedAngle:function(){var t=M.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=arguments,n=(e=M.read(t)).x-this.x,e=n*n+(e=e.y-this.y)*e;return C.read(t)?e:Math.sqrt(e)},normalize:function(t){t===K&&(t=1);var e=this.getLength();return e=new M(this.x*(t=0!==e?t/e:0),this.y*t),0<=t&&(e._angle=this._angle),e},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var n=e?this.subtract(e):this,i=Math.sin(t);return t=Math.cos(t),n=new M(n.x*t-n.y*i,n.x*i+n.y*t),e?n.add(e):n},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=M.read(arguments);return new M(this.x+t.x,this.y+t.y)},subtract:function(){var t=M.read(arguments);return new M(this.x-t.x,this.y-t.y)},multiply:function(){var t=M.read(arguments);return new M(this.x*t.x,this.y*t.y)},divide:function(){var t=M.read(arguments);return new M(this.x/t.x,this.y/t.y)},modulo:function(){var t=M.read(arguments);return new M(this.x%t.x,this.y%t.y)},negate:function(){return new M(-this.x,-this.y)},isInside:function(){return rt.read(arguments).contains(this)},isClose:function(){var e=M.read(t=arguments),t=C.read(t);return this.getDistance(e)<=t},isCollinear:function(){var t=M.read(arguments);return M.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=M.read(arguments);return M.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=ct.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return 0<=this.x*(1<t&&t<4?-1:1)&&0<=this.y*(2<t?-1:1)},dot:function(){var t=M.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=M.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=M.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new M(t.x*e,t.y*e)},statics:{min:function(){var e=M.read(t=arguments),t=M.read(t);return new M(Math.min(e.x,t.x),Math.min(e.y,t.y))},max:function(){var e=M.read(t=arguments),t=M.read(t);return new M(Math.max(e.x,t.x),Math.max(e.y,t.y))},random:function(){return new M(Math.random(),Math.random())},isCollinear:function(t,e,n,i){return Math.abs(t*i-e*n)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))},isOrthogonal:function(t,e,n,i){return Math.abs(t*n+e*i)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))}}},C.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new M(e(this.x),e(this.y))}},{})),qe=M.extend({initialize:function(t,e,n,i){this._x=t,this._y=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._x=t,this._y=e,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),it=C.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var n,i=typeof t,s=this.__read,r=0;return"number"==i?(this._set(t,(n="number"==typeof e)?e:t),s&&(r=n?2:1)):"undefined"==i||null===t?(this._set(0,0),s&&(r=null===t?1:0)):(t="string"==i?t.split(/[\s,]+/)||[]:t,r=1,Array.isArray(t)?this._set(+t[0],+(1<t.length?t[1]:t[0])):"width"in t?this._set(t.width||0,t.height||0):"x"in t?this._set(t.x||0,t.y||0):(this._set(0,0),r=0)),s&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new it(this.width,this.height)},toString:function(){var t=Wt.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){return[(t=t.formatter).number(this.width),t.number(this.height)]},add:function(){var t=it.read(arguments);return new it(this.width+t.width,this.height+t.height)},subtract:function(){var t=it.read(arguments);return new it(this.width-t.width,this.height-t.height)},multiply:function(){var t=it.read(arguments);return new it(this.width*t.width,this.height*t.height)},divide:function(){var t=it.read(arguments);return new it(this.width/t.width,this.height/t.height)},modulo:function(){var t=it.read(arguments);return new it(this.width%t.width,this.height%t.height)},negate:function(){return new it(-this.width,-this.height)},isZero:function(){var t=ct.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new it(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new it(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new it(Math.random(),Math.random())}}},C.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new it(e(this.width),e(this.height))}},{})),Me=it.extend({initialize:function(t,e,n,i){this._width=t,this._height=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._width=t,this._height=e,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),rt=C.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,e,n,i){var s,r,a,o,u,l,c=arguments,d=typeof t;return"number"==d?(this._set(t,e,n,i),s=4):"undefined"==d||null===t?(this._set(0,0,0,0),s=null===t?1:0):1===c.length&&(Array.isArray(t)?(this._set.apply(this,t),s=1):t.x!==K||t.width!==K?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),s=1):t.from===K&&t.to===K&&(this._set(0,0,0,0),C.readSupported(c,this)&&(s=1))),s===K&&(a=M.readNamed(c,"from"),r=C.peek(c),d=a.x,a=a.y,r&&r.x!==K||C.hasNamed(c,"to")?((o=(l=M.readNamed(c,"to")).x-d)<0&&(d=l.x,o=-o),(u=l.y-a)<0&&(a=l.y,u=-u)):(o=(l=it.read(c)).width,u=l.height),this._set(d,a,o,u),s=c.__index),(c=c.__filtered)&&(this.__filtered=c),this.__read&&(this.__read=s),this},set:"#initialize",_set:function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},clone:function(){return new rt(this.x,this.y,this.width,this.height)},equals:function(t){var e=C.isPlainValue(t)?rt.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=Wt.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){return[(t=t.formatter).number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)]},getPoint:function(t){return new(t?M:qe)(this.x,this.y,this,"setPoint")},setPoint:function(){var t=M.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?it:Me)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=it.read(arguments),e=this._sx,n=this._sy,i=t.width;t=t.height,e&&(this.x+=(this.width-i)*e),n&&(this.y+=(this.height-t)*n),this.width=i,this.height=t,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){var e;this._fw||(e=t-this.x,this.width-=.5===this._sx?2*e:e),this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){var e;this._fh||(e=t-this.y,this.height-=.5===this._sy?2*e:e),this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){var e;this._fw||(e=t-this.x,this.width=.5===this._sx?2*e:e),this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){var e;this._fh||(e=t-this.y,this.height=.5===this._sy?2*e:e),this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||.5===this._sx?this.x=t-this.width/2:(this._sx&&(this.x+=2*(t-this.x)*this._sx),this.width=2*(t-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||.5===this._sy?this.y=t-this.height/2:(this._sy&&(this.y+=2*(t-this.y)*this._sy),this.height=2*(t-this.y)),this._sy=.5,this._fh=0},getCenter:function(t){return new(t?M:qe)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=M.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==K||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(rt.read(arguments)):this._containsPoint(M.read(arguments))},_containsPoint:function(t){var e=t.x;return t=t.y,e>=this.x&&t>=this.y&&e<=this.x+this.width&&t<=this.y+this.height},_containsRectangle:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e+t.width<=this.x+this.width&&n+t.height<=this.y+this.height},intersects:function(){var t=rt.read(arguments),e=C.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=rt.read(arguments),e=Math.max(this.x,t.x),n=Math.max(this.y,t.y),i=Math.min(this.x+this.width,t.x+t.width);return t=Math.min(this.y+this.height,t.y+t.height),new rt(e,n,i-e,t-n)},unite:function(){var t=rt.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x+t.width);return t=Math.max(this.y+this.height,t.y+t.height),new rt(e,n,i-e,t-n)},include:function(){var t=M.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x);return t=Math.max(this.y+this.height,t.y),new rt(e,n,i-e,t-n)},expand:function(){var t,e=(t=it.read(arguments)).width;return new rt(this.x-e/2,this.y-(t=t.height)/2,this.width+e,this.height+t)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(e===K?t:e)-this.height)}},C.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){var n=t.join(""),i=/^[RL]/.test(n);4<=e&&(t[1]+=i?"Y":"X");var s="get"+(e=t[i?0:1]),r="get"+(i=t[i?1:0]),a="set"+e,o="set"+i,u="set"+n;this["get"+n]=function(l){return new(l?M:qe)(this[s](),this[r](),this,u)},this[u]=function(){var l=M.read(arguments);this[a](l.x),this[o](l.y)}},{beans:!0})),Vn=rt.extend({initialize:function(t,e,n,i,s,r){this._set(t,e,n,i,!0),this._owner=s,this._setter=r},_set:function(t,e,n,i,s){return this._x=t,this._y=e,this._width=n,this._height=i,s||this._owner[this._setter](this),this}},new function(){var t=rt.prototype;return C.each(["x","y","width","height"],function(e){var n=C.capitalize(e),i="_"+e;this["get"+n]=function(){return this[i]},this["set"+n]=function(s){this[i]=s,this._dontNotify||this._owner[this._setter](this)}},C.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var n="set"+e;this[n]=function(){this._dontNotify=!0,t[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(e){var n=this._owner;n._changeSelection&&n._changeSelection(2,e)}}))}),gt=C.extend({_class:"Matrix",initialize:function t(e,n){var i=arguments,s=i.length,r=!0;if(6<=s?this._set.apply(this,i):1===s||2===s?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,n):Array.isArray(e)?this._set.apply(this,n?e.concat([n]):e):r=!1:s?r=!1:this.reset(),!r)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,n,i,s,r,a){return this._a=t,this._b=e,this._c=n,this._d=i,this._tx=s,this._ty=r,a||this._changed(),this},_serialize:function(t,e){return C.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(25))},clone:function(){return new gt(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=Wt.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var n=this._owner;return!!n&&(n.transform(null,C.pick(t,!0),e),this.isIdentity())},translate:function(){var t,e=(t=M.read(arguments)).x;return this._tx+=e*this._a+(t=t.y)*this._c,this._ty+=e*this._b+t*this._d,this._changed(),this},scale:function(){var t,e=M.read(t=arguments);return(t=M.read(t,0,{readNull:!0}))&&this.translate(t),this._a*=e.x,this._b*=e.x,this._c*=e.y,this._d*=e.y,t&&this.translate(t.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var n=(e=M.read(arguments,1)).x,i=e.y,s=Math.cos(t),r=Math.sin(t),a=n-n*s+i*r,o=i-n*r-i*s,u=this._a,e=this._b;return i=this._d,this._a=s*u+r*(n=this._c),this._b=s*e+r*i,this._c=-r*u+s*n,this._d=-r*e+s*i,this._tx+=a*u+o*n,this._ty+=a*e+o*i,this._changed(),this},shear:function(){var e=M.read(t=arguments),n=M.read(t,0,{readNull:!0});n&&this.translate(n);var i=this._a,t=this._b;return this._a+=e.y*this._c,this._b+=e.y*this._d,this._c+=e.x*i,this._d+=e.x*t,n&&this.translate(n.negate()),this._changed(),this},skew:function(){var e=M.read(t=arguments),n=M.read(t,0,{readNull:!0}),t=Math.PI/180;return t=new M(Math.tan(e.x*t),Math.tan(e.y*t)),this.shear(t,n)},append:function(t,e){var n,i,s,r,a,o,u,l,c;return t&&(i=this._b,r=this._d,a=t._a,o=t._c,u=t._b,l=t._d,c=t._tx,t=t._ty,this._a=a*(n=this._a)+u*(s=this._c),this._c=o*n+l*s,this._b=a*i+u*r,this._d=o*i+l*r,this._tx+=c*n+t*s,this._ty+=c*i+t*r,e||this._changed()),this},prepend:function(t,e){var n,i,s,r,a,o,u,l,c,d,m;return t&&(s=this._c,r=this._d,a=this._tx,o=this._ty,u=t._a,l=t._c,c=t._b,d=t._d,m=t._tx,t=t._ty,this._a=u*(n=this._a)+l*(i=this._b),this._c=u*s+l*r,this._b=c*n+d*i,this._d=c*s+d*r,this._tx=u*a+l*o+m,this._ty=c*a+d*o+t,e||this._changed()),this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,n=this._c,i=this._d,s=this._tx,r=this._ty,a=t*i-e*n,o=null;return a&&!isNaN(a)&&isFinite(s)&&isFinite(r)&&(this._a=i/a,this._b=-e/a,this._c=-n/a,this._d=t/a,this._tx=(n*r-i*s)/a,this._ty=(e*s-t*r)/a,o=this),o},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new gt(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,n){return arguments.length<3?this._transformPoint(M.read(arguments)):this._transformCoordinates(t,e,n)},_transformPoint:function(t,e,n){var i=t.x;return t=t.y,(e=e||new M)._set(i*this._a+t*this._c+this._tx,i*this._b+t*this._d+this._ty,n)},_transformCoordinates:function(t,e,n){for(var i=0,s=2*n;i<s;i+=2){var r=t[i],a=t[i+1];e[i]=r*this._a+a*this._c+this._tx,e[i+1]=r*this._b+a*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,n=t.y,i=e+t.width;return this._transformCoordinates(t=[e,n,i,n,i,t=n+t.height,e,t],t,4)},_transformBounds:function(t,e,n){for(var i=this._transformCorners(t),s=i.slice(0,2),r=s.slice(),a=2;a<8;a++){var o=i[a],u=1&a;o<s[u]?s[u]=o:o>r[u]&&(r[u]=o)}return(e=e||new rt)._set(s[0],s[1],r[0]-s[0],r[1]-s[1],n)},inverseTransform:function(){return this._inverseTransform(M.read(arguments))},_inverseTransform:function(t,e,n){var i=this._a,s=this._b,r=this._c,a=this._d,o=this._tx,u=this._ty,l=i*a-s*r,c=null;return l&&!isNaN(l)&&isFinite(o)&&isFinite(u)&&(u=t.x-this._tx,t=t.y-this._ty,c=(e=e||new M)._set((u*a-t*r)/l,(t*i-u*s)/l,n)),c},decompose:function(){var t,e,n,i,s=this._a,r=this._b,a=this._c,o=this._d,u=s*o-r*a,l=Math.sqrt,c=Math.atan2,d=180/Math.PI;return i=0!==s||0!==r?(t=l(s*s+r*r),e=Math.acos(s/t)*(0<r?1:-1),n=[t,u/t],[c(s*a+r*o,t*t),0]):0!==a||0!==o?(i=l(a*a+o*o),e=Math.asin(a/i)*(0<o?1:-1),n=[u/i,i],[0,c(s*a+r*o,i*i)]):n=[e=0,0],{translation:this.getTranslation(),rotation:e*d,scaling:new M(n),skewing:new M(i[0]*d,i[1]*d)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new M(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},C.each(["a","b","c","d","tx","ty"],function(t){var e=C.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(i){this[n]=i,this._changed()}},{})),Pt=C.extend({_class:"Line",initialize:function(t,e,n,i,s){(4<=arguments.length?(this._px=t,this._py=e,this._vx=n,this._vy=i,s):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,n))||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new M(this._px,this._py)},getVector:function(){return new M(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return Pt.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return Pt.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return Pt.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return M.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return M.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,n,i,s,r,a,o,u,l){if(u||(n-=t,i-=e,a-=s,o-=r),!ct.isMachineZero(u=n*o-i*a)&&(o=(a*(r=e-r)-o*(s=t-s))/u,u=(n*r-i*s)/u,l||-1e-12<o&&o<1+1e-12&&-1e-12<u&&u<1+1e-12))return new M(t+(o=l?o:o<=0?0:1<=o?1:o)*n,e+o*i)},getSide:function(t,e,n,i,s,r,a,o){return a||(n-=t,i-=e),e=(t=s-t)*i-(r-e)*n,(e=!o&&ct.isMachineZero(e)&&0<=(e=(t*n+t*n)/(n*n+i*i))&&e<=1?0:e)<0?-1:0<e?1:0},getSignedDistance:function(t,e,n,i,s,r,a){return a||(n-=t,i-=e),0===n?0<i?s-t:t-s:0===i?n<0?r-e:e-r:((s-t)*i-(r-e)*n)/(n<i?i*Math.sqrt(1+n*n/(i*i)):n*Math.sqrt(1+i*i/(n*n)))},getDistance:function(t,e,n,i,s,r,a){return Math.abs(Pt.getSignedDistance(t,e,n,i,s,r,a))}}}),Le=_n.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){_n.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Je(null,null,this),this._view=Ot.create(this,t||Ht.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return C.serialize(this._children,t,!0,e)},_changed:function(t,e){1&t&&(s=this._view)&&(s._needsUpdate=!0,!s._requested&&s._autoUpdate&&s.requestUpdate());var n,i,s,r=this._changes;r&&e&&((s=(n=this._changesById)[i=e._id])?s.flags|=t:r.push(n[i]={item:e,flags:t}))},clear:function(){for(var t=this._children,e=t.length-1;0<=e;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new pn({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:vn,match:function(n){var i=n._definition;return e[n=i._id]||(e[n]=!0,t.push(i)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t,e=this._selectionItems,n=[];for(t in e){var i=e[t],s=i._selection;1&s&&i.isInserted()?n.push(i):s||this._updateSelection(i)}return n},_updateSelection:function(t){var e=t._id,n=this._selectionItems;t._selection?n[e]!==t&&(this._selectionCount++,n[e]=t):n[e]===t&&(this._selectionCount--,delete n[e])},selectAll:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t,e=this._selectionItems;for(t in e)e[t].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(K,t)},insertLayer:function(t,e){return e instanceof pn?(e._remove(!1,!0),C.splice(this._children,[e],t,0),e._setProject(this,!0),(t=e._name)&&e.setName(t),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)):e=null,e},_insertItem:function(t,e,n){return e=this.insertLayer(t,e)||(this._activeLayer||this._insertItem(K,new pn(pt.NO_INSERT),!0)).insertChild(t,e),n&&e.activate&&e.activate(),e},getItems:function(t){return pt._getItems(this,t)},getItem:function(t){return pt._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return C.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var n=e[t];if(n){for(var i in n){var s,r=n[i];for(s in e){var a=e[s];a&&a!=n&&delete a[r._id]}r.remove()}e[t]=null}}},draw:function(t,e,n){this._updateVersion++,t.save(),e.applyToContext(t);for(var i=this._children,s=new C({offset:new M(0,0),pixelRatio:n,viewMatrix:e.isIdentity()?null:e,matrices:[new gt],updateMatrix:!0}),r=0,a=i.length;r<a;r++)i[r].draw(t,s);if(t.restore(),0<this._selectionCount){t.save(),t.strokeWidth=1;var o,u=this._selectionItems,l=this._scope.settings.handleSize,c=this._updateVersion;for(o in u)u[o]._drawSelection(t,e,l,u,c);t.restore()}}}),pt=C.extend(un,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=C.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new gt,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return C.each(t,function(e){this._events[e]={install:function(n){this.getView()._countItemEvent(n,1)},uninstall:function(n){this.getView()._countItemEvent(n,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,e){var n=t&&C.isPlainObject(t),i=n&&!0===t.internal,s=this._matrix=new gt,r=n&&t.project||mt.project,a=mt.settings;return this._id=i?null:Ze.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&a.applyMatrix,e&&s.translate(e),(s._owner=this)._style=new Je(r._currentStyle,this,r),i||n&&0==t.insert||!a.insertItems&&(!n||!0!==t.insert)?this._setProject(r):(n&&t.parent||r)._insertItem(K,this,!0),n&&t!==pt.NO_INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(t,e){var n={},i=this;function s(r){for(var a in r){var o=i[a];C.equals(o,"leading"===a?1.2*r.fontSize:r[a])||(n[a]=C.serialize(o,t,"data"!==a,e))}}return s(this._serializeFields),this instanceof Ne||s(this._style._defaults),[this._class,n]},_changed:function(t){var e=this._symbol,n=this._parent||e,i=this._project;8&t&&(this._bounds=this._position=this._decomposed=K),16&t&&(this._globalMatrix=K),n&&72&t&&pt._clearBoundsCache(n),2&t&&pt._clearBoundsCache(this),i&&i._changed(t,this),e&&e._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var e,n=this._getOwner();t&&n&&(e=n._children,((n=n._namedChildren)[t]=n[t]||[]).push(this),t in e||(e[t]=this)),this._name=t||K,this._changed(256)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},C.each(["locked","visible","blendMode","opacity","guide"],function(t){var e=C.capitalize(t),n="_"+t,i={locked:256,visible:265};this["get"+e]=function(){return this[n]},this["set"+e]=function(s){s!=this[n]&&(this[n]=s,this._changed(i[t]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){t!==this._selection&&(this._selection=t,(t=this._project)&&(t._updateSelection(this),this._changed(257)))},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,n=t.length;e<n;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var n=0,i=t.length;n<i;n++)if(!t[n].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var n=0,i=e.length;n<i;n++)e[n].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&((this._clipMask=t)&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){return new(t?M:qe)((t=this._position||(this._position=this._getPositionFromBounds())).x,t.y,this,"setPosition")},setPosition:function(){this.translate(M.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(t){return this._pivot?this._matrix._transformPoint(this._pivot):(t||this.getBounds()).getCenter(!0)},getPivot:function(){var t=this._pivot;return t?new qe(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=M.read(arguments,0,{clone:!0,readNull:!0}),this._position=K}},C.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(t,e){this[e]=function(n){return this.getBounds(n,t)}},{beans:!0,getBounds:function(t,e){var n=e||t instanceof gt,i=C.set({},n?e:t,this._boundsOptions);return i.stroke&&!this.getStrokeScaling()||(i.cacheItem=this),i=this._getCachedBounds(n&&t,i).rect,arguments.length?i:new Vn(i.x,i.y,i.width,i.height,this,"setBounds")},setBounds:function(){var t=rt.read(arguments),e=this.getBounds(),n=this._matrix,i=new gt,s=t.getCenter();i.translate(s),t.width==e.width&&t.height==e.height||(n.isInvertible()||(n.set(n._backup||(new gt).translate(n.getTranslation())),e=this.getBounds()),i.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),s=e.getCenter(),i.translate(-s.x,-s.y),this.transform(i)},_getBounds:function(t,e){var n=this._children;return n&&n.length?(pt._updateBoundsCache(this,e.cacheItem),pt._getBounds(n,t,e)):new rt},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join("")},_getCachedBounds:function(t,e,n){t=t&&t._orNullIfIdentity();var o,i=e.internal&&!n,s=e.cacheItem,r=i?null:this._matrix._orNullIfIdentity(),a=s&&(!t||t.equals(r))&&this._getBoundsCacheKey(e,i);return n=this._bounds,pt._updateBoundsCache(this._parent||this._symbol,s),a&&n&&a in n?{rect:(o=n[a]).rect.clone(),nonscaling:o.nonscaling}:(r=(t=this._getBounds(t||r,e)).rect||t,e=this._style,e=t.nonscaling||e.hasStroke()&&!e.getStrokeScaling(),a&&(n||(this._bounds=n={}),o=n[a]={rect:r.clone(),nonscaling:e,internal:i}),{rect:r,nonscaling:e})},_getStrokeMatrix:function(t,e){return(t=(e=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item)?e.getViewMatrix().invert():t)&&t._shiftless()},statics:{_updateBoundsCache:function(t,e){var n;t&&e&&(n=e._id,(t=t._boundsCache=t._boundsCache||{ids:{},list:[]}).ids[n]||(t.list.push(e),t.ids[n]=e))},_clearBoundsCache:function(t){var e=t._boundsCache;if(e){t._bounds=t._position=t._boundsCache=K;for(var n=0,i=e.list,s=i.length;n<s;n++){var r=i[n];r!==t&&(r._bounds=r._position=K,r._boundsCache&&pt._clearBoundsCache(r))}}},_getBounds:function(t,e,n){var i=l=1/0,s=c=-l,r=!1;n=n||{};for(var a=0,o=t.length;a<o;a++){var u,l,c,d=t[a];d._visible&&!d.isEmpty(!0)&&(d=(u=d._getCachedBounds(e&&e.appended(d._matrix),n,!0)).rect,l=Math.min(d.x,l),i=Math.min(d.y,i),c=Math.max(d.x+d.width,c),s=Math.max(d.y+d.height,s),u.nonscaling&&(r=!0))}return{rect:isFinite(l)?new rt(l,i,c-l,s-i):new rt,nonscaling:r}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e,n=this.getRotation();null!=n&&null!=t&&(e=this._decomposed,this.rotate(t-n),e&&(e.rotation=t,this._decomposed=e))},getScaling:function(){var t=this._decompose();return new qe((t=t&&t.scaling)?t.x:1,t?t.y:1,this,"setScaling")},setScaling:function(){var t,e,n,i,s=this.getScaling(),r=M.read(arguments,0,{clone:!0,readNull:!0});s&&r&&!s.equals(r)&&(t=this.getRotation(),e=this._decomposed,n=new gt,(i=ct.isZero)(s.x)||i(s.y)?(n.translate(e.translation),t&&n.rotate(t),n.scale(r.x,r.y),this._matrix.set(n)):(i=this.getPosition(!0),n.translate(i),t&&n.rotate(t),n.scale(r.x/s.x,r.y/s.y),t&&n.rotate(-t),n.translate(i.negate()),this.transform(n)),e&&(e.scaling=r,this._decomposed=e))},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},getGlobalMatrix:function(t){if(i=this._globalMatrix)for(var e=this._parent,n=[];e;){if(!e._globalMatrix){for(var i=null,s=0,r=n.length;s<r;s++)n[s]._globalMatrix=null;break}n.push(e),e=e._parent}return i||(i=this._globalMatrix=this._matrix.clone(),(e=this._parent)&&i.prepend(e.getGlobalMatrix(!0))),t?i:i.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var n=this._children,i=0,s=n&&n.length;i<s;i++)n[i]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var n=this._children,i=0,s=n&&n.length;i<s;i++)n[i]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof pn)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return C.equals(this._children,t._children)},clone:function(t){var e=new this.constructor(pt.NO_INSERT),n=this._children,i=C.pick(t?t.insert:K,t===K||!0===t);t=C.pick(t?t.deep:K,!0),n&&e.copyAttributes(this),n&&!t||e.copyContent(this),n||e.copyAttributes(this),i&&e.insertAbove(this);var s=this._name;if(i=this._parent,s&&i){n=i._children;for(var r=s,a=1;n[s];)s=r+" "+a++;s!==r&&e.setName(s)}return e},copyContent:function(t){for(var e=t._children,n=0,i=e&&e.length;n<i;n++)this.addChild(e[n].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],i=0,s=n.length;i<s;i++){var r=n[i];t.hasOwnProperty(r)&&(this[r]=t[r])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var a=t._data;e=t._name,this._data=a?C.clone(a):null,e&&this.setName(e)},rasterize:function(t,e){var n,i;C.isPlainObject(t)?(a=t.resolution,n=t.insert,i=t.raster):(a=t,n=e),i?i.matrix.reset(!0):i=new mn(pt.NO_INSERT);var s=this.getStrokeBounds(),r=(a||this.getView().getResolution())/72,a=(t=s.getTopLeft().floor(),e=s.getBottomRight().ceil(),new it(e.subtract(t)));return s=a.multiply(r),i.setSize(s,!0),s.isZero()||(e=i.getContext(!0),s=(new gt).scale(r).translate(t.negate()),e.save(),s.applyToContext(e),this.draw(e,new C({matrices:[s]})),e.restore()),i.transform((new gt).translate(t.add(a.divide(2))).scale(1/r)),n!==K&&!n||i.insertAbove(this),i},contains:function(){var t=this._matrix;return t.isInvertible()&&!!this._contains(t._inverseTransform(M.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var n=e.length-1;0<=n;n--)if(e[n].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return rt.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new Ct.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof pt&&0<this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length}},new function(){function t(){var i=arguments;return this._hitTest(M.read(i),Ve.getOptions(i))}function e(){var i,s=M.read(i=arguments),r=Ve.getOptions(i);return this._hitTest(s,new C({all:i=[]},r)),i}function n(i,s,r,a){var o=this._children;if(o)for(var u=o.length-1;0<=u;u--){var l;if((l=(l=o[u])!==a&&l._hitTest(i,s,r))&&!s.all)return l}return null}return Le.inject({hitTest:t,hitTestAll:e,_hitTest:n}),{hitTest:t,hitTestAll:e,_hitTestChildren:n}},{_hitTest:function(t,e,n){if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var i=this._matrix,s=n?n.appended(i):this.getGlobalMatrix().prepend(this.getView()._matrix),r=Math.max(e.tolerance,1e-12),a=e._tolerancePadding=new it(Ct._getStrokePadding(r,i._shiftless().invert()));if(!(t=i._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(a.multiply(2))._containsPoint(t))return null;var o,u,l=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==C.hyphenate(this._class)||e.class&&!(this instanceof e.class)),c=e.match,d=this;function m(f){return(f=f&&c&&!c(f)?null:f)&&e.all&&e.all.push(f),f}function p(f,y){var x=y?o["get"+y]():d.getPosition();if(t.subtract(x).divide(a).length<=1)return new Ve(f,d,{name:y?C.hyphenate(y):f,point:x})}var b=e.position;if(n=e.center,r=e.bounds,l&&this._parent&&(b||n||r)){if((n||r)&&(o=this.getInternalBounds()),!(u=b&&p("position")||n&&p("center","Center"))&&r)for(var g=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],v=0;v<8&&!u;v++)u=p("bounds",g[v]);u=m(u)}return(u=u||this._hitTestChildren(t,e,s)||l&&m(this._hitTestSelf(t,e,s,this.getStrokeScaling()?null:s._shiftless().invert()))||null)&&u.point&&(u.point=i.transform(u.point)),u},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new Ve("fill",this)},matches:function(t,e){var n=typeof t;if("object"==n){for(var i in t)if(t.hasOwnProperty(i)&&!this.matches(i,t[i]))return!1;return!0}if("function"==n)return t(this);if("match"===t)return e(this);if(n=/^(empty|editable)$/.test(t)?this["is"+C.capitalize(t)]():"type"===t?C.hyphenate(this._class):this[t],"class"===t){if("function"==typeof e)return this instanceof e;n=this._class}if("function"==typeof e)return!!e(n);if(e){if(e.test)return e.test(n);if(C.isPlainObject(e))return function s(r,a){for(var o in r)if(r.hasOwnProperty(o)){var u=r[o];if(o=a[o],C.isPlainObject(u)&&C.isPlainObject(o)){if(!s(u,o))return!1}else if(!C.equals(u,o))return!1}return!0}(e,n)}return C.equals(n,e)},getItems:function(t){return pt._getItems(this,t,this._matrix)},getItem:function(t){return pt._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,n,i,s,r){var a,o,u;s||(o=(a="object"==typeof n&&n)&&a.overlapping,u=a&&a.inside,l=(f=o||u)&&rt.read([f]),s={items:[],recursive:a&&!1!==a.recursive,inside:!!u,overlapping:!!o,rect:l,path:o&&new Ct.Rectangle({rectangle:l,insert:!1})},a&&(n=C.filter({},n,{recursive:!0,inside:!0,overlapping:!0})));var l,c=e._children,d=s.items;i=(l=s.rect)&&(i||new gt);for(var m=0,p=c&&c.length;m<p;m++){var b=c[m],g=i&&i.appended(b._matrix),v=!0;if(l){var f=b.getBounds(g);if(!l.intersects(f))continue;l.contains(f)||s.overlapping&&(f.contains(l)||s.path.intersects(b,g))||(v=!1)}if(v&&b.matches(n)&&(d.push(b),r)||(!1!==s.recursive&&t(b,n,g,s,r),r&&0<d.length))break}return d}}},{importJSON:function(t){return(t=C.importJSON(t,this))!==this?this.addChild(t):t},addChild:function(t){return this.insertChild(K,t)},insertChild:function(t,e){return(e=e?this.insertChildren(t,[e]):null)&&e[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var n=this._children;if(n&&e&&0<e.length){for(var i={},s=(e=C.slice(e)).length-1;0<=s;s--){var r=(l=e[s])&&l._id;!l||i[r]?e.splice(s,1):(l._remove(!1,!0),i[r]=!0)}C.splice(n,e,t,0);for(var a=this._project,o=a._changes,u=(s=0,e.length);s<u;s++){var l,c=(l=e[s])._name;l._parent=this,l._setProject(a,!0),c&&l.setName(c),o&&l._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var n=t&&t._getOwner(),i=t!==this&&n?this:null;return i&&(i._remove(!1,!0),n._insertItem(t._index+e,i)),i},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(K,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(K,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;return e&&1===e.length?(t=e[0].reduce(t),this._parent?(t.insertAbove(this),this.remove()):t.remove(),t):this},_removeNamed:function(){var t,e,n,i,s=this._getOwner();s&&(t=s._children,-1!==(s=(i=(e=s._namedChildren)[n=this._name])?i.indexOf(this):-1)&&(t[n]==this&&delete t[n],i.splice(s,1),i.length?t[n]=i[0]:delete e[n]))},_remove:function(t,e){var n=this._getOwner(),i=this._project,s=this._index;return this._style&&this._style._dispose(),!(!n||(this._name&&this._removeNamed(),null!=s&&(i._activeLayer===this&&(i._activeLayer=this.getNextSibling()||this.getPreviousSibling()),C.splice(n._children,null,s,1)),this._installEvents(!1),t&&i._changes&&this._changed(5),e&&n._changed(11,this),this._parent=null))},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){return(t=t&&t.insertBelow(this))&&this.remove(),t},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=C.pick(e,this._children.length);for(var n=C.splice(this._children,null,t,e-t),i=n.length-1;0<=i;i--)n[i]._remove(!0,!1);return 0<n.length&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(t){var e=this._children,n=e?e.length:0;if(t){for(var i=0;i<n;i++)if(!e[i].isEmpty(t))return!1;return!0}return!n},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(a){for(var o=[];o.unshift(a),a=a._parent;);return o}for(var n=e(this),i=e(t),s=0,r=Math.min(n.length,i.length);s<r;s++)if(n[s]!=i[s])return n[s]._index<i[s]._index?1:-1;return 0},hasChildren:function(){return this._children&&0<this._children.length},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},C.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var i=(e?C:M).read(n=arguments),n=M.read(n,0,{readNull:!0});return this.transform((new gt)[t](i,n||this.getPosition(!0)))}},{translate:function(){var t=new gt;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,n){var i,s,r=this._matrix,a=t&&!t.isIdentity(),o=n&&this._canApplyMatrix||this._applyMatrix&&(a||!r.isIdentity()||e&&this._children);if(!a&&!o)return this;a&&(!t.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(t,!0),i=(s=this._style).getFillColor(!0),s=s.getStrokeColor(!0),i&&i.transform(t),s&&s.transform(t)),(o=o&&this._transformContent(r,e,n))&&((e=this._pivot)&&r._transformPoint(e,e,!0),r.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0));var u=this._bounds;if(r=this._position,(a||o)&&this._changed(25),(n=a&&u&&t.decompose())&&n.skewing.isZero()&&n.rotation%90==0){for(var l in u){var c=u[l];c.nonscaling?delete u[l]:!o&&c.internal||t._transformBounds(c=c.rect,c)}(n=(this._bounds=u)[this._getBoundsCacheKey(this._boundsOptions||{})])&&(this._position=this._getPositionFromBounds(n.rect))}else a&&r&&this._pivot&&(this._position=t._transformPoint(r,r));return this},_transformContent:function(t,e,n){var i=this._children;if(i){for(var s=0,r=i.length;s<r;s++)i[s].transform(t,e,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(M.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(M.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(M.read(arguments))},localToParent:function(){return this._matrix._transformPoint(M.read(arguments))},fitBounds:function(t,e){t=rt.read(arguments);var n=this.getBounds(),i=n.height/n.width,s=t.height/t.width;s=(e?s<i:i<s)?t.width/n.width:t.height/n.height,(s=new rt(new M,new it(n.width*s,n.height*s))).setCenter(t.getCenter()),this.setBounds(s)}}),{_setStyles:function(t,e,n){var i,s,r=this._style,a=this._matrix;r.hasFill()&&(t.fillStyle=r.getFillColor().toCanvasStyle(t,a)),r.hasStroke()&&(t.strokeStyle=r.getStrokeColor().toCanvasStyle(t,a),t.lineWidth=r.getStrokeWidth(),i=r.getStrokeJoin(),s=r.getStrokeCap(),a=r.getMiterLimit(),i&&(t.lineJoin=i),s&&(t.lineCap=s),a&&(t.miterLimit=a),mt.support.nativeDash&&(s=r.getDashArray(),a=r.getDashOffset(),s&&s.length&&("setLineDash"in t?(t.setLineDash(s),t.lineDashOffset=a):(t.mozDash=s,t.mozDashOffset=a)))),r.hasShadow()&&(e=e.pixelRatio||1,e=(n=n._shiftless().prepend((new gt).scale(e,e))).transform(new M(r.getShadowBlur(),0)),n=n.transform(this.getShadowOffset()),t.shadowColor=r.getShadowColor().toCanvasStyle(t),t.shadowBlur=e.getLength(),t.shadowOffsetX=n.x,t.shadowOffsetY=n.y)},draw:function(t,e,n){if(this._updateVersion=this._project._updateVersion,this._visible&&0!==this._opacity){var i=e.matrices,s=e.viewMatrix,r=this._matrix;if((a=i[i.length-1].appended(r)).isInvertible()){s=s?s.appended(a):a,i.push(a),e.updateMatrix&&(this._globalMatrix=a);var o,u,l,c=this._blendMode,d=ct.clamp(this._opacity,0,1),m="normal"===c,p=$n.nativeModes[c],b=m&&1===d||e.dontStart||e.clip||(p||m&&d<1)&&this._canComposite(),a=e.pixelRatio||1;if(!b){var g=this.getStrokeBounds(s);if(!g.width||!g.height)return void i.pop();l=e.offset,u=e.offset=g.getTopLeft().floor(),o=t,t=Ht.getContext(g.getSize().ceil().add(1).multiply(a)),1!==a&&t.scale(a,a)}t.save(),m=n?n.appended(r):this._canScaleStroke&&!this.getStrokeScaling(!0)&&s,g=!b&&e.clipItem,n=!m||g,b?(t.globalAlpha=d,p&&(t.globalCompositeOperation=c)):n&&t.translate(-u.x,-u.y),n&&(b?r:s).applyToContext(t),g&&e.clipItem.draw(t,e.extend({clip:!0})),m&&(t.setTransform(a,0,0,a,0,0),(g=e.offset)&&t.translate(-g.x,-g.y)),this._draw(t,e,s,m),t.restore(),i.pop(),e.clip&&!e.dontFinish&&t.clip(this.getFillRule()),b||($n.process(c,t,o,d,u.subtract(l).multiply(a)),Ht.release(t),e.offset=l)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof ke)return e._isUpdated(t);var n=this._updateVersion===t;return!n&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,n=!0),n},_drawSelection:function(t,e,n,i,s){var a=1&(r=this._selection),o=2&r||a&&this._selectBounds,r=4&r;if(((a=!!this._drawSelected&&a)||o||r)&&this._isUpdated(s)){var u=this.getSelectedColor(!0)||(u=this.getLayer())&&u.getSelectedColor(!0),l=(e=e.appended(this.getGlobalMatrix(!0)),n/2);if(t.strokeStyle=t.fillStyle=u?u.toCanvasStyle(t):"#009dec",a&&this._drawSelected(t,e,i),r){i=this.getPosition(!0);var c=(i=(r=this._parent)?r.localToGlobal(i):i).x,d=i.y;t.beginPath(),t.arc(c,d,l,0,2*Math.PI,!0),t.stroke();for(var m=[[0,-1],[1,0],[0,1],[-1,0]],p=l,b=n+1,g=0;g<4;g++){var v,f=(v=m[g])[0];t.moveTo(c+f*p,d+(v=v[1])*p),t.lineTo(c+f*b,d+v*b),t.stroke()}}if(o){var y=e._transformCorners(this.getInternalBounds());for(t.beginPath(),g=0;g<8;g++)t[g?"lineTo":"moveTo"](y[g],y[++g]);for(t.closePath(),t.stroke(),g=0;g<8;g++)t.fillRect(y[g]-l,y[++g]-l,n,n)}}},_canComposite:function(){return!1}},C.each(["down","drag","up","move"],function(t){this["removeOn"+C.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}},{removeOn:function(t){for(var e in t){var n;t[e]&&(n="mouse"+e,(e=(e=this._project)._removeSets=e._removeSets||{})[n]=e[n]||{},e[n][this._id]=this)}return this}}),{tween:function(t,e,n){n||(n=e,e=t,t=null,n||(n=e,e=null));var i=n&&n.easing,s=n&&n.start,r=new De(this,t,e,n=null!=n&&("number"==typeof n?n:n.duration),i,s);return n&&this.on("frame",function a(o){r._handleFrame(1e3*o.time),r.running||this.off("frame",a)}),r},tweenTo:function(t,e){return this.tween(null,t,e)},tweenFrom:function(t,e){return this.tween(t,null,e)}}),Ne=pt.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(e){t.base.call(this,e),2050&e&&(this._clipItem=K)},_getClipItem:function(){if((t=this._clipItem)===K){for(var t=null,e=this._children,n=0,i=e.length;n<i;n++)if(e[n]._clipMask){t=e[n];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,n){var i=this._getClipItem();return i?i._getCachedBounds(i._matrix.prepended(e),C.set({},n,{stroke:!1})):t.base.call(this,e,n)},_hitTestChildren:function t(e,n,i){var s=this._getClipItem();return(!s||s.contains(e))&&t.base.call(this,e,n,i,s)},_draw:function(t,e){var n=e.clip,i=!n&&this._getClipItem();e=e.extend({clipItem:i,clip:!1}),n?(t.beginPath(),e.dontStart=e.dontFinish=!0):i&&i.draw(t,e.extend({clip:!0}));for(var s=this._children,r=0,a=s.length;r<a;r++){var o=s[r];o!==i&&o.draw(t,e)}}}),pn=Ne.extend({_class:"Layer",initialize:function(){Ne.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),fe=pt.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,e){this._initialize(t,e)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&C.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new Me(t.width,t.height,this,"setSize")},setSize:function(){var t,e,n,i=it.read(arguments);this._size?this._size.equals(i)||(e=i.width,n=i.height,"rectangle"===(t=this._type)?this._radius.set(it.min(this._radius,i.divide(2).abs())):"circle"===t?(e=n=(e+n)/2,this._radius=e/2):"ellipse"===t&&this._radius._set(e/2,n/2),this._size._set(e,n),this._changed(9)):this._size=i.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new Me(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;var n=2*t;this._radius=t,this._size._set(n,n)}else if(t=it.read(arguments),this._radius){if(this._radius.equals(t))return;this._radius.set(t),"rectangle"===e?(n=it.max(this._size,t.multiply(2)),this._size.set(n)):"ellipse"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var e=new(Ct[C.capitalize(this._type)])({center:new M,size:this._size,radius:this._radius,insert:!1});return e.copyAttributes(this),mt.settings.applyMatrix&&e.setApplyMatrix(!0),t!==K&&!t||e.insertAbove(this),e},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,n,i){var s,r,a,o,u,l=this._style,c=l.hasFill(),d=l.hasStroke(),m=e.dontFinish||e.clip,p=!i;(c||d||m)&&(o=this._radius,u="circle"===(a=this._type),e.dontStart||t.beginPath(),p&&u?t.arc(0,0,o,0,2*Math.PI,!0):(s=u?o:o.width,r=u?o:o.height,o=(u=this._size).width,u=u.height,p&&"rectangle"===a&&0===s&&0===r?t.rect(-o/2,-u/2,o,u):(u=[-(p=o/2),-(a=u/2)+r,-p,(u=r*(o=.44771525016920644))-a,(o*=s)-p,-a,-p+s,-a,p-s,-a,p-o,-a,p,u-a,p,-a+r,p,a-r,p,a-u,p-o,a,p-s,a,-p+s,a,o-p,a,-p,a-u,-p,a-r],i&&i.transform(u,u,32),t.moveTo(u[0],u[1]),t.bezierCurveTo(u[2],u[3],u[4],u[5],u[6],u[7]),p!==s&&t.lineTo(u[8],u[9]),t.bezierCurveTo(u[10],u[11],u[12],u[13],u[14],u[15]),a!==r&&t.lineTo(u[16],u[17]),t.bezierCurveTo(u[18],u[19],u[20],u[21],u[22],u[23]),p!==s&&t.lineTo(u[24],u[25]),t.bezierCurveTo(u[26],u[27],u[28],u[29],u[30],u[31]))),t.closePath()),m||!c&&!d||(this._setStyles(t,e,n),c&&(t.fill(l.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),d&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var n=new rt(this._size).setCenter(0,0),i=this._style;return i=e.stroke&&i.hasStroke()&&i.getStrokeWidth(),t&&(n=t._transformBounds(n)),i?n.expand(Ct._getStrokePadding(i,this._getStrokeMatrix(t,e))):n}},new function(){function t(n,i,s){var r=n._radius;if(!r.isZero())for(var a=n._size.divide(2),o=1;o<=4;o++){var u=new M(1<o&&o<4?-1:1,2<o?-1:1),l=u.multiply(a),c=l.subtract(u.multiply(r));if(new rt(s?l.add(u.multiply(s)):l,c).contains(i))return{point:c,quadrant:o}}}function e(n,i,s,r){return n=n.divide(i),(!r||n.isInQuadrant(r))&&n.subtract(n.normalize()).multiply(i).divide(s).length<=1}return{_contains:function n(i){if("rectangle"!==this._type)return i.divide(this.size).getLength()<=.5;var s=t(this,i);return s?i.subtract(s.point).divide(this._radius).getLength()<=1:n.base.call(this,i)},_hitTestSelf:function n(i,s,r,a){var o,u,l,c=!1,d=this._style,m=s.stroke&&d.hasStroke(),p=s.fill&&d.hasFill();return(m||p)&&(u=this._type,o=this._radius,l=m?d.getStrokeWidth()/2:0,p=s._tolerancePadding.add(Ct._getStrokePadding(l,!d.getStrokeScaling()&&a)),c="rectangle"===u?(d=t(this,i,l=p.multiply(2)))?e(i.subtract(d.point),o,p,d.quadrant):(d=(u=new rt(this._size).setCenter(0,0)).expand(l),l=u.expand(l.negate()),d._containsPoint(i)&&!l._containsPoint(i)):e(i,o,p)),c?new Ve(m?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function t(e,n,i,s,r){var a=C.create(fe.prototype);return a._type=e,a._size=i,a._radius=s,a._initialize(C.getNamed(r),n),a}return{Circle:function(){var e=arguments,n=M.readNamed(e,"center"),i=C.readNamed(e,"radius");return t("circle",n,new it(2*i),i,e)},Rectangle:function(){var e=arguments,n=rt.readNamed(e,"rectangle"),i=it.min(it.readNamed(e,"radius"),n.getSize(!0).divide(2));return t("rectangle",n.getCenter(!0),n.getSize(!0),i,e)},Ellipse:function(){var e=arguments,n=fe._readEllipse(e),i=n.radius;return t("ellipse",n.center,i.multiply(2),i,e)},_readEllipse:function(e){var n,i;return i=C.hasNamed(e,"radius")?(n=M.readNamed(e,"center"),it.readNamed(e,"radius")):(n=(i=rt.readNamed(e,"rectangle")).getCenter(!0),i.getSize(!0).divide(2)),{center:n,radius:i}}}}}),mn=pt.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(t,e){var n,i;this._initialize(t,e!==K&&M.read(arguments))||((i="string"==(i=typeof t)?kt.getElementById(t):"object"==i?t:null)&&i!==pt.NO_INSERT&&(i.getContext||null!=i.naturalHeight?n=i:i&&((i=it.read(arguments)).isZero()||(n=Ht.getCanvas(i)))),n?this.setImage(n):this.setSource(t)),this._size||(this._size=new it,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,n=t._canvas;e?this._setImage(e):n&&((e=Ht.getCanvas(t._size)).getContext("2d").drawImage(n,0,0),this._setImage(e)),this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new Me(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(t,e){var n,i=it.read(arguments);i.equals(this._size)?e&&this.clear():0<i.width&&0<i.height?(n=!e&&this.getElement(),this._setImage(Ht.getCanvas(i)),n&&this.getContext(!0).drawImage(n,0,0,i.width,i.height)):(this._canvas&&Ht.release(this._canvas),this._size=i.clone())},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new M(0,0).transform(t),n=new M(1,0).transform(t).subtract(e);return e=new M(0,1).transform(t).subtract(e),new it(72/n.getLength(),72/e.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){var e=this;function n(i){var s=e.getView(),r=i&&i.type||"load";s&&e.responds(r)&&(mt=s._scope,e.emit(r,new ze(i)))}this._setImage(t),this._loaded?setTimeout(n,0):t&&Dt.add(t,{load:function(i){e._setImage(t),n(i)},error:n})},_setImage:function(t){this._canvas&&Ht.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new it(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var t=Ht.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){Ht.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(1025)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var e=new Nt.Image,n=this._crossOrigin;n&&(e.crossOrigin=n),t&&(e.src=t),this.setImage(e)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getSmoothing:function(){return this._smoothing},setSmoothing:function(t){this._smoothing="string"==typeof t?t:t?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=rt.read(arguments),e=Ht.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=rt.read(arguments),e=new mn(pt.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t;return/^data:/.test(t=(t=this._image)&&t.src)?t:(t=this.getCanvas())?t.toDataURL.apply(t,arguments):null},drawImage:function(t){var e=M.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){if(t?t instanceof Qe?i=(s=t).getBounds():"object"==typeof t&&("width"in t?i=new rt(t):"x"in t&&(i=new rt(t.x-.5,t.y-.5,1,1))):i=this.getBounds(),!i)return null;var e=Math.min(i.width,32),n=Math.min(i.height,32);(t=mn._sampleContext)?t.clearRect(0,0,33,33):t=mn._sampleContext=Ht.getContext(new it(32)),t.save(),(i=(new gt).scale(e/i.width,n/i.height).translate(-i.x,-i.y)).applyToContext(t),s&&s.draw(t,new C({clip:!0,matrices:[i]})),this._matrix.applyToContext(t);var s=this.getElement(),i=this._size;s&&t.drawImage(s,-i.width/2,-i.height/2),t.restore();for(var r=t.getImageData(.5,.5,Math.ceil(e),Math.ceil(n)).data,a=[0,0,0],o=0,u=0,l=r.length;u<l;u+=4){var c=r[u+3];o+=c,a[0]+=r[u]*(c/=255),a[1]+=r[u+1]*c,a[2]+=r[u+2]*c}for(u=0;u<3;u++)a[u]/=o;return o?zt.read(a):null},getPixel:function(){var t=M.read(arguments);return t=this.getContext().getImageData(t.x,t.y,1,1).data,new zt("rgb",[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var t,n,e=M.read(t=arguments),i=(n=zt.read(t))._convert("rgb"),s=n._alpha,r=this.getContext(!0);(n=(t=r.createImageData(1,1)).data)[0]=255*i[0],n[1]=255*i[1],n[2]=255*i[2],n[3]=null!=s?255*s:255,r.putImageData(t,e.x,e.y)},clear:function(){var t=this._size;this.getContext(!0).clearRect(0,0,t.width+1,t.height+1)},createImageData:function(){var t=it.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=rt.read(arguments);return t.isEmpty()&&(t=new rt(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=M.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var n=new rt(this._size).setCenter(0,0);return t?t._transformBounds(n):n},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new Ve("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t,e,n){var i=this.getElement();i&&0<i.width&&0<i.height&&(t.globalAlpha=ct.clamp(this._opacity,0,1),this._setStyles(t,e,n),Rt.setPrefixed(t,(n="off"===(e=this._smoothing))?"imageSmoothingEnabled":"imageSmoothingQuality",!n&&e),t.drawImage(i,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),vn=pt.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,e){this._initialize(t,e!==K&&M.read(arguments,1))||this.setDefinition(t instanceof je?t:new je(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(t),e)},_hitTestSelf:function(t,e,n){return e=e.extend({all:!1}),(n=this._definition._item._hitTest(t,e,n))&&(n.item=this),n},_draw:function(t,e){this._definition._item.draw(t,e)}}),je=C.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=Ze.get(),this.project=mt.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,function(){return C.serialize([this._class,this._item],t,!1,e)})},_changed:function(t){8&t&&pt._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),(this._item=t).remove(),t.setSelected(!1),e||t.setPosition(new M),(t._symbol=this)._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new vn(this,t)},clone:function(){return new je(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),Ve=C.extend({_class:"HitResult",initialize:function(t,e,n){this.type=t,this.item=e,n&&this.inject(n)},statics:{getOptions:function(t){return t=t&&C.read(t),new C({type:null,tolerance:mt.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),st=C.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,e,n,i,s,r){var a,o,u,l,c=arguments.length;0<c&&(null==t||"object"==typeof t?l=1===c&&t&&"point"in t?(a=t.point,o=t.handleIn,u=t.handleOut,t.selection):(a=t,o=e,u=n,i):(a=[t,e],o=n!==K?[n,i]:null,u=s!==K?[s,r]:null)),new Ln(a,this,"_point"),new Ln(o,this,"_handleIn"),new Ln(u,this,"_handleOut"),l&&this.setSelection(l)},_serialize:function(t,e){var n=this._point,i=this._selection;return n=i||this.hasHandles()?[n,this._handleIn,this._handleOut]:n,i&&n.push(i),C.serialize(n,t,!0,e)},_changed:function(t){var e,n,i,s=this._path;s&&(n=this._index,(e=s._curves)&&(t&&t!==this._point&&t!==this._handleIn||!(i=0<n?e[n-1]:s._closed?e[e.length-1]:null)||i._changed(),t&&t!==this._point&&t!==this._handleOut||!(i=e[n])||i._changed()),s._changed(41))},getPoint:function(){return this._point},setPoint:function(){this._point.set(M.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(M.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(M.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,n=this._path;this._selection=t=t||0,n&&t!==e&&(n._updateSelection(this,e,t),n._changed(257))},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==K?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(0<e&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new Se(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,e,n){var i=t||{},s=i.type,r=i.factor,a=this.getPrevious(),o=this.getNext(),u=(a||this)._point,l=this._point,c=(o||this)._point,d=u.getDistance(l);if(t=l.getDistance(c),s&&"catmull-rom"!==s){if("geometric"!==s)throw new Error("Smoothing method '"+s+"' not supported.");a&&o&&(i=u.subtract(c),s=(b=r===K?.4:r)*d/(d+t),e||this.setHandleIn(i.multiply(s)),n||this.setHandleOut(i.multiply(s-b)))}else{var m,p,b=r===K?.5:r;d=(r=Math.pow(d,b))*r,b=(t=Math.pow(t,b))*t,!e&&a&&(m=2*b+3*t*r+d,this.setHandleIn(0!=(p=3*t*(t+r))?new M((b*u._x+m*l._x-d*c._x)/p-l._x,(b*u._y+m*l._y-d*c._y)/p-l._y):new M)),!n&&o&&(m=2*d+3*r*t+b,this.setHandleOut(0!=(p=3*r*(r+t))?new M((d*c._x+m*l._x-b*u._x)/p-l._x,(d*c._y+m*l._y-b*u._y)/p-l._y):new M))}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,n=t.clone();t.set(e),e.set(n)},reversed:function(){return new st(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new st(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,n){var i=1-n,s=n,r=t._point,a=e._point,o=t._handleIn;n=e._handleIn,e=e._handleOut,t=t._handleOut,this._point._set(i*r._x+s*a._x,i*r._y+s*a._y,!0),this._handleIn._set(i*o._x+s*n._x,i*o._y+s*n._y,!0),this._handleOut._set(i*t._x+s*e._x,i*t._y+s*e._y,!0),this._changed()},_transformCoordinates:function(t,e,n){var i=this._point,s=n&&this._handleIn.isZero()?null:this._handleIn,r=n&&this._handleOut.isZero()?null:this._handleOut,a=i._x,o=i._y,u=2;return e[0]=a,e[1]=o,s&&(e[u++]=s._x+a,e[u++]=s._y+o),r&&(e[u++]=r._x+a,e[u++]=r._y+o),t&&(t._transformCoordinates(e,e,u/2),a=e[0],o=e[1],n?(i._x=a,i._y=o,u=2,s&&(s._x=e[u++]-a,s._y=e[u++]-o),r&&(r._x=e[u++]-a,r._y=e[u++]-o)):(s||(e[u++]=a,e[u++]=o),r||(e[u++]=a,e[u++]=o))),e}}),Ln=M.extend({initialize:function(t,e,n){var i,s,r;t?(i=t[0])!==K?s=t[1]:((i=(r=t).x)===K&&(i=(r=M.read(arguments)).x),s=r.y,r=r.selected):i=s=0,this._x=i,this._y=s,(this._owner=e)[n]=this,r&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=ct.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),J=C.extend({_class:"Curve",beans:!0,initialize:function(t,e,n,i,s,r,a,o){var u,l,c,d,m,p,b=arguments.length;3===b?(this._path=t,u=e,l=n):b?1===b?"segment1"in t?(u=new st(t.segment1),l=new st(t.segment2)):"point1"in t?(c=t.point1,m=t.handle1,p=t.handle2,d=t.point2):Array.isArray(t)&&(c=[t[0],t[1]],d=[t[6],t[7]],m=[t[2]-t[0],t[3]-t[1]],p=[t[4]-t[6],t[5]-t[7]]):2===b?(u=new st(t),l=new st(e)):4===b?(c=t,m=e,p=n,d=i):8===b&&(c=[t,e],d=[a,o],m=[n-t,i-e],p=[s-a,r-o]):(u=new st,l=new st),this._segment1=u||new st(c,null,m),this._segment2=l||new st(d,p,null)},_serialize:function(t,e){return C.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=K},clone:function(){return new J(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return J.classify(this.getValues())},remove:function(){var t,e,n=!1;return this._path&&(e=(t=this._segment2)._handleOut,(n=t.remove())&&this._segment1._handleOut.set(e)),n},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(M.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(M.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(M.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(M.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return J.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],n=0;n<8;n+=2)e.push(new M(t[n],t[n+1]));return e}},{getLength:function(){return null==this._length&&(this._length=J.getLength(this.getValues(),0,1)),this._length},getArea:function(){return J.getArea(this.getValues())},getLine:function(){return new Pt(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new J(J.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return J.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var n,i,s,r,a,o,u=null;return 1e-8<=t&&t<=1-1e-8&&(n=(o=J.subdivide(this.getValues(),t))[0],i=o[1],s=e||this.hasHandles(),r=this._segment1,a=this._segment2,t=this._path,s&&(r._handleOut._set(n[2]-n[0],n[3]-n[1]),a._handleIn._set(i[4]-i[6],i[5]-i[7])),e=new st(new M(o=n[6],e=n[7]),s&&new M(n[4]-o,n[5]-e),s&&new M(i[2]-o,i[3]-e)),u=t?(t.insert(r._index+1,e),this.getNext()):(this._segment2=e,this._changed(),new J(e,a))),u},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,e){return this.divideAtTime(t===K?.5:e?t:this.getTimeAt(t))},split:function(t,e){return this.splitAtTime(t===K?.5:e?t:this.getTimeAt(t))},reversed:function(){return new J(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,n,i){var r=t._handleOut,a=e._handleIn,o=e._point,s=(t=(s=t._point).x,e=s.y,o.x);return o=o.y,o=i?[t,e,t,e,s,o,s,o]:[t,e,t+r._x,e+r._y,s+a._x,o+a._y,s,o],n&&n._transformCoordinates(o,o,4),o},subdivide:function(t,e){var a,n=t[0],i=t[1],u=t[6],l=t[7],c=1-(e=e===K?.5:e),d=c*n+e*(s=t[2]),m=c*i+e*(r=t[3]),p=c*s+e*(a=t[4]),b=c*r+e*(o=t[5]),s=c*o+e*l,r=c*d+e*p,o=c*p+e*(t=c*a+e*u);return p=c*b+e*s,[[n,i,d,m,r,a=c*m+e*b,b=c*r+e*o,e=c*a+e*p],[b,e,o,p,t,s,u,l]]},getMonoCurves:function(t,e){var n,i,s=[],a=t[0+(r=e?0:1)],o=t[2+r],r=(e=t[4+r],t[6+r]);return o<=a==e<=o&&e<=o==r<=e||J.isStraight(t)||!(i=ct.solveQuadratic(3*(o-e)-a+r,2*(a+e)-4*o,o-a,n=[],1e-8,1-1e-8))?s.push(t):(n.sort(),a=J.subdivide(t,o=n[0]),s.push(a[0]),1<i&&(a=J.subdivide(a[1],o=(n[1]-o)/(1-o)),s.push(a[0])),s.push(a[1])),s},solveCubic:function(t,e,n,i,s,r){var a=t[e],o=t[e+2],u=t[e+4];return t=t[e+6],e=0,a<n&&t<n&&o<n&&u<n||n<a&&n<t&&n<o&&n<u?e:ct.solveCubic(t-a-(t=3*(o-a))-(o=3*(u-o)-t),o,t,a-n,i,s,r)},getTimeOf:function(t,e){var n=new M(t[0],t[1]),i=new M(t[6],t[7]);if(null===(e.isClose(n,1e-12)?0:e.isClose(i,1e-12)?1:null))for(var s=[e.x,e.y],r=[],a=0;a<2;a++)for(var o=J.solveCubic(t,a,s[a],r,0,1),u=0;u<o;u++){var l=r[u];if(e.isClose(J.getPoint(t,l),1e-7))return l}return e.isClose(n,1e-7)?0:e.isClose(i,1e-7)?1:null},getNearestTime:function(t,e){if(J.isStraight(t)){var n=t[0],i=t[1],s=t[6]-n,r=t[7]-i,a=s*s+r*r;return 0==a||(a=((e.x-n)*s+(e.y-i)*r)/a)<1e-12?0:.999999999999<a?1:J.getTimeOf(t,new M(n+a*s,i+a*r))}var o=1/0,u=0;function l(m){if(0<=m&&m<=1){var p=e.getDistance(J.getPoint(t,m),!0);return p<o?(o=p,u=m,1):void 0}}for(var c=0;c<=100;c++)l(c/100);for(var d=.005;1e-8<d;)l(u-d)||l(u+d)||(d/=2);return u},getPart:function(t,e,n){var i,s=n<e;return s&&(i=e,e=n,n=i),0<e&&(t=J.subdivide(t,e)[1]),n<1&&(t=J.subdivide(t,(n-e)/(1-e))[0]),s?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var a=t[4],o=t[5],u=t[6],s=3*(s=t[2])-2*(n=t[0])-u,r=3*(r=t[3])-2*(i=t[1])-(t=t[7]),n=3*a-2*u-n,i=3*o-2*t-i;return Math.max(s*s,n*n)+Math.max(r*r,i*i)<=16*e*e},getArea:function(t){var e=t[0],n=t[1],i=t[2],s=t[3],r=t[4],a=t[5],o=t[6];return 3*(((t=t[7])-n)*(i+r)-(o-e)*(s+a)+s*(e-r)-i*(n-a)+t*(r+e/3)-o*(a+n/3))/20},getBounds:function(t){for(var e=t.slice(0,2),n=e.slice(),i=[0,0],s=0;s<2;s++)J._addBounds(t[s],t[s+2],t[s+4],t[s+6],s,0,e,n,i);return new rt(e[0],e[1],n[0]-e[0],n[1]-e[1])},_addBounds:function(t,e,n,i,s,r,a,o,u){function l(v,f){var y=v-f;f=v+f,y<a[s]&&(a[s]=y),f>o[s]&&(o[s]=f)}var c=a[s]+(r/=2),d=o[s]-r;if(t<c||e<c||n<c||i<c||d<t||d<e||d<n||d<i)if(e<t!=e<i&&n<t!=n<i)l(t,0),l(i,0);else{var m=ct.solveQuadratic(3*(e-n)-t+i,2*(t+n)-4*e,e-t,u);l(i,0);for(var p=0;p<m;p++){var b=u[p],g=1-b;1e-8<=b&&b<=1-1e-8&&l(g*g*g*t+3*g*g*b*e+3*g*b*b*n+b*b*b*i,r)}}}}},C.each(["getBounds","getStrokeBounds","getHandleBounds"],function(t){this[t]=function(){return this._bounds||(this._bounds={}),(this._bounds[t]||(this._bounds[t]=Ct[t]([this._segment1,this._segment2],!1,this._path))).clone()}},{}),C.each({isStraight:function(t,e,n,i){if(e.isZero()&&n.isZero())return!0;var s=i.subtract(t);if(s.isZero())return!1;if(s.isCollinear(e)&&s.isCollinear(n)){var r=new Pt(t,i);if(r.getDistance(t.add(e))<1e-7&&r.getDistance(i.add(n))<1e-7)return i=s.dot(s),e=s.dot(e)/i,i=s.dot(n)/i,0<=e&&e<=1&&i<=0&&-1<=i}return!1},isLinear:function(t,e,n,i){return t=i.subtract(t).divide(3),e.equals(t)&&n.negate().equals(t)}},function(t,e){this[e]=function(n){var i=this._segment1,s=this._segment2;return t(i._point,i._handleOut,s._handleIn,s._point,n)},this.statics[e]=function(n,i){var s=n[0],r=n[1],a=n[6],o=n[7];return t(new M(s,r),new M(n[2]-s,n[3]-r),new M(n[4]-a,n[5]-o),new M(a,o),i)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&0<=t&&t<=1?new Se(this,t):null},getTimeAt:function(t,e){return J.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var t=M.read(arguments);return t.isZero()?[]:J.getTimesWithTangent(this.getValues(),t)},getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(M.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return J.getTimeOf(this.getValues(),M.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=M.read(arguments),e=this.getValues(),n=J.getNearestTime(e,t);return e=J.getPoint(e,n),new Se(this,n,e,null,t.getDistance(e))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t&&t.getPoint()}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return C.each(t,function(e){this[e+"At"]=function(n,i){var s=this.getValues();return J[e](s,i?n:J.getTimeAt(s,n))},this[e+"AtTime"]=function(n){return J[e](this.getValues(),n)}},{statics:{_evaluateMethods:t}})},new function(){function t(i){var s=i[0],r=i[1],a=i[2],o=i[3],u=i[4],l=i[5],d=9*(a-u)+3*(i[6]-s),m=6*(s+u)-12*a,p=3*(a-s),b=9*(o-l)+3*((i=i[7])-r),g=6*(r+l)-12*o,v=3*(o-r);return function(f){var y=(d*f+m)*f+p;return f=(b*f+g)*f+v,Math.sqrt(y*y+f*f)}}function e(i,s){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(s-i))))}function n(i,s,r,a){if(null==s||s<0||1<s)return null;var o=i[0],u=i[1],l=i[2],c=i[3],d=i[4],m=i[5],p=i[6],b=i[7];(g=ct.isZero)(l-o)&&g(c-u)&&(l=o,c=u),g(d-p)&&g(m-b)&&(d=p,m=b);var v,f,y=3*(l-o),x=3*(d-l)-y,A=p-o-y-x,I=3*(c-u),g=b-u-I-(i=3*(m-c)-I);return 0===r?(v=0===s?o:1===s?p:((A*s+x)*s+y)*s+o,f=0===s?u:1===s?b:((g*s+i)*s+I)*s+u):(f=s<1e-8?(v=y,I):1-1e-8<s?(v=3*(p-d),3*(b-m)):(v=(3*A*s+2*x)*s+y,(3*g*s+2*i)*s+I),a&&(0===v&&0===f&&(s<1e-8||1-1e-8<s)&&(v=d-l,f=m-c),(c=Math.sqrt(v*v+f*f))&&(v/=c,f/=c)),3===r&&(d=6*A*s+2*x,m=6*g*s+2*i,v=0!==(i=Math.pow(v*v+f*f,1.5))?(v*m-f*d)/i:0,f=0)),2===r?new M(f,-v):new M(v,f)}return{statics:{classify:function(i){var a,o,s=i[0],r=i[1],u=i[4],l=i[5],c=(i=(a=i[2])*(r-(d=i[7]))+(o=i[3])*((c=i[6])-s)+s*d-r*c,(o=(a=3*(u*(o-r)+l*(s-a)+a*r-o*s))-i)-i+(s*(d-l)+r*(u-c)+c*l-d*u)),d=0!==(l=Math.sqrt(c*c+o*o+a*a))?1/l:0;function m(p,b,g){var v=b!==K,f=v&&0<b&&b<1,y=v&&0<g&&g<1;return!v||(f||y)&&("loop"!==p||f&&y)||(f=y=!(p="arch")),{type:p,roots:f||y?f&&y?b<g?[b,g]:[g,b]:[f?b:g]:null}}return l="serpentine",o*=d,a*=d,(u=ct.isZero)(c*=d)?u(o)?m(u(a)?"line":"quadratic"):m(l,a/(3*o)):u(a=3*o*o-4*c*a)?m("cusp",o/(2*c)):m(0<a?l:"loop",(o+(u=0<a?Math.sqrt(a/3):Math.sqrt(-a)))/(c*=2),(o-u)/c)},getLength:function(i,s,r,a){if(s===K&&(s=0),r===K&&(r=1),J.isStraight(i)){var o=i;r<1&&(o=J.subdivide(o,r)[0],s/=r);var u=(o=0<s?J.subdivide(o,s)[1]:o)[6]-o[0];return o=o[7]-o[1],Math.sqrt(u*u+o*o)}return ct.integrate(a||t(i),s,r,e(s,r))},getTimeAt:function(i,s,r){if(r===K&&(r=s<0?1:0),0===s)return r;var a=Math.abs,o=0<s,u=o?r:0,l=o?1:r,c=t(i),d=J.getLength(i,u,l,c);if(i=a(s)-d,a(i)<1e-12)return o?l:u;if(1e-12<i)return null;var m=0;return ct.findRoot(function(p){return m+=ct.integrate(c,r,p,e(r,p)),r=p,m-s},c,r+s/d,u,l,32,1e-12)},getPoint:function(i,s){return n(i,s,0,!1)},getTangent:function(i,s){return n(i,s,1,!0)},getWeightedTangent:function(i,s){return n(i,s,1,!1)},getNormal:function(i,s){return n(i,s,2,!0)},getWeightedNormal:function(i,s){return n(i,s,2,!1)},getCurvature:function(i,s){return n(i,s,3,!1).x},getPeaks:function(i){var u,a,l,r,o,s=i[0],c=3*(a=i[2])-s-3*(u=i[4])+i[6];return ct.solveCubic(9*(c*c+(i=3*(o=i[3])-(r=i[1])-3*(l=i[5])+i[7])*i),9*(c*(u=3*s-6*a+3*u)+(l=3*r-6*o+3*l)*i),2*(u*u+l*l)+3*((a=-3*s+3*a)*c+(r=-3*r+3*o)*i),a*u+l*r,o=[],1e-8,1-1e-8),o.sort()}}}},new function(){function t(u,l,c,d,m,p,b){var g=!b&&c.getPrevious()===m,v=!b&&c!==m&&c.getNext()===m;null!==d&&(g?1e-8:0)<=d&&d<=(v?1-1e-8:1)&&null!==p&&(v?1e-8:0)<=p&&p<=(g?1-1e-8:1)&&(d=new Se(c,d,null,b),b=new Se(m,p,null,b),(d._intersection=b)._intersection=d,l&&!l(d)||Se.insert(u,d,!0))}function e(u,l,c,d,m,p,b,g,v,f,y,x,A){if(4096<=++v||40<=++g)return v;var I,w,et,tt,wt,_t,xt,ot,It,lt,G,X,Q,N=l[0],L=Pt.getSignedDistance,T=L(N,B=l[1],D=l[6],F=l[7],l[2],l[3]),P=L(N,B,D,F,l[4],l[5]),O=(q=0<T*P?.75:4/9)*Math.min(0,T,P),R=q*Math.max(0,T,P),U=L(N,B,D,F,u[0],u[1]),W=L(N,B,D,F,u[2],u[3]),q=L(N,B,D,F,u[4],u[5]),B=L(N,B,D,F,u[6],u[7]),F=(xt=[0,et=U],ot=[1/3,tt=W],It=[2/3,wt=q],lt=[1,_t=B],lt=(tt-=(2*et+_t)/3)*(et=wt-(et+2*_t)/3)<0?[[xt,ot,lt],[xt,It,lt]]:[2<=(_t=tt/et)?[xt,ot,lt]:_t<=.5?[xt,It,lt]:[xt,ot,It,lt],[xt,lt]],D=(tt||et)<0?lt.reverse():lt)[0],D=D[1];return 0===T&&0===P&&0===U&&0===W&&0===q&&0===B||null==(I=n(F,D,O,R))||null==(w=n(F.reverse(),D.reverse(),O,R))||(R=f+(y-f)*I,y=f+(y-f)*w,Math.max(A-x,y-R)<1e-9?(G=(R+y)/2,Q=(x+A)/2,t(m,p,b?d:c,b?Q:G,b?c:d,b?G:Q)):(u=J.getPart(u,I,w),f=A-x,v=.8<w-I?f<y-R?(v=e(l,(X=J.subdivide(u,.5))[0],d,c,m,p,!b,g,v,x,A,R,G=(R+y)/2),e(l,X[1],d,c,m,p,!b,g,v,x,A,G,y)):(v=e((X=J.subdivide(l,.5))[0],u,d,c,m,p,!b,g,v,x,Q=(x+A)/2,R,y),e(X[1],u,d,c,m,p,!b,g,v,Q,A,R,y)):0==f||1e-9<=f?e(l,u,d,c,m,p,!b,g,v,x,A,R,y):e(u,l,c,d,m,p,b,g,v,R,y,x,A))),v}function n(u,l,c,d){return u[0][1]<c?i(u,!0,c):l[0][1]>d?i(l,!1,d):u[0][0]}function i(u,l,c){for(var d=u[0][0],m=u[0][1],p=1,b=u.length;p<b;p++){var g=u[p][0],v=u[p][1];if(l?c<=v:v<=c)return v===c?g:d+(c-m)*(g-d)/(v-m);d=g,m=v}return null}function s(u,l,c,d,m){var p=ct.isZero;if(p(d)&&p(m))return null===(p=J.getTimeOf(u,new M(l,c)))?[]:[p];d=Math.atan2(-m,d);for(var b=Math.sin(d),g=Math.cos(d),v=[],f=(d=[],0);f<8;f+=2){var y=u[f]-l,x=u[f+1]-c;v.push(y*g-x*b,y*b+x*g)}return J.solveCubic(v,1,0,d,0,1),d}function r(u,l,c,d,m,p){var b=1e-12,g=Math.min;if((v=Math.max)(u[0],u[2],u[4],u[6])+b>g(l[0],l[2],l[4],l[6])&&g(u[0],u[2],u[4],u[6])-b<v(l[0],l[2],l[4],l[6])&&v(u[1],u[3],u[5],u[7])+b>g(l[1],l[3],l[5],l[7])&&g(u[1],u[3],u[5],u[7])-b<v(l[1],l[3],l[5],l[7])){var f=o(u,l);if(f)for(var y=0;y<2;y++){var x=f[y];t(m,p,c,x[0],d,x[1],!0)}else{var A=J.isStraight(u),I=J.isStraight(l),w=A&&I,v=m.length;if((w?function(P,q,O,R,U,W){var G=Pt.intersect(P[0],P[1],P[6],P[7],q[0],q[1],q[6],q[7]);G&&t(U,W,O,J.getTimeOf(P,G),R,J.getTimeOf(q,G))}:A||I?function(P,q,O,R,U,W,G){for(var X=q[0],Q=q[1],et=s(P,X,Q,q[6]-X,q[7]-Q),tt=0,wt=et.length;tt<wt;tt++){var _t=et[tt],xt=J.getPoint(P,_t);null!==(xt=J.getTimeOf(q,xt))&&t(U,W,G?R:O,G?xt:_t,G?O:R,G?_t:xt)}}:e)((g=A&&!I)?l:u,g?u:l,g?d:c,g?c:d,m,p,g,0,0,0,1,0,1),!w||m.length===v)for(y=0;y<4;y++){var N=y>>1,B=1&y,F=6*B,D=new M(u[D=6*N],u[1+D]);F=new M(l[F],l[1+F]),D.isClose(F,b)&&t(m,p,c,N,d,B)}}}return m}function a(u,l,c,d){return"loop"===(u=J.classify(u)).type&&t(c,d,l,(u=u.roots)[0],l,u[1]),c}function o(u,l){function c(P){var q=P[6]-P[0];return q*q+(P=P[7]-P[1])*P}var f,d=Math.abs,m=Pt.getDistance,p=1e-7,b=J.isStraight(u),g=J.isStraight(l),v=b&&g,y=(f=c(u)<c(l))?l:u,x=f?u:l,A=y[0],I=y[1],w=y[6]-A;if(m(A,I,w,f=y[7]-I,x[0],x[1],!0)<p&&m(A,I,w,f,x[6],x[7],!0)<p)!v&&m(A,I,w,f,y[2],y[3],!0)<p&&m(A,I,w,f,y[4],y[5],!0)<p&&m(A,I,w,f,x[2],x[3],!0)<p&&m(A,I,w,f,x[4],x[5],!0)<p&&(b=g=v=!0);else if(v)return null;if(b^g)return null;for(var N=[u,l],B=[],D=0;D<4&&B.length<2;D++){var L,F=1&D,T=D>>1;if(null!=(L=J.getTimeOf(N[F],new M(N[L=1^F][T?6:0],N[L][T?7:1])))&&(T=F?[T,L]:[L,T],(!B.length||1e-8<d(T[0]-B[0][0])&&1e-8<d(T[1]-B[0][1]))&&B.push(T)),2<D&&!B.length)break}return 2!==B.length?B=null:v||(u=J.getPart(u,B[0][0],B[1][0]),(d((l=J.getPart(l,B[0][1],B[1][1]))[2]-u[2])>p||d(l[3]-u[3])>p||d(l[4]-u[4])>p||d(l[5]-u[5])>p)&&(B=null)),B}return{getIntersections:function(u){var l=this.getValues(),c=u&&u!==this&&u.getValues();return c?r(l,c,this,u,[]):a(l,this,[])},statics:{getOverlaps:o,getIntersections:function(u,l,c,d,m,p){for(var b=!l,g=u.length,v=(l=b?u:l).length,f=new Array(g),y=b?f:new Array(v),x=[],A=0;A<g;A++)f[A]=u[A].getValues(d);if(!b)for(A=0;A<v;A++)y[A]=l[A].getValues(m);for(var I=Pe.findCurveBoundsCollisions(f,y,1e-7),w=0;w<g;w++){var N=u[w],B=f[w];b&&a(B,N,x,c);var D=I[w];if(D)for(var F=0;F<D.length;F++){if(p&&x.length)return x;var T=D[F];(!b||w<T)&&r(B,y[T],N,l[T],x,c)}}return x},getCurveLineIntersections:s,getTimesWithTangent:function(u,l){var c,d=u[0],m=u[1],p=u[2],b=u[3],g=u[4],v=u[5],f=u[6],y=u[7];return l=(u=l.normalize()).x,f=3*f-9*g+9*p-3*d,y=3*y-9*v+9*b-3*m,g=6*g-12*p+6*d,v=6*v-12*b+6*m,p=3*p-3*d,d=3*b-3*m,b=2*f*(u=u.y)-2*y*l,m=[],Math.abs(b)<ct.CURVETIME_EPSILON?0==(b=f*v-y*g)||0<=(c=-(f*d-y*p)/b)&&c<=1&&m.push(c):(c=g*u-v*l,0<=(d=(g*g-4*f*p)*u*u+(-2*g*v+4*y*p+4*f*d)*l*u+(v*v-4*y*d)*l*l)&&0!=b&&(d=(-c+(l=Math.sqrt(d)))/b,0<=(b=-(c+l)/b)&&b<=1&&m.push(b),0<=d&&d<=1&&m.push(d))),m}}}}),Se=C.extend({_class:"CurveLocation",initialize:function(t,e,n,i,s){var r;.99999999<=e&&(r=t.getNext())&&(e=0,t=r),this._setCurve(t),this._time=e,this._point=n||t.getPointAtTime(e),this._overlap=i,this._distance=s,this._intersection=this._next=this._previous=null},_setPath:function(t){this._path=t,this._version=t?t._version:0},_setCurve:function(t){this._setPath(t._path),this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){var e=t.getCurve();e?this._setCurve(e):(this._setPath(t._path),this._segment1=t,this._segment2=null),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t,e,n=this._segment;return n||(t=this.getCurve(),0===(e=this.getTime())?n=t._segment1:1===e?n=t._segment2:null!=e&&(n=t.getPartLength(0,e)<t.getPartLength(e,1)?t._segment1:t._segment2),this._segment=n),n},getCurve:function(){var t=this._path,e=this;function n(i){if((i=i&&i.getCurve())&&null!=(e._time=i.getTimeOf(e._point)))return e._setCurve(i),i}return t&&t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){if(null==(t=this._offset)){var t=0,e=this.getPath(),n=this.getIndex();if(e&&null!=n)for(var i=e.getCurves(),s=0;s<n;s++)t+=i[s].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t,e,n=this._curveOffset;return null==n&&(t=this.getCurve(),e=this.getTime(),this._curveOffset=n=null!=e&&t&&t.getPartLength(0,e)),n},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t;return(t=(t=this.getCurve())&&t.divideAtTime(this.getTime()))&&this._setSegment(t._segment1),t},split:function(){var t,e=(t=this.getCurve())._path;return(t=t&&t.splitAtTime(this.getTime()))&&this._setSegment(e.getLastSegment()),t},equals:function(t,e){var n,i,s,r,a=this===t;return!a&&t instanceof Se&&(s=this.getCurve(),r=t.getCurve(),(n=s._path)===r._path&&(s=(i=Math.abs)(this.getOffset()-t.getOffset()),r=!e&&this._intersection,t=!e&&t._intersection,a=(s<1e-7||n&&i(n.getLength()-s)<1e-7)&&(!r&&!t||r&&t&&r.equals(t,!0)))),a},toString:function(){var t=[],e=this.getPoint(),n=Wt.instance;return e&&t.push("point: "+e),null!=(e=this.getIndex())&&t.push("index: "+e),null!=(e=this.getTime())&&t.push("time: "+n.number(e)),null!=this._distance&&t.push("distance: "+n.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){if((t=this._intersection)&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),t=t.getCurve();return!(e.isStraight()&&t.isStraight()&&e.getLine().intersect(t.getLine()))}return!1},isCrossing:function(){if(!(t=this._intersection))return!1;var e=this.getTime(),n=t.getTime(),i=1e-8,s=1-i,r=i<=e&&e<=s,a=i<=n&&n<=s;if(r&&a)return!this.isTouching();var o=this.getCurve(),u=o&&e<i?o.getPrevious():o,l=t.getCurve(),t=l&&n<i?l.getPrevious():l;if(s<e&&(o=o.getNext()),s<n&&(l=l.getNext()),!(u&&o&&t&&l))return!1;var c=[];function d(p,b){var g=p.getValues(),v=(p=(v=J.classify(g).roots||J.getPeaks(g)).length,J.getLength(g,b&&p?v[p-1]:0,!b&&p?v[0]:1));c.push(p?v:v/32)}function m(p,b,g){return b<g?b<p&&p<g:b<p||p<g}return r||(d(u,!0),d(o,!1)),a||(d(t,!0),d(l,!1)),i=this.getPoint(),s=Math.min.apply(Math,c),o=r?o.getTangentAtTime(e):o.getPointAt(s).subtract(i),u=r?o.negate():u.getPointAt(-s).subtract(i),l=a?l.getTangentAtTime(n):l.getPointAt(s).subtract(i),i=a?l.negate():t.getPointAt(-s).subtract(i),u=u.getAngle(),o=o.getAngle(),i=i.getAngle(),l=l.getAngle(),!!(r?m(u,i,l)^m(o,i,l)&&m(u,l,i)^m(o,l,i):m(i,u,o)^m(l,u,o)&&m(i,o,u)^m(l,o,u))},hasOverlap:function(){return!!this._overlap}},C.each(J._evaluateMethods,function(t){var e=t+"At";this[t]=function(){var n=this.getCurve(),i=this.getTime();return null!=i&&n&&n[e](i,!0)}},{preserve:!0}),new function(){function t(e,n,i){var s=e.length,r=0,a=s-1;function o(p,b){for(var g=p+b;-1<=g&&g<=s;g+=b){var v=e[(g%s+s)%s];if(!n.getPoint().isClose(v.getPoint(),1e-7))break;if(n.equals(v))return v}return null}for(;r<=a;){var u,l=r+a>>>1,c=e[l];if(i&&(u=n.equals(c)?c:o(l,-1)||o(l,1)))return n._overlap&&(u._overlap=u._intersection._overlap=!0),u;var d=n.getPath(),m=c.getPath();(d!==m?d._id-m._id:n.getIndex()+n.getTime()-(c.getIndex()+c.getTime()))<0?a=l-1:r=1+l}return e.splice(r,0,n),n}return{statics:{insert:t,expand:function(e){for(var n=e.slice(),i=e.length-1;0<=i;i--)t(n,e[i]._intersection,!1);return n}}}}),Qe=pt.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,n,i;return C.isPlainObject(t)?(n=t.segments,e=t.pathData):Array.isArray(t)?n=t:"string"==typeof t&&(e=t),n?i=(i=n[0])&&Array.isArray(i[0]):e&&(i=1<(e.match(/m/gi)||[]).length||/z\s*\S+/i.test(e)),new(i?ke:Ct)(t)}},_asPathItem:function(){return this},isClockwise:function(){return 0<=this.getArea()},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){var e,n,i=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),s=!1,r=new M,a=new M;function o(x,A){return x=+d[x],s&&(x+=r[A]),x}function u(x){return new M(o(x,"x"),o(x+1,"y"))}this.clear();for(var l=0,c=i&&i.length;l<c;l++){var d,m=i[l],p=m[0],b=p.toLowerCase(),g=(d=m.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&d.length;switch(s=p===b,"z"!==e||/[mz]/.test(b)||this.moveTo(r),b){case"m":case"l":for(var v="m"===b,f=0;f<g;f+=2)this[v?"moveTo":"lineTo"](r=u(f)),v&&(a=r,v=!1);n=r;break;case"h":case"v":var y="h"===b?"x":"y";for(r=r.clone(),f=0;f<g;f++)r[y]=o(f,y),this.lineTo(r);n=r;break;case"c":for(f=0;f<g;f+=6)this.cubicCurveTo(u(f),n=u(f+2),r=u(f+4));break;case"s":for(f=0;f<g;f+=4)this.cubicCurveTo(/[cs]/.test(e)?r.multiply(2).subtract(n):r,n=u(f),r=u(f+2)),e=b;break;case"q":for(f=0;f<g;f+=4)this.quadraticCurveTo(n=u(f),r=u(f+2));break;case"t":for(f=0;f<g;f+=2)this.quadraticCurveTo(n=/[qt]/.test(e)?r.multiply(2).subtract(n):r,r=u(f)),e=b;break;case"a":for(f=0;f<g;f+=7)this.arcTo(r=u(f+5),new it(+d[f],+d[f+1]),+d[f+2],+d[f+4],+d[f+3]);break;case"z":this.closePath(1e-12),r=a}e=b}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){return(t=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{}).onPath||!!("evenodd"===this.getFillRule()?1&t.windingL||1&t.windingR:t.winding)},getIntersections:function(t,e,n,i){var s=this===t||!t,r=this._matrix._orNullIfIdentity();return n=s?r:(n||t._matrix)._orNullIfIdentity(),s||this.getBounds(r).intersects(t.getBounds(n),1e-12)?J.getIntersections(this.getCurves(),!s&&t.getCurves(),e,r,n,i):[]},getCrossings:function(t){return this.getIntersections(t,function(e){return e.isCrossing()})},getNearestLocation:function(){for(var t=M.read(arguments),e=this.getCurves(),n=1/0,i=null,s=0,r=e.length;s<r;s++){var a=e[s].getNearestLocation(t);a._distance<n&&(n=a._distance,i=a)}return i},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t&&t.getPoint()},interpolate:function(t,e,n){var i=!this._children,s=i?"_segments":"_children",r=t[s],a=e[s],o=this[s];if(!r||!a||r.length!==a.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var u=a.length;if((e=o.length)<u)for(var l=i?st:Ct,c=e;c<u;c++)this.add(new l);else u<e&&this[i?"removeSegments":"removeChildren"](u,e);for(c=0;c<u;c++)o[c].interpolate(r[c],a[c],n);i&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var n=this._children||[this],i=t._children?t._children.slice():[t],s=n.length,r=(t=i.length,[]),a=0;e=!0;for(var o=Pe.findItemBoundsCollisions(n,i,ct.GEOMETRIC_EPSILON),u=s-1;0<=u&&e;u--){var l=n[u],c=(e=!1,o[u]);if(c)for(var d=c.length-1;0<=d&&!e;d--)l.compare(i[c[d]])&&(r[c[d]]||(r[c[d]]=!0,a++),e=!0)}e=e&&a===t}return e}}),Ct=Qe.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var e=arguments;(e=Array.isArray(t)?"object"==typeof t[0]?t:e:!t||t.size!==K||t.x===K&&t.point===K?null:e)&&0<e.length?this.setSegments(e):(this._curves=K,this._segmentSelection=0,e||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!e&&t)},_equals:function(t){return this._closed===t._closed&&C.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(e){if(t.base.call(this,e),8&e){if(this._length=this._area=K,32&e)this._version++;else if(this._curves)for(var n=0,i=this._curves.length;n<i;n++)this._curves[n]._changed()}else 64&e&&(this._bounds=K)},getStyle:function(){var t=this._parent;return(t instanceof ke?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var e,n=this.isFullySelected(),i=t&&t.length;this._segments.length=0,this._segmentSelection=0,this._curves=K,i&&("boolean"==typeof(e=t[i-1])&&(this.setClosed(e),i--),this._add(st.readList(t,0,{},i))),n&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var e=this._segments;if(!(t=this._curves))for(var n=this._countCurves(),t=this._curves=new Array(n),i=0;i<n;i++)t[i]=new J(this,e[i],e[i+1]||e[0]);return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){var e;this._closed!=(t=!!t)&&(this._closed=t,this._curves&&(e=this._curves.length=this._countCurves(),t&&(this._curves[e-1]=new J(this,this._segments[e-1],this._segments[0]))),this._changed(41))}},{beans:!0,getPathData:function(t,e){var n,i,s,r,a,o,u,l,c=this._segments,d=c.length,m=new Wt(e),p=new Array(6),b=!0,g=[];function v(y,x){y._transformCoordinates(t,p),n=p[0],i=p[1],b?(g.push("M"+m.pair(n,i)),b=!1):(o=p[3],(a=p[2])===n&&o===i&&u===s&&l===r?x||(y=i-r,g.push(0==(x=n-s)?"v"+m.number(y):0==y?"h"+m.number(x):"l"+m.pair(x,y))):g.push("c"+m.pair(u-s,l-r)+" "+m.pair(a-s,o-r)+" "+m.pair(n-s,i-r))),s=n,r=i,u=p[4],l=p[5]}if(!d)return"";for(var f=0;f<d;f++)v(c[f]);return this._closed&&0<d&&(v(c[0],!0),g.push("z")),g.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,n=new Array(6),i=0,s=e.length;i<s;i++)e[i]._transformCoordinates(t,n,!0);return!0},_add:function(t,e){for(var n=this._segments,i=this._curves,s=t.length,a=(e=(r=null==e)?n.length:e,0);a<s;a++){var o=t[a];(o=o._path?t[a]=o.clone():o)._path=this,o._index=e+a,o._selection&&this._updateSelection(o,0,o._selection)}if(r)C.push(n,t);else{n.splice.apply(n,[e,0].concat(t)),a=e+s;for(var u=n.length;a<u;a++)n[a]._index=a}if(i){var l=this._countCurves(),c=0<e&&e+s-1===l?e-1:e,r=c,d=Math.min(c+s,l);for(t._curves&&(i.splice.apply(i,[c,0].concat(t._curves)),r+=t._curves.length),a=r;a<d;a++)i.splice(a,0,new J(this,null,null));this._adjustCurves(c,d)}return this._changed(41),t},_adjustCurves:function(t,e){for(var n,i=this._segments,s=this._curves,r=t;r<e;r++)(n=s[r])._path=this,n._segment1=i[r],n._segment2=i[r+1]||i[0],n._changed();(n=s[this._closed&&!t?i.length-1:t-1])&&(n._segment2=i[t]||i[0],n._changed()),(n=s[e])&&(n._segment1=i[e],n._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&0<t?t-1:t},add:function(t){var e=arguments;return 1<e.length&&"number"!=typeof t?this._add(st.readList(e)):this._add([st.read(e)])[0]},insert:function(t,e){var n=arguments;return 2<n.length&&"number"!=typeof e?this._add(st.readList(n,1),t):this._add([st.read(n,1)],t)[0]},addSegment:function(){return this._add([st.read(arguments)])[0]},insertSegment:function(t){return this._add([st.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(st.readList(t))},insertSegments:function(t,e){return this._add(st.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,n){t=t||0,e=C.pick(e,this._segments.length);var i=this._segments,s=this._curves,r=i.length,a=i.splice(t,e-t),o=a.length;if(!o)return a;for(var u=0;u<o;u++){var l=a[u];l._selection&&this._updateSelection(l,l._selection,0),l._index=l._path=null}u=t;for(var c=i.length;u<c;u++)i[u]._index=u;if(s){for(u=(s=s.splice(t=0<t&&e===r+(this._closed?1:0)?t-1:t,o)).length-1;0<=u;u--)s[u]._path=null;n&&(a._curves=s.slice(1)),this._adjustCurves(t,t)}return this._changed(41),a},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();this._length=e}return this._length},getArea:function(){if(null==(n=this._area)){for(var t=this._segments,e=this._closed,n=0,i=0,s=t.length;i<s;i++){var r=i+1===s;n+=J.getArea(J.getValues(t[i],t[r?0:i+1],null,r&&!e))}this._area=n}return n},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&0<t&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,n=e.length,i=t?7:0;this._segmentSelection=i*n;for(var s=0;s<n;s++)e[s]._selection=i},_updateSelection:function(t,e,n){t._selection=n,0<(this._segmentSelection+=n-e)&&this.setSelected(!0)},divideAt:function(t){var e;return(t=this.getLocationAt(t))&&(e=t.getCurve().divideAt(t.getCurveOffset()))?e._segment1:null},splitAt:function(t){var i,e=this.getLocationAt(t),n=e&&e.index;return 1-1e-8<(t=e&&e.time)&&(n++,t=0),e=this.getCurves(),0<=n&&n<e.length?(1e-8<=t&&e[n++].divideAtTime(t),n=this.removeSegments(n,this._segments.length,!0),this._closed?(this.setClosed(!1),i=this):((i=new Ct(pt.NO_INSERT)).insertAbove(this),i.copyAttributes(this)),i._add(n,0),this.addSegment(n[0]),i):null},split:function(t,e){return null!=(e=e===K?t:(t=this.getCurves()[t])&&t.getLocationAtTime(e))?this.splitAt(e):null},join:function(t,e){var n=e||0;if(t&&t!==this){var i=t._segments,s=this.getLastSegment(),r=t.getLastSegment();if(!r)return this;s&&s._point.isClose(r._point,n)&&t.reverse(),e=t.getFirstSegment(),s&&s._point.isClose(e._point,n)?(s.setHandleOut(e._handleOut),this._add(i.slice(1))):((s=this.getFirstSegment())&&s._point.isClose(e._point,n)&&t.reverse(),r=t.getLastSegment(),s&&s._point.isClose(r._point,n)?(s.setHandleIn(r._handleIn),this._add(i.slice(0,i.length-1),0)):this._add(i.slice())),t._closed&&this._add([i[0]]),t.remove()}return(i=this.getFirstSegment())!==(t=this.getLastSegment())&&i._point.isClose(t._point,n)&&(i.setHandleIn(t._handleIn),t.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),n=t&&t.simplify,i=n?1e-7:0,s=e.length-1;0<=s;s--){var r=e[s];!r.hasHandles()&&(!r.hasLength(i)||n&&r.isCollinear(r.getNext()))&&r.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var n=this._segments[t],i=n._handleIn;n._handleIn=n._handleOut,n._handleOut=i,n._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new Nn(this,t||.25,256,!0).parts,n=e.length,i=[],s=0;s<n;s++)i.push(new st(e[s].curve.slice(0,2)));!this._closed&&0<n&&i.push(new st(e[n-1].curve.slice(6))),this.setSegments(i)},simplify:function(t){return(t=new ni(this).fit(t||2.5))&&this.setSegments(t),!!t},smooth:function(t){var e=this,n=t||{},i=(t=n.type||"asymmetric",this._segments),s=i.length,r=this._closed;function a(W,G){var X=W&&W.index;if(null!=X){var Q=W.path;if(Q&&Q!==e)throw new Error(W._class+" "+X+" of "+Q+" is not part of "+e);G&&W instanceof J&&X++}else X="number"==typeof W?W:G;return Math.min(X<0&&r?X%s:X<0?X+s:X,s-1)}var o=r&&n.from===K&&n.to===K,u=a(n.from,0),l=a(n.to,s-1);if(l<u&&(r?u-=s:(d=u,u=l,l=d)),/^(?:asymmetric|continuous)$/.test(t)){var c="asymmetric"===t,d=Math.min,m=(t=l-u+1)-1,p=t=o?d(t,4):1,b=(t=t,[]);if(r||(p=d(1,u),t=d(1,s-l-1)),!((m+=p+t)<=1)){for(var g=0,v=u-p;g<=m;g++,v++)b[g]=i[(v<0?v+s:v)%s]._point;var f=m-1,y=[T=b[0]._x+2*b[1]._x],x=[P=b[0]._y+2*b[1]._y],A=[L=2],I=[],w=[];for(g=1;g<m;g++)var N=g<f,B=N?4:c?3:8,D=N?2:c?0:1,F=(N||c?1:2)/L,L=A[g]=(N?4:c?2:7)-F,T=y[g]=B*b[g]._x+D*b[g+1]._x-F*T,P=x[g]=B*b[g]._y+D*b[g+1]._y-F*P;for(I[f]=y[f]/A[f],w[f]=x[f]/A[f],g=m-2;0<=g;g--)I[g]=(y[g]-I[g+1])/A[g],w[g]=(x[g]-w[g+1])/A[g];I[m]=(3*b[m]._x-I[f])/2,w[m]=(3*b[m]._y-w[f])/2,g=p;var q=m-t;for(v=u;g<=q;g++,v++){var O=i[v<0?v+s:v],U=I[g]-(R=O._point)._x,R=w[g]-R._y;(o||g<q)&&O.setHandleOut(U,R),(o||p<g)&&O.setHandleIn(-U,-R)}}}else for(g=u;g<=l;g++)i[g<0?g+s:g].smooth(n,!o&&g===u,!o&&g===l)},toShape:function(t){if(!this._closed)return null;var e,n,i,s,r,a,o=this._segments;function u(p,b){var g=o[p],v=g.getNext();return b=(p=o[b]).getNext(),g._handleOut.isZero()&&v._handleIn.isZero()&&p._handleOut.isZero()&&b._handleIn.isZero()&&v._point.subtract(g._point).isCollinear(b._point.subtract(p._point))}function l(p){var b=o[p],g=b.getNext(),v=b._handleOut,f=g._handleIn,y=.5522847498307936;if(v.isOrthogonal(f))return p=b._point,b=g._point,(g=new Pt(p,v,!0).intersect(new Pt(b,f,!0),!0))&&ct.isZero(v.getLength()/g.subtract(p).getLength()-y)&&ct.isZero(f.getLength()/g.subtract(b).getLength()-y)}function c(p,b){return o[p]._point.getDistance(o[b]._point)}if(!this.hasHandles()&&4===o.length&&u(0,2)&&u(1,3)&&(a=(r=o[s=1]).getPrevious(),s=r.getNext(),a._handleOut.isZero()&&r._handleIn.isZero()&&r._handleOut.isZero()&&s._handleIn.isZero()&&r._point.subtract(a._point).isOrthogonal(s._point.subtract(r._point)))?(e=fe.Rectangle,n=new it(c(0,3),c(0,1)),i=o[1]._point.add(o[2]._point).divide(2)):8===o.length&&l(0)&&l(2)&&l(4)&&l(6)&&u(1,5)&&u(3,7)?(e=fe.Rectangle,m=(n=new it(c(1,6),c(0,3))).subtract(new it(c(0,7),c(1,2))).divide(2),i=o[3]._point.add(o[4]._point).divide(2)):4===o.length&&l(0)&&l(1)&&l(2)&&l(3)&&(m=ct.isZero(c(0,2)-c(1,3))?(e=fe.Circle,c(0,2)/2):(e=fe.Ellipse,new it(c(2,0)/2,c(3,1)/2)),i=o[1]._point),e){var d=this.getPosition(!0),m=new e({center:d,size:n,radius:m,insert:!1});return m.copyAttributes(this,!0),m._matrix.prepend(this._matrix),m.rotate(i.subtract(d).getAngle()+90),t!==K&&!t||m.insertAbove(this),m}return null},toPath:"#clone",compare:function t(e){if(!e||e instanceof ke)return t.base.call(this,e);var n=this.getCurves(),i=e.getCurves(),s=n.length,r=i.length;if(!s||!r)return s==r;for(var a,o,u=n[0].getValues(),l=[],c=0,d=0,m=0;m<r;m++){var p=i[m].getValues();if(l.push(p),v=J.getOverlaps(u,p)){a=!m&&0<v[0][0]?r-1:m,o=v[0][1];break}}var b,g=Math.abs;for(p=l[a];u&&p;){var v=J.getOverlaps(u,p);if(v&&g(v[0][0]-d)<1e-8){1===(d=v[1][0])&&(u=++c<s?n[c].getValues():null,d=0);var f=v[0][1];if(g(f-o)<1e-8){if(b=b||[a,f],1===(o=v[1][1])&&(p=l[a=++a>=r?0:a]||i[a].getValues(),o=0),!u)return b[0]===a&&b[1]===o;continue}}break}return!1},_hitTestSelf:function(t,e,n,i){var s,r,a,o,u,l,c=this,d=this.getStyle(),m=this._segments,p=m.length,b=this._closed,g=e._tolerancePadding,v=g,f=e.stroke&&d.hasStroke(),y=e.fill&&d.hasFill(),x=e.curves,A=f?d.getStrokeWidth()/2:y&&0<e.tolerance||x?0:null;function I(T,P){return t.subtract(T).divide(P).length<=1}function w(T,P,q){if(!e.selected||P.isSelected()){var O=T._point;if(I(P=P!==O?P.add(O):P,v))return new Ve(q,c,{segment:T,point:P})}}function N(T,P){return(P||e.segments)&&w(T,T._point,"segment")||!P&&e.handles&&(w(T,T._handleIn,"handle-in")||w(T,T._handleOut,"handle-out"))}function B(T){o.add(T)}function D(T){var P=b||0<T._index&&T._index<p-1;return"round"===(P?s:r)?I(T._point,v):(o=new Ct({internal:!0,closed:!0}),P?T.isSmooth()||Ct._addBevelJoin(T,s,A,a,null,i,B,!0):"square"===r&&Ct._addSquareCap(T,r,A,null,i,B,!0),!o.isEmpty()&&(o.contains(t)||(T=o.getNearestLocation(t))&&I(T.getPoint(),g)))}if(null!==A&&(0<A?(s=d.getStrokeJoin(),r=d.getStrokeCap(),a=d.getMiterLimit(),v=v.add(Ct._getStrokePadding(A,i))):s=r="round"),!e.ends||e.segments||b){if(e.segments||e.handles)for(var F=0;F<p;F++)if(u=N(m[F]))return u}else if(u=N(m[0],!0)||N(m[p-1],!0))return u;if(null!==A&&((l=this.getNearestLocation(t))&&(0===(d=l.getTime())||1===d&&1<p?D(l.getSegment())||(l=null):I(l.getPoint(),v)||(l=null)),!l&&"miter"===s&&1<p))for(F=0;F<p;F++){var L=m[F];if(t.getDistance(L._point)<=a*A&&D(L)){l=L.getLocation();break}}return!l&&y&&this._contains(t)||l&&!f&&!x?new Ve("fill",this):l?new Ve(f?"stroke":"curve",this,{location:l,point:l.getPoint()}):null}},C.each(J._evaluateMethods,function(t){this[t+"At"]=function(e){return(e=this.getLocationAt(e))&&e[t]()}},{beans:!1,getLocationOf:function(){for(var t=M.read(arguments),e=this.getCurves(),n=0,i=e.length;n<i;n++){var s=e[n].getLocationOf(t);if(s)return s}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if("number"==typeof t){for(var e=this.getCurves(),n=0,i=0,s=e.length;i<s;i++){var r=n,a=e[i];if(t<(n+=a.getLength()))return a.getLocationAt(t-r)}if(0<e.length&&t<=this.getLength())return new Se(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null},getOffsetsWithTangent:function(){var t=M.read(arguments);if(t.isZero())return[];for(var e=[],n=0,i=this.getCurves(),s=0,r=i.length;s<r;s++){for(var a=i[s],o=a.getTimesWithTangent(t),u=0,l=o.length;u<l;u++){var c=n+a.getOffsetAtTime(o[u]);e.indexOf(c)<0&&e.push(c)}n+=a.length}return e}}),new function(){function t(e,n,i){var s,r,a,o,u,l,c,d,m=n._segments,p=m.length,b=new Array(6),g=!0;function v(y){var x,A;r=i?(y._transformCoordinates(i,b),s=b[0],b[1]):(s=(x=y._point)._x,x._y),g?(e.moveTo(s,r),g=!1):(l=i?(u=b[2],b[3]):(u=s+(A=y._handleIn)._x,r+A._y),u===s&&l===r&&c===a&&d===o?e.lineTo(s,r):e.bezierCurveTo(c,d,u,l,s,r)),a=s,o=r,d=i?(c=b[4],b[5]):(c=a+(A=y._handleOut)._x,o+A._y)}for(var f=0;f<p;f++)v(m[f]);n._closed&&0<p&&v(m[0])}return{_draw:function(e,n,i,s){var r=n.dontStart,a=n.dontFinish||n.clip,o=this.getStyle(),u=o.hasFill(),l=o.hasStroke(),c=o.getDashArray(),d=!mt.support.nativeDash&&l&&c&&c.length;function m(y){return c[(y%d+d)%d]}if(r||e.beginPath(),(u||l&&!d||a)&&(t(e,this,s),this._closed&&e.closePath()),!a&&(u||l)&&(this._setStyles(e,n,i),u&&(e.fill(o.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),l)){if(d){r||e.beginPath();for(var p,b=new Nn(this,.25,32,!1,s),g=b.length,v=-o.getDashOffset(),f=0;0<v;)v-=m(f--)+m(f--);for(;v<g;)p=v+m(f++),(0<v||0<p)&&b.drawPart(e,Math.max(v,0),Math.max(p,0)),v=p+m(f++)}e.stroke()}},_drawSelected:function(e,n){e.beginPath(),t(e,this,n),e.stroke(),function(i,s,r,a){if(!(a<=0))for(var o,u,l=a/2,c=a-2,d=l-1,m=new Array(6),p=0,b=s.length;p<b;p++){var g=s[p],v=g._selection;g._transformCoordinates(r,m),o=m[0],u=m[1],2&v&&f(2),4&v&&f(4),i.fillRect(o-l,u-l,a,a),0<c&&!(1&v)&&(v=i.fillStyle,i.fillStyle="#ffffff",i.fillRect(o-d,u-d,c,c),i.fillStyle=v)}function f(y){var x=m[y];y=m[y+1],o==x&&u==y||(i.beginPath(),i.moveTo(o,u),i.lineTo(x,y),i.stroke(),i.beginPath(),i.arc(x,y,l,0,2*Math.PI,!0),i.fill())}}(e,this._segments,n,mt.settings.handleSize)}}},new function(){function t(e){if(!(e=e._segments).length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var e=this._segments;1===e.length&&this.removeSegment(0),e.length||this._add([new st(M.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new st(M.read(arguments))])},cubicCurveTo:function(){var e,n=M.read(e=arguments),i=M.read(e),s=M.read(e);(e=t(this)).setHandleOut(n.subtract(e._point)),this._add([new st(s,i.subtract(s))])},quadraticCurveTo:function(){var n=M.read(e=arguments),i=M.read(e),e=t(this)._point;this.cubicCurveTo(n.add(e.subtract(n).multiply(1/3)),n.add(i.subtract(n).multiply(1/3)),i)},curveTo:function(){var n=M.read(e=arguments),i=M.read(e),s=C.pick(C.read(e),.5),r=1-s,e=t(this)._point;if((r=n.subtract(e.multiply(r*r)).subtract(i.multiply(s*s)).divide(2*s*r)).isNaN())throw new Error("Cannot put a curve through points with parameter = "+s);this.quadraticCurveTo(r,i)},arcTo:function(){var e,n=arguments,i=Math.abs,s=Math.sqrt,r=t(this),a=r._point,o=M.read(n),u=C.peek(n);if("boolean"==typeof(p=C.pick(u,!0)))var l=(g=a.add(o).divide(2)).add(g.subtract(a).rotate(p?-90:90));else if(C.remain(n)<=2)l=o,o=M.read(n);else if(!a.equals(o)){var c=it.read(n);if((d=ct.isZero)(c.width)||d(c.height))return this.lineTo(o);var d,m=C.read(n),p=!!C.read(n),b=!!C.read(n),g=a.add(o).divide(2),v=(P=a.subtract(g).rotate(-m)).x,f=P.y,A=(y=i(c.width))*y;if(1<(c=s((d=v*v)/A+(n=f*f)/(u=(x=i(c.height))*x)))&&(A=(y*=c)*y,u=(x*=c)*x),(c=i(c=(A*u-A*n-u*d)/(A*n+u*d))<1e-12?0:c)<0)throw new Error("Cannot create an arc with the given arguments");I=new M(y*f/x,-x*v/y).multiply((b===p?-1:1)*s(c)).rotate(m).add(g),m=(w=(e=(new gt).translate(I).rotate(m).scale(y,x))._inverseTransform(a)).getDirectedAngle(e._inverseTransform(o)),!p&&0<m?m-=360:p&&m<0&&(m+=360)}if(l){var I,w,y=new Pt(a.add(l).divide(2),l.subtract(a).rotate(90),!0),x=new Pt(l.add(o).divide(2),o.subtract(l).rotate(90),!0);if(l=(p=new Pt(a,o)).getSide(l),!(I=y.intersect(x,!0))){if(!l)return this.lineTo(o);throw new Error("Cannot create an arc with the given arguments")}m=(w=a.subtract(I)).getDirectedAngle(o.subtract(I)),0===(p=p.getSide(I,!0))?m=l*i(m):l===p&&(m+=m<0?360:-360)}if(m){for(var N=360<=(i=i(m))?4:Math.ceil((i-1e-7)/90),B=m/N,D=(m=B*Math.PI/360,4/3*Math.sin(m)/(1+Math.cos(m))),F=[],L=0;L<=N;L++){var T,P=o,q=null;L<N&&(q=w.rotate(90).multiply(D),e?(P=e._transformPoint(w),q=e._transformPoint(w.add(q)).subtract(P)):P=I.add(w)),L?(T=w.rotate(-90).multiply(D),e&&(T=e._transformPoint(w.add(T)).subtract(P)),F.push(new st(P,T,q))):r.setHandleOut(q),w=w.rotate(B)}this._add(F)}},lineBy:function(){var e=M.read(arguments),n=t(this)._point;this.lineTo(n.add(e))},curveBy:function(){var n=M.read(e=arguments),i=M.read(e),s=C.read(e),e=t(this)._point;this.curveTo(e.add(n),e.add(i),s)},cubicCurveBy:function(){var n=M.read(e=arguments),i=M.read(e),s=M.read(e),e=t(this)._point;this.cubicCurveTo(e.add(n),e.add(i),e.add(s))},quadraticCurveBy:function(){var n=M.read(e=arguments),i=M.read(e),e=t(this)._point;this.quadraticCurveTo(e.add(n),e.add(i))},arcBy:function(){var e=arguments,n=t(this)._point,i=n.add(M.read(e)),s=C.pick(C.peek(e),!0);this.arcTo(i,"boolean"==typeof s?s:n.add(M.read(e)))},closePath:function(e){this.setClosed(!0),this.join(this,e)}}},{_getBounds:function(t,e){return Ct[e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds"](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,n,i,s,r){var a=t[0];if(!a)return new rt;var o=new Array(6),u=a._transformCoordinates(i,new Array(6)),l=u.slice(0,2),c=l.slice(),d=new Array(2);function m(g){g._transformCoordinates(i,o);for(var v=0;v<2;v++)J._addBounds(u[v],u[v+4],o[v+2],o[v],v,r?r[v]:0,l,c,d);g=u,u=o,o=g}for(var p=1,b=t.length;p<b;p++)m(t[p]);return e&&m(a),new rt(l[0],l[1],c[0]-l[0],c[1]-l[1])},getStrokeBounds:function(t,e,n,i,s){var r=n.getStyle(),a=r.hasStroke(),o=r.getStrokeWidth(),u=a&&n._getStrokeMatrix(i,s),l=a&&Ct._getStrokePadding(o,u),c=Ct.getBounds(t,e,n,i,s,l);if(!a)return c;var d=o/2,m=r.getStrokeJoin(),p=(o=r.getStrokeCap(),r.getMiterLimit()),b=new rt(new it(l));function g(I){c=c.include(I)}function v(I){c=c.unite(b.setCenter(I._point.transform(i)))}function f(I,w){"round"===w||I.isSmooth()?v(I):Ct._addBevelJoin(I,w,d,p,i,u,g)}function y(I,w){"round"===w?v(I):Ct._addSquareCap(I,w,d,i,u,g)}var x=t.length-(e?0:1);if(0<x){for(var A=1;A<x;A++)f(t[A],m);e?f(t[0],m):(y(t[0],o),y(t[t.length-1],o))}return c},_getStrokePadding:function(t,e){if(!e)return[t,t];var n=new M(t,0).transform(e),i=new M(0,t).transform(e),s=n.getAngleInRadians(),r=n.getLength();return t=i.getLength(),e=Math.sin(s),n=Math.cos(s),i=Math.tan(s),s=Math.atan2(t*i,r),i=Math.atan2(t,i*r),[Math.abs(r*Math.cos(s)*n+t*Math.sin(s)*e),Math.abs(t*Math.sin(i)*n+r*Math.cos(i)*e)]},_addBevelJoin:function(t,e,n,i,s,r,a,o){t=(u=t.getCurve()).getPrevious(),s=u.getPoint1().transform(s),t=t.getNormalAtTime(1).multiply(n).transform(r);var u=u.getNormalAtTime(0).multiply(n).transform(r);((r=t.getDirectedAngle(u))<0||180<=r)&&(t=t.negate(),u=u.negate()),o&&a(s),a(s.add(t)),"miter"!==e||(t=new Pt(s.add(t),new M(-t.y,t.x),!0).intersect(new Pt(s.add(u),new M(-u.y,u.x),!0),!0))&&s.getDistance(t)<=i*n&&a(t),a(s.add(u))},_addSquareCap:function(t,e,n,i,s,r,a){i=t._point.transform(i),s=(t=t.getLocation()).getNormal().multiply(0===t.getTime()?n:-n).transform(s),"square"===e&&(a&&(r(i.subtract(s)),r(i.add(s))),i=i.add(s.rotate(-90))),r(i.add(s)),r(i.subtract(s))},getHandleBounds:function(t,e,n,i,s){var r,a,o,u=n.getStyle();s.stroke&&u.hasStroke()&&(o=n._getStrokeMatrix(i,s),s=n=u.getStrokeWidth()/2,"miter"===u.getStrokeJoin()&&(s=n*u.getMiterLimit()),"square"===u.getStrokeCap()&&(s=Math.max(s,n*Math.SQRT2)),r=Ct._getStrokePadding(n,o),a=Ct._getStrokePadding(s,o));for(var l=new Array(6),c=1/0,d=-c,m=c,p=d,b=0,g=t.length;b<g;b++){t[b]._transformCoordinates(i,l);for(var v=0;v<6;v+=2){var f,A,y,x=(f=v?r:a)?f[1]:0,I=l[v+1];(f=(A=l[v])-(y=f?f[0]:0))<c&&(c=f),d<(A+=y)&&(d=A),(y=I-x)<m&&(m=y),p<(x=I+x)&&(p=x)}}return new rt(c,m,d-c,p-m)}}});Ct.inject({statics:new function(){var t=.5522847498307936,e=[new st([-1,0],[0,t],[0,-t]),new st([0,-1],[-t,0],[t,0]),new st([1,0],[0,-t],[0,t]),new st([0,1],[t,0],[-t,0])];function n(s,r,a){var o=C.getNamed(a);return(a=new Ct(o&&0==o.insert&&pt.NO_INSERT))._add(s),a._closed=r,a.set(o,{insert:!0})}function i(s,r,a){for(var o=new Array(4),u=0;u<4;u++){var l=e[u];o[u]=new st(l._point.multiply(r).add(s),l._handleIn.multiply(r),l._handleOut.multiply(r))}return n(o,!0,a)}return{Line:function(){var s=arguments;return n([new st(M.readNamed(s,"from")),new st(M.readNamed(s,"to"))],!1,s)},Circle:function(){var s=arguments,r=M.readNamed(s,"center"),a=C.readNamed(s,"radius");return i(r,new it(a),s)},Rectangle:function(){var s,r,a=arguments,o=rt.readNamed(a,"rectangle"),u=it.readNamed(a,"radius",0,{readNull:!0}),l=o.getBottomLeft(!0),c=o.getTopLeft(!0),d=o.getTopRight(!0),m=o.getBottomRight(!0);return n(!u||u.isZero()?[new st(l),new st(c),new st(d),new st(m)]:(s=(u=it.min(u,o.getSize(!0).divide(2))).width,o=s*t,u=(r=u.height)*t,[new st(l.add(s,0),null,[-o,0]),new st(l.subtract(0,r),[0,u]),new st(c.add(0,r),null,[0,-u]),new st(c.add(s,0),[-o,0],null),new st(d.subtract(s,0),null,[o,0]),new st(d.add(0,r),[0,-u],null),new st(m.subtract(0,r),null,[0,u]),new st(m.subtract(s,0),[o,0])]),!0,a)},RoundRectangle:"#Rectangle",Ellipse:function(){var s=arguments,r=fe._readEllipse(s);return i(r.center,r.radius,s)},Oval:"#Ellipse",Arc:function(){var s,r=M.readNamed(s=arguments,"from"),a=M.readNamed(s,"through"),o=M.readNamed(s,"to"),u=C.getNamed(s);return(s=new Ct(u&&0==u.insert&&pt.NO_INSERT)).moveTo(r),s.arcTo(a,o),s.set(u)},RegularPolygon:function(){for(var s=arguments,r=M.readNamed(s,"center"),a=C.readNamed(s,"sides"),o=C.readNamed(s,"radius"),u=360/a,l=a%3==0,c=new M(0,l?-o:o),d=l?-1:.5,m=new Array(a),p=0;p<a;p++)m[p]=new st(r.add(c.rotate((p+d)*u)));return n(m,!0,s)},Star:function(){for(var s=arguments,r=M.readNamed(s,"center"),a=2*C.readNamed(s,"points"),o=C.readNamed(s,"radius1"),u=C.readNamed(s,"radius2"),l=360/a,c=new M(0,-1),d=new Array(a),m=0;m<a;m++)d[m]=new st(r.add(c.rotate(l*m).multiply(m%2?u:o)));return n(d,!0,s)}}}});var ke=Qe.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,n){var i=n,s=i[0];s&&"number"==typeof s[0]&&(i=[i]);for(var r=n.length-1;0<=r;r--){var a=i[r];i!==n||a instanceof Ct||(i=C.slice(i)),Array.isArray(a)?i[r]=new Ct({segments:a,insert:!1}):a instanceof ke&&(i.splice.apply(i,[r,1].concat(a.removeChildren())),a.remove())}return t.base.call(this,e,i)},reduce:function t(e){for(var n,i=this._children,s=i.length-1;0<=s;s--)(n=i[s].reduce(e)).isEmpty()&&n.remove();return i.length?t.base.call(this):((n=new Ct(pt.NO_INSERT)).copyAttributes(this),n.insertAbove(this),this.remove(),n)},isClosed:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],n=0,i=t.length;n<i;n++)C.push(e,t[n].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getArea();return e},getLength:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();return e},getPathData:function(t,e){for(var n=this._children,i=[],s=0,r=n.length;s<r;s++){var a=n[s],o=a._matrix;i.push(a.getPathData(t&&!o.isIdentity()?t.appended(o):t,e))}return i.join("")},_hitTestChildren:function t(e,n,i){return t.base.call(this,e,n.class===Ct||"path"===n.type?n:C.set({},n,{fill:!1}),i)},_draw:function(t,e,n,i){var s=this._children;if(s.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var r=0,a=s.length;r<a;r++)s[r].draw(t,e,i);e.clip||(this._setStyles(t,e,n),(n=this._style).hasFill()&&(t.fill(n.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),n.hasStroke()&&t.stroke())}},_drawSelected:function(t,e,n){for(var i=this._children,s=0,r=i.length;s<r;s++){var a=i[s],o=a._matrix;n[a._id]||a._drawSelected(t,o.isIdentity()?e:e.appended(o))}}},new function(){function t(e,n){if(e=e._children,n&&!e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return C.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(e){this[e]=function(){var n=t(this,!0);n[e].apply(n,arguments)}},{moveTo:function(){var e=t(this),n=e&&e.isEmpty()?e:new Ct(pt.NO_INSERT);n!==e&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var n=(e=t(this,!0))&&e.getLastSegment(),e=M.read(arguments);this.moveTo(n?e.add(n._point):e)},closePath:function(e){t(this,!0).closePath(e)}})},C.each(["reverse","flatten","simplify","smooth"],function(t){this[t]=function(e){for(var n,i=this._children,s=0,r=i.length;s<r;s++)n=i[s][t](e)||n;return n}},{}));Qe.inject(new function(){var t=Math.min,e=Math.max,n=Math.abs,i={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function s(f){return f._children||[f]}function r(f,y){var x=f.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(y){for(var A=s(x),I=0,w=A.length;I<w;I++)(f=A[I])._closed||f.isEmpty()||(f.closePath(1e-12),f.getFirstSegment().setHandleIn(0,0),f.getLastSegment().setHandleOut(0,0));x=x.resolveCrossings().reorient("nonzero"===x.getFillRule(),!0)}return x}function a(f,y,x,A,I){var w=new ke(pt.NO_INSERT);return w.addChildren(f,!0),w=w.reduce({simplify:y}),I&&0==I.insert||w.insertAbove(A&&x.isSibling(A)&&x.getIndex()<A.getIndex()?A:x),w.copyAttributes(x,!0),w}function o(f){return f.hasOverlap()||f.isCrossing()}function u(f,y,x,A){if(A&&(0==A.trace||A.stroke)&&/^(subtract|intersect)$/.test(x))return l(f,y,x);var I=r(f,!0),w=y&&f!==y&&r(y,!0),N=i[x];N[x]=!0,w&&(N.subtract||N.exclude)^w.isClockwise()^I.isClockwise()&&w.reverse();var B,D=p(Se.expand(I.getIntersections(w,o))),F=s(I),L=(x=w&&s(w),[]),T=[];function P(wt){for(var _t=0,xt=wt.length;_t<xt;_t++){var ot=wt[_t];C.push(L,ot._segments),C.push(T,ot.getCurves()),ot._overlapsOnly=!0}}function q(wt){for(var _t=[],xt=0,ot=wt&&wt.length;xt<ot;xt++)_t.push(T[wt[xt]]);return _t}if(D.length){P(F),x&&P(x);for(var O=new Array(T.length),R=0,U=T.length;R<U;R++)O[R]=T[R].getValues();var W=Pe.findCurveBoundsCollisions(O,O,0,!0),G={};for(R=0;R<T.length;R++){var X=T[R],Q=X._path._id;(G[Q]=G[Q]||{})[X.getIndex()]={hor:q(W[R].hor),ver:q(W[R].ver)}}for(R=0,U=D.length;R<U;R++)g(D[R]._segment,I,w,G,N);for(R=0,U=L.length;R<U;R++){var et=L[R],tt=et._intersection;et._winding||g(et,I,w,G,N),tt&&tt._overlap||(et._path._overlapsOnly=!1)}B=v(L,N)}else B=m(x?F.concat(x):F.slice(),function(wt){return!!N[wt]});return a(B,!0,f,y,A)}function l(f,y,x){var A=r(f),I=r(y),w=A.getIntersections(I,o),N="subtract"===x,B="divide"===x,D={},F=[];function L(q){return!D[q._id]&&(B||I.contains(q.getPointAt(q.getLength()/2))^N)&&(F.unshift(q),D[q._id]=!0)}for(var T=w.length-1;0<=T;T--){var P=w[T].split();P&&(L(P)&&P.getFirstSegment().setHandleIn(0,0),A.getLastSegment().setHandleOut(0,0))}return L(A),a(F,!1,f,y)}function c(f,y){for(var x=f;x;){if(x===y)return;x=x._previous}for(;f._next&&f._next!==y;)f=f._next;if(!f._next){for(;y._previous;)y=y._previous;(f._next=y)._previous=f}}function d(f){for(var y=f.length-1;0<=y;y--)f[y].clearHandles()}function m(f,y,x){var A=f&&f.length;if(A){var I=C.each(f,function(G,X){this[G._id]={container:null,winding:G.isClockwise()?1:-1,index:X}},{}),w=f.slice().sort(function(G,X){return n(X.getArea())-n(G.getArea())}),N=w[0],B=Pe.findItemBoundsCollisions(w,null,ct.GEOMETRIC_EPSILON);null==x&&(x=N.isClockwise());for(var D=0;D<A;D++){var F,L=w[D],T=I[L._id],P=0,q=B[D];if(q)for(var O=null,R=q.length-1;0<=R;R--)if(q[R]<D){O=O||L.getInteriorPoint();var U=w[q[R]];if(U.contains(O)){var W=I[U._id];T.winding+=P=W.winding,T.container=W.exclude?W.container:U;break}}y(T.winding)===y(P)?(T.exclude=!0,f[T.index]=null):L.setClockwise((F=T.container)?!F.isClockwise():x)}}return f}function p(f,y,x){var A,I,w,N=y&&[],B=!1,D=x||[],F=x&&{};function L(tt){return tt._path._id+"."+tt._segment1._index}for(var T=(x&&x.length)-1;0<=T;T--)(P=x[T])._path&&(F[L(P)]=!0);for(T=f.length-1;0<=T;T--){var P,O=(q=f[T])._time,R=O,U=y&&!y(q);if((P=q._curve)&&(P!==I?(B=!P.hasHandles()||F&&F[L(P)],A=[],w=null,I=P):1e-8<=w&&(O/=w)),U)A&&A.push(q);else{if(y&&N.unshift(q),w=R,O<1e-8)W=P._segment1;else if(1-1e-8<O)W=P._segment2;else{R=P.divideAtTime(O,!0),B&&D.push(P,R);for(var W=R._segment1,G=A.length-1;0<=G;G--){var X=A[G];X._time=(X._time-O)/(1-O)}}q._setSegment(W);var Q=W._intersection,q=q._intersection;if(Q){c(Q,q);for(var et=Q;et;)c(et._intersection,Q),et=et._next}else W._intersection=q}}return x||d(D),N||f}function b(f,y,x,A,I){var w,N=Array.isArray(y)?y:y[x?"hor":"ver"],B=x?1:0,D=1^B,F=[f.x,f.y],L=F[B],T=F[D],P=1e-6,q=L-1e-9,O=L+1e-9,R=0,U=0,W=0,G=0,X=!1,Q=!1,et=1,tt=[];function wt(Lt){if(T<=e(le=Lt[D+0],ce=Lt[D+2],Xt=Lt[D+4],Yt=Lt[D+6])&&T>=t(le,ce,Xt,Yt))for(var cn,le,ce,Xt,Yt,Te=q>e(le=Lt[B+0],ce=Lt[B+2],Xt=Lt[B+4],Yt=Lt[B+6])||O<t(le,ce,Xt,Yt)?[Lt]:J.getMonoCurves(Lt,x),dn=0,Sn=Te.length;dn<Sn;dn++)if(cn=function(pe){var re=pe[D+0];if(!(T<t(re,ae=pe[D+6])||T>e(re,ae))){var ye=pe[B+0],te=pe[B+2],Ie=pe[B+4],Ue=pe[B+6];if(re!==ae){var Xe=T===re?0:T!==ae&&!(q>e(ye,te,Ie,Ue)||O<t(ye,te,Ie,Ue))&&0<J.solveCubic(pe,D,T,tt,0,1)?tt[0]:1,we=0===Xe?ye:1===Xe?Ue:J.getPoint(pe,Xe)[x?"y":"x"],ae=(te=ae<re?1:-1,Ie=Mt[D]>Mt[D+6]?1:-1,Mt[B+6]);return T!==re?(we<q?W+=te:O<we?G+=te:X=!0,L-P<we&&we<L+P&&(et/=2)):(te!=Ie?ye<q?W+=te:O<ye&&(G+=te):ye!=ae&&(ae<O&&O<we?(G+=te,X=!0):q<ae&&we<q&&(W+=te,X=!0)),et/=4),Mt=pe,!I&&q<we&&we<O&&0===J.getTangent(pe,Xe)[x?"x":"y"]&&b(f,y,!x,A,!0)}(ye<O&&q<Ue||Ue<O&&q<ye)&&(X=!0)}}(Te[dn]))return cn}for(var _t=0,xt=N.length;_t<xt;_t++){var ot=N[_t],It=ot._path,lt=ot.getValues();if(!(_t&&N[_t-1]._path===It||(Mt=null,It._closed||(w=J.getValues(It.getLastCurve().getSegment2(),ot.getSegment1(),null,!A))[D]!==w[D+6]&&(Mt=w),Mt)))for(var Mt=lt,Zt=It.getLastCurve();Zt&&Zt!==ot;){var ee=Zt.getValues();if(ee[D]!==ee[D+6]){Mt=ee;break}Zt=Zt.getPrevious()}if(lt=wt(lt))return lt;if(_t+1===xt||N[_t+1]._path!==It){if(w&&(lt=wt(w)))return lt;R+=W=!X||W||G?W:G=It.isClockwise(A)^x?1:-1,U+=G,W=G=0,X=X&&!(Q=!0),w=null}}return R=n(R),U=n(U),{winding:e(R,U),windingL:R,windingR:U,quality:et,onPath:Q}}function g(f,y,x,A,I){var w=[],N=f,B=0;do{}while((U=f.getCurve())&&(T=U.getLength(),w.push({segment:f,curve:U,length:T}),B+=T),(f=f.getNext())&&!f._intersection&&f!==N);for(var D=[.5,.25,.75],F={winding:0,quality:-1},L=0;L<D.length&&F.quality<.5;L++)for(var T=B*D[L],P=0,q=w.length;P<q;P++){var R=(O=w[P]).length;if(T<=R){var U,W=(U=O.curve)._path,X=(G=W._parent)instanceof ke?G:W,Q=ct.clamp(U.getTimeAt(T),.001,.999),et=U.getPointAtTime(Q),O=n(U.getTangentAtTime(Q).y)<Math.SQRT1_2,G=null;if(I.subtract&&x&&(Q=(X===y?x:y)._getWinding(et,O,!0),X===y&&Q.winding||X===x&&!Q.winding)){if(Q.quality<1)continue;G={winding:0,quality:1}}(G=G||b(et,A[W._id][U.getIndex()],O,!0)).quality>F.quality&&(F=G);break}T-=R}for(P=w.length-1;0<=P;P--)w[P].segment._winding=F}function v(f,y){var x,A=[];function I(ot){return!(!ot||ot._visited||y&&(!y[(ot=ot._winding||{}).winding]||y.unite&&2===ot.winding&&ot.windingL&&ot.windingR))}function w(ot){if(ot)for(var It=0,lt=x.length;It<lt;It++)if(ot===x[It])return!0;return!1}function N(ot){for(var It=ot._segments,lt=0,Mt=It.length;lt<Mt;lt++)It[lt]._visited=!0}f.sort(function(ot,It){var lt=ot._intersection,Mt=It._intersection,Zt=!(!lt||!lt._overlap),Lt=ot._path,le=It._path;return Zt^!(!Mt||!Mt._overlap)?Zt?1:-1:!lt^!Mt?lt?1:-1:Lt!==le?Lt._id-le._id:ot._index-It._index});for(var B=0,D=f.length;B<D;B++){var F,L,T,P,q,O=f[B],R=I(O),U=null,W=!1,G=!0,X=[];for(R&&O._path._overlapsOnly&&(P=O._path).compare(q=O._intersection._segment._path)&&(P.getArea()&&A.push(P.clone(!1)),N(P),N(q),R=!1);R;){var Q=!U,et=function(ot,It){var lt=ot._intersection,Mt=lt,Zt=[];function ee(Lt,le){for(;Lt&&Lt!==le;){var ce,Xt=Lt._segment,Yt=Xt&&Xt._path;Yt&&(Yt=(ce=Xt.getNext()||Yt.getFirstSegment())._intersection,Xt!==ot&&(w(Xt)||w(ce)||ce&&I(Xt)&&(I(ce)||Yt&&I(Yt._segment)))&&Zt.push(Xt),It&&x.push(Xt)),Lt=Lt._next}}if(It&&(x=[ot]),lt){for(ee(lt);lt&&lt._previous;)lt=lt._previous;ee(lt,Mt)}return Zt}(O,Q),tt=et.shift(),wt=!(W=!Q&&(w(O)||w(tt)))&&tt;if(Q&&(U=new Ct(pt.NO_INSERT),F=null),W){(O.isFirst()||O.isLast())&&(G=O._path._closed),O._visited=!0;break}if(wt&&F&&(X.push(F),F=null),F||(wt&&et.push(O),F={start:U._segments.length,crossings:et,visited:L=[],handleIn:T}),!I(O=wt?tt:O)){U.removeSegments(F.start);for(var _t=0,xt=L.length;_t<xt;_t++)L[_t]._visited=!1;for(L.length=0;(O=F&&F.crossings.shift())&&O._path||(O=null,(F=X.pop())&&(L=F.visited,T=F.handleIn)),F&&!I(O););if(!O)break}tt=O.getNext(),U.add(new st(O._point,T,tt&&O._handleOut)),O._visited=!0,L.push(O),O=tt||O._path.getFirstSegment(),T=tt&&tt._handleIn}W&&(G&&(U.getFirstSegment().setHandleIn(T),U.setClosed(G)),0!==U.getArea()&&A.push(U))}return A}return{_getWinding:function(f,y,x){return b(f,this.getCurves(),y,x)},unite:function(f,y){return u(this,f,"unite",y)},intersect:function(f,y){return u(this,f,"intersect",y)},subtract:function(f,y){return u(this,f,"subtract",y)},exclude:function(f,y){return u(this,f,"exclude",y)},divide:function(f,y){return y&&(0==y.trace||y.stroke)?l(this,f,"divide"):a([this.subtract(f,y),this.intersect(f,y)],!0,this,f,y)},resolveCrossings:function(){var f=this._children,y=f||[this];function x(O,R){return(O=O&&O._intersection)&&O._overlap&&O._path===R}var q,A=!1,I=!1,w=this.getIntersections(null,function(O){return O.hasOverlap()?A=!0:O.isCrossing()&&(I=!0)}),N=A&&I&&[];if(w=Se.expand(w),A)for(var B=p(w,function(O){return O.hasOverlap()},N),D=B.length-1;0<=D;D--){var L=(F=B[D])._path,T=F._segment,P=T.getPrevious(),F=T.getNext();x(P,L)&&x(F,L)&&(T.remove(),P._handleOut._set(0,0),F._handleIn._set(0,0),P===T||P.getCurve().hasLength()||(F._handleIn.set(P._handleIn),P.remove()))}return I&&(p(w,A&&function(O){var R=O.getCurve(),U=O.getSegment(),W=(O=(W=O._intersection)._curve,W._segment);if(R&&O&&R._path&&O._path)return!0;U&&(U._intersection=null),W&&(W._intersection=null)},N),N&&d(N),y=v(C.each(y,function(O){C.push(this,O._segments)},[]))),1<(N=y.length)&&f?(y!==f&&this.setChildren(y),q=this):1!==N||f||(y[0]!==this&&this.setSegments(y[0].removeSegments()),q=this),q||((q=new ke(pt.NO_INSERT)).addChildren(y),(q=q.reduce()).copyAttributes(this),this.replaceWith(q)),q},reorient:function(f,y){var x=this._children;return x&&x.length?this.setChildren(m(this.removeChildren(),function(A){return!!(f?A:1&A)},y)):y!==K&&this.setClockwise(y),this},getInteriorPoint:function(){var f=this.getBounds().getCenter(!0);if(!this.contains(f)){for(var y=this.getCurves(),x=f.y,A=[],I=[],w=0,N=y.length;w<N;w++){var B=y[w].getValues(),D=B[1],F=B[3],L=B[5],T=B[7];if(x>=t(D,F,L,T)&&x<=e(D,F,L,T))for(var P=J.getMonoCurves(B),q=0,O=P.length;q<O;q++){var R=P[q],U=R[1],W=R[7];U!==W&&(U<=x&&x<=W||W<=x&&x<=U)&&(R=x===U?R[0]:x===W?R[6]:1===J.solveCubic(R,1,x,I,0,1)?J.getPoint(R,I[0]).x:(R[0]+R[6])/2,A.push(R))}}1<A.length&&(A.sort(function(G,X){return G-X}),f.x=(A[0]+A[1])/2)}return f}}});var Nn=C.extend({_class:"PathFlattener",initialize:function(t,e,n,i,s){var r,a=[],o=[],u=0,l=1/(n||32),c=t._segments,d=c[0];function m(g,v){v=J.getValues(g,v,s),a.push(v),function f(y,x,A,I){var w,N;!(l<I-A)||i&&J.isStraight(y)||J.isFlatEnough(y,e||.25)?(w=y[6]-y[0],N=y[7]-y[1],0<(N=Math.sqrt(w*w+N*N))&&o.push({offset:u+=N,curve:y,index:x,time:I})):(f((N=J.subdivide(y,.5))[0],x,A,y=(A+I)/2),f(N[1],x,y,I))}(v,g._index,0,1)}for(var p=1,b=c.length;p<b;p++)m(d,r=c[p]),d=r;t._closed&&m(r||d,c[0]),this.curves=a,this.parts=o,this.length=u,this.index=0},_get:function(t){for(var e,n=this.parts,i=n.length,s=this.index;(e=s)&&!(n[--s].offset<t););for(;e<i;e++){var r=n[e];if(r.offset>=t){var a,o=(a=n[(this.index=e)-1])&&a.index===r.index?a.time:0;return{index:r.index,time:o+(r.time-o)*(t-(a=a?a.offset:0))/(r.offset-a)}}}return{index:n[i-1].index,time:1}},drawPart:function(t,e,n){for(var i=this._get(e),s=this._get(n),r=i.index,a=s.index;r<=a;r++){var o=J.getPart(this.curves[r],r===i.index?i.time:0,r===s.index?s.time:1);r===i.index&&t.moveTo(o[0],o[1]),t.bezierCurveTo.apply(t,o.slice(2))}}},C.each(J._evaluateMethods,function(t){this[t+"At"]=function(e){return e=this._get(e),J[t](this.curves[e.index],e.time)}},{})),ni=C.extend({initialize:function(t){for(var e,n=this.points=[],i=t._segments,s=(t=t._closed,0),r=i.length;s<r;s++){var a=i[s].point;e&&e.equals(a)||n.push(e=a.clone())}t&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=t},fit:function(t){var e=this.points,n=e.length,i=null;return 0<n&&(i=[new st(e[0])],1<n&&(this.fitCubic(i,t,0,n-1,e[1].subtract(e[0]),e[n-2].subtract(e[n-1])),this.closed&&(i.shift(),i.pop()))),i},fitCubic:function(t,e,n,i,s,r){var a=this.points;if(i-n!=1){for(var o,u=this.chordLengthParameterize(n,i),l=Math.max(e,e*e),c=!0,d=0;d<=4;d++){var m=this.generateBezier(n,i,u,s,r),p=this.findMaxError(n,i,m,u);if(p.error<e&&c)return void this.addCurve(t,m);if(o=p.index,p.error>=l)break;c=this.reparameterize(n,i,u,m),l=p.error}var b=a[o-1].subtract(a[o+1]);this.fitCubic(t,e,n,o,s,b),this.fitCubic(t,e,o,i,b.negate(),r)}else{var g=a[n];a=g.getDistance(b=a[i])/3,this.addCurve(t,[g,g.add(s.normalize(a)),b.add(r.normalize(a)),b])}},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new st(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,n,i,s){for(var w=Math.abs,r=this.points,a=r[t],o=r[e],u=[[0,0],[0,0]],l=[0,0],c=0,d=e-t+1;c<d;c++){var g=(p=1-(m=n[c]))*p*p,v=(b=3*m*p)*p,f=b*m,p=m*m*m,b=i.normalize(v),m=s.normalize(f);p=r[t+c].subtract(a.multiply(g+v)).subtract(o.multiply(f+p)),u[0][0]+=b.dot(b),u[0][1]+=b.dot(m),u[1][0]=u[0][1],u[1][1]+=m.dot(m),l[0]+=b.dot(p),l[1]+=m.dot(p)}var y,x;1e-12<w(e=u[0][0]*u[1][1]-u[1][0]*u[0][1])?(x=u[0][0]*l[1]-u[1][0]*l[0],y=(l[0]*u[1][1]-l[1]*u[0][1])/e,x/=e):(N=u[1][0]+u[1][1],y=x=1e-12<w(e=u[0][0]+u[0][1])?l[0]/e:1e-12<w(N)?l[1]/N:0);var A,I,N=1e-12*(w=o.getDistance(a));return y<N||x<N?y=x=w/3:(N=o.subtract(a),A=i.normalize(y),I=s.normalize(x),A.dot(N)-I.dot(N)>w*w&&(y=x=w/3,A=I=null)),[a,a.add(A||i.normalize(y)),o.add(I||s.normalize(x)),o]},reparameterize:function(t,e,n,i){for(var s=t;s<=e;s++)n[s-t]=this.findRoot(i,this.points[s],n[s-t]);s=1;for(var r=n.length;s<r;s++)if(n[s]<=n[s-1])return!1;return!0},findRoot:function(t,e,n){for(var i=[],s=[],r=0;r<=2;r++)i[r]=t[r+1].subtract(t[r]).multiply(3);for(r=0;r<=1;r++)s[r]=i[r+1].subtract(i[r]).multiply(2);var a=this.evaluate(3,t,n),o=this.evaluate(2,i,n),u=this.evaluate(1,s,n);return e=a.subtract(e),u=o.dot(o)+e.dot(u),ct.isMachineZero(u)?n:n-e.dot(o)/u},evaluate:function(t,e,n){for(var i=e.slice(),s=1;s<=t;s++)for(var r=0;r<=t-s;r++)i[r]=i[r].multiply(1-n).add(i[r+1].multiply(n));return i[0]},chordLengthParameterize:function(t,e){for(var n=[0],i=t+1;i<=e;i++)n[i-t]=n[i-t-1]+this.points[i].getDistance(this.points[i-1]);i=1;for(var s=e-t;i<=s;i++)n[i]/=n[s];return n},findMaxError:function(t,e,n,i){for(var s=Math.floor((e-t+1)/2),r=0,a=t+1;a<e;a++){var o;r<=(o=(o=this.evaluate(3,n,i[a-t]).subtract(this.points[a])).x*o.x+o.y*o.y)&&(r=o,s=a)}return{error:r,index:s}}}),Z=pt.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var e=t&&C.isPlainObject(t)&&t.x===K&&t.y===K;this._initialize(e&&t,!e&&M.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),Ke=Z.extend({_class:"PointText",initialize:function(){Z.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new qe(t.x,t.y,this,"setPoint")},setPoint:function(){var t=M.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,n){if(this._content){this._setStyles(t,e,n);var i=this._lines,s=(n=this._style).hasFill(),r=n.hasStroke(),a=n.getLeading(),o=t.shadowColor;t.font=n.getFontStyle(),t.textAlign=n.getJustification();for(var u=0,l=i.length;u<l;u++){t.shadowColor=o;var c=i[u];s&&(t.fillText(c,0,0),t.shadowColor="rgba(0,0,0,0)"),r&&t.strokeText(c,0,0),t.translate(0,a)}}},_getBounds:function(t,e){var s=(i=this._lines).length,r=(n=this._style).getJustification(),a=n.getLeading(),n=this.getView().getTextWidth(n.getFontStyle(),i),i=0;return"left"!==r&&(i-=n/("center"===r?2:1)),a=new rt(i,s?-.75*a:0,n,s*a),t?t._transformBounds(a,a):a}}),zt=C.extend(new function(){var t,e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},n={},i={transparent:[0,0,0,0]},s=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],r={"rgb-hsb":function(a,o,u){var l=Math.max(a,o,u),c=l-Math.min(a,o,u);return[0==c?0:60*(l==a?(o-u)/c+(o<u?6:0):l==o?(u-a)/c+2:(a-o)/c+4),0===l?0:c/l,l]},"hsb-rgb":function(a,o,u){a=(a/60%6+6)%6;var l=Math.floor(a);return[(a=[u,u*(1-o),u*(1-o*(a-=l)),u*(1-o*(1-a))])[(l=s[l])[0]],a[l[1]],a[l[2]]]},"rgb-hsl":function(a,o,u){var l=Math.max(a,o,u),c=Math.min(a,o,u),d=l-c,m=0==d,p=(l+c)/2;return[m?0:60*(l==a?(o-u)/d+(o<u?6:0):l==o?(u-a)/d+2:(a-o)/d+4),m?0:p<.5?d/(l+c):d/(2-l-c),p]},"hsl-rgb":function(a,o,u){if(0===o)return[u,u,u];for(var l=[(a=(a/360%1+1)%1)+1/3,a,a-1/3],c=u<.5?u*(1+o):u+o-u*o,d=2*u-c,m=[],p=0;p<3;p++){var b=l[p];b<0&&(b+=1),1<b&&--b,m[p]=6*b<1?d+6*(c-d)*b:2*b<1?c:3*b<2?d+(c-d)*(2/3-b)*6:d}return m},"rgb-gray":function(a,o,u){return[.2989*a+.587*o+.114*u]},"gray-rgb":function(a){return[a,a,a]},"gray-hsb":function(a){return[0,0,a]},"gray-hsl":function(a){return[0,0,a]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return C.each(e,function(a,o){n[o]=[],C.each(a,function(u,l){var c=C.capitalize(u),d=/^(hue|saturation)$/.test(u),m=n[o][l]="gradient"===o?"gradient"===u?function(p){var b=this._components[0];return b!==(p=he.read(Array.isArray(p)?p:arguments,0,{readNull:!0}))&&(b&&b._removeOwner(this),p&&p._addOwner(this)),p}:function(){return M.read(arguments,0,{readNull:"highlight"===u,clone:!0})}:function(p){return null==p||isNaN(p)?0:+p};this["get"+c]=function(){return(this._type===o||d&&/^hs[bl]$/.test(this._type)?this._components:this._convert(o))[l]},this["set"+c]=function(p){this._type===o||d&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(o),this._properties=e[o],this._type=o),this._components[l]=m.call(this,p),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function a(o){var u,l,w,c=arguments,d=this.__read,m=0,p=null!=(o=Array.isArray(o)?(c=o)[0]:o)&&typeof o;if("string"===p&&o in e&&(b=o,o=c[1],Array.isArray(o)?(u=o,v=c[2]):(d&&(m=1),c=C.slice(c,1),p=typeof o)),!u){if(l="number"===p?c:"object"===p&&null!=o.length?o:null){var b=b||(3<=l.length?"rgb":"gray"),g=e[b].length,v=l[g];d&&(m+=l===arguments?g+(null!=v?1:0):1),l.length>g&&(l=C.slice(l,0,g))}else if("string"===p)b=(g=function(N){var B=N.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||N.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),D="rgb";if(B)for(var F=B[4]?4:3,L=new Array(F),T=0;T<F;T++){var P=B[T+1];L[T]=parseInt(1==P.length?P+P:P,16)/255}else if(B=N.match(/^(rgb|hsl)a?\((.*)\)$/)){D=B[1],L=B[2].trim().split(/[,\s]+/g);for(var q="hsl"===D,O=(T=0,Math.min(L.length,4));T<O;T++){var R,U=L[T];P=parseFloat(U),q?0===T?(R=U.match(/([a-z]*)$/)[1],P*={turn:360,rad:180/Math.PI,grad:.9}[R]||1):T<3&&(P/=100):T<3&&(P/=/%$/.test(U)?100:255),L[T]=P}}else{var W,G=i[N];L=(G=G||(yt?(t||((t=Ht.getContext(1,1)).globalCompositeOperation="copy"),t.fillStyle="rgba(0,0,0,0)",t.fillStyle=N,t.fillRect(0,0,1,1),W=t.getImageData(0,0,1,1).data,i[N]=[W[0]/255,W[1]/255,W[2]/255]):[0,0,0])).slice()}return[D,L]}(o))[0],4===(u=g[1]).length&&(v=u[3],u.length--);else if("object"===p)if(o.constructor===a){if(b=o._type,u=o._components.slice(),v=o._alpha,"gradient"===b)for(var f=1,y=u.length;f<y;f++){var x=u[f];x&&(u[f]=x.clone())}}else if(o.constructor===he)b="gradient",l=c;else{var A=e[b="hue"in o?"lightness"in o?"hsl":"hsb":"gradient"in o||"stops"in o||"radial"in o?"gradient":"gray"in o?"gray":"rgb"],I=n[b];for(this._components=u=[],f=0,y=A.length;f<y;f++)null==(w=o[A[f]])&&!f&&"gradient"===b&&"stops"in o&&(w={stops:o.stops,radial:o.radial}),null!=(w=I[f].call(this,w))&&(u[f]=w);v=o.alpha}d&&b&&(m=1)}if(this._type=b||"rgb",!u)for(this._components=u=[],f=0,y=(I=n[this._type]).length;f<y;f++)null!=(w=I[f].call(this,l&&l[f]))&&(u[f]=w);return this._components=u,this._properties=e[this._type],this._alpha=v,d&&(this.__read=m),this},set:"#initialize",_serialize:function(a,o){var u=this.getComponents();return C.serialize(/^(gray|rgb)$/.test(this._type)?u:[this._type].concat(u),a,!0,o)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(a){var o;return this._type===a?this._components.slice():(o=r[this._type+"-"+a])?o.apply(this,this._components):r["rgb-"+a].apply(this,r[this._type+"-rgb"].apply(this,this._components))},convert:function(a){return new zt(a,this._convert(a),this._alpha)},getType:function(){return this._type},setType:function(a){this._components=this._convert(a),this._properties=e[a],this._type=a},getComponents:function(){var a=this._components.slice();return null!=this._alpha&&a.push(this._alpha),a},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(a){this._alpha=null==a?null:Math.min(Math.max(a,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(a){var o=C.isPlainValue(a,!0)?zt.read(arguments):a;return o===this||o&&this._class===o._class&&this._type===o._type&&this.getAlpha()===o.getAlpha()&&C.equals(this._components,o._components)||!1},toString:function(){for(var a=this._properties,o=[],u="gradient"===this._type,l=Wt.instance,c=0,d=a.length;c<d;c++){var m=this._components[c];null!=m&&o.push(a[c]+": "+(u?m:l.number(m)))}return null!=this._alpha&&o.push("alpha: "+l.number(this._alpha)),"{ "+o.join(", ")+" }"},toCSS:function(a){var o=this._convert("rgb"),u=a||null==this._alpha?1:this._alpha;function l(c){return Math.round(255*(c<0?0:1<c?1:c))}return o=[l(o[0]),l(o[1]),l(o[2])],u<1&&o.push(u<0?0:u),a?"#"+((1<<24)+(o[0]<<16)+(o[1]<<8)+o[2]).toString(16).slice(1):(4==o.length?"rgba(":"rgb(")+o.join(",")+")"},toCanvasStyle:function(a,o){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var u,c=(l=this._components)[0],d=c._stops,m=l[1],p=l[2],l=l[3];(o=o&&o.inverted())&&(m=o._transformPoint(m),p=o._transformPoint(p),l=l&&o._transformPoint(l)),u=c._radial?(o=p.getDistance(m),!l||(c=l.subtract(m)).getLength()>o&&(l=m.add(c.normalize(o-.1))),a.createRadialGradient((l=l||m).x,l.y,0,m.x,m.y,o)):a.createLinearGradient(m.x,m.y,p.x,p.y);for(var b=0,g=d.length;b<g;b++){var v=d[b],f=v._offset;u.addColorStop(null==f?b/(g-1):f,v._color.toCanvasStyle())}return this._canvasStyle=u},transform:function(a){if("gradient"===this._type){for(var o=this._components,u=1,l=o.length;u<l;u++){var c=o[u];a._transformPoint(c,c,!0)}this._changed()}},statics:{_types:e,random:function(){var a=Math.random;return new zt(a(),a(),a())},_setOwner:function(a,o,u){return a&&!(a=a._owner&&o&&a._owner!==o?a.clone():a)._owner^!o&&(a._owner=o||null,a._setter=u||null),a}}})},new function(){return C.each({add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}},function(t,e){this[e]=function(n){n=zt.read(arguments);for(var i=this._type,s=this._components,r=n._convert(i),a=0,o=s.length;a<o;a++)r[a]=t(s[a],r[a]);return new zt(i,r,null!=this._alpha?t(this._alpha,n.getAlpha()):null)}},{})}),he=C.extend({_class:"Gradient",initialize:function(t,e){this._id=Ze.get(),t&&C.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,function(){return C.serialize([this._stops,this._radial],t,!0,e)})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){-1!=(t=this._owners?this._owners.indexOf(t):-1)&&(this._owners.splice(t,1),this._owners.length||(this._owners=K))},clone:function(){for(var t=[],e=0,n=this._stops.length;e<n;e++)t[e]=this._stops[e].clone();return new he(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var e=this._stops;if(e)for(var n=0,i=e.length;n<i;n++)e[n]._owner=K;for(n=0,i=(e=this._stops=hn.readList(t,0,{clone:!0})).length;n<i;n++)e[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,n=t._stops,i=e.length;if(i===n.length){for(var s=0;s<i;s++)if(!e[s].equals(n[s]))return!1;return!0}}return!1}}),hn=C.extend({_class:"GradientStop",initialize:function(t,e){var n=t,i=e;"object"==typeof t&&e===K&&(Array.isArray(t)&&"number"!=typeof t[0]?(n=t[0],i=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(n=t.color,i=t.offset||t.rampPoint||0)),this.setColor(n),this.setOffset(i)},clone:function(){return new hn(this._color.clone(),this._offset)},_serialize:function(t,e){var n=this._color,i=this._offset;return C.serialize(null==i?[n]:[n,i],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){zt._setOwner(this._color,null),this._color=zt._setOwner(zt.read(arguments,0),this,"setColor"),this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),Je=C.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new M,selectedColor:null},e=C.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=C.set({},e,{fillColor:new zt}),i={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},s={beans:!0},r={_class:"Style",beans:!0,initialize:function(a,o,u){this._values={},this._owner=o,this._project=o&&o._project||u||mt.project,this._defaults=!o||o instanceof Ne?e:o instanceof Z?n:t,a&&this.set(a)}};return C.each(e,function(a,o){var u=/Color$/.test(o),l="shadowOffset"===o,c=C.capitalize(o),d=i[o],m="set"+c,p="get"+c;r[m]=function(b){var g,v=this._owner,f=v&&v._children,y=f&&0<f.length&&!(v instanceof ke);if(y)for(var x=0,A=f.length;x<A;x++)f[x]._style[m](b);"selectedColor"!==o&&y||!(o in this._defaults)||(g=this._values[o])!==b&&(u&&(g&&(zt._setOwner(g,null),g._canvasStyle=null),b&&b.constructor===zt&&(b=zt._setOwner(b,v,y&&m))),this._values[o]=b,v&&v._changed(d||129))},r[p]=function(b){var g,v=this._owner,f=v&&v._children,y=f&&0<f.length&&!(v instanceof ke);if(y&&!b)for(var x=0,A=f.length;x<A;x++){var I=f[x]._style[p]();if(x){if(!C.equals(g,I))return K}else g=I}else o in this._defaults&&((g=this._values[o])===K?(g=this._defaults[o])&&g.clone&&(g=g.clone()):!(b=u?zt:l?M:null)||g&&g.constructor===b||(this._values[o]=g=b.read([g],0,{readNull:!0,clone:!0})));return g&&u?zt._setOwner(g,v,y&&m):g},s[p]=function(b){return this._style[p](b)},s[m]=function(b){this._style[m](b)}}),C.each({Font:"FontFamily",WindingRule:"FillRule"},function(a,o){var u="get"+o;o="set"+o,r[u]=s[u]="#get"+a,r[o]=s[o]="#set"+a}),pt.inject(s),r},{set:function(t){var e,n=t instanceof Je,i=n?t._values:t;if(i)for(var s in i)s in this._defaults&&(this[s]=(e=i[s])&&n&&e.clone?e.clone():e)},equals:function(t){function e(n,i,s){var r,a=n._values,o=i._values,u=i._defaults;for(r in a){var c=o[r];if(!(s&&r in o||C.equals(a[r],c===K?u[r]:c)))return!1}return!0}return t===this||t&&this._class===t._class&&e(this,t)&&e(t,this,!0)||!1},_dispose:function(){var t=this.getFillColor();t&&(t._canvasStyle=null),(t=this.getStrokeColor())&&(t._canvasStyle=null),(t=this.getShadowColor())&&(t._canvasStyle=null)},hasFill:function(){var t=this.getFillColor();return!!t&&0<t.alpha},hasStroke:function(){var t=this.getStrokeColor();return!!t&&0<t.alpha&&0<this.getStrokeWidth()},hasShadow:function(){var t=this.getShadowColor();return!!t&&0<t.alpha&&(0<this.getShadowBlur()||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!=e?e:1.2*n}}),Rt=new function(){function t(e,n,i,s){for(var r=["","webkit","moz","Moz","ms","o"],a=n[0].toUpperCase()+n.substring(1),o=0;o<6;o++){var u;if((u=(u=r[o])?u+a:n)in e){if(!i)return e[u];e[u]=s;break}}}return{getStyles:function(e){var n;return(n=(n=e&&9!==e.nodeType?e.ownerDocument:e)&&n.defaultView)&&n.getComputedStyle(e,"")},getBounds:function(e,n){var i,s=e.ownerDocument,r=s.body,a=s.documentElement;try{i=e.getBoundingClientRect()}catch(u){i={left:0,top:0,width:0,height:0}}var o=i.left-(a.clientLeft||r.clientLeft||0);return e=i.top-(a.clientTop||r.clientTop||0),n||(o+=(s=s.defaultView).pageXOffset||a.scrollLeft||r.scrollLeft,e+=s.pageYOffset||a.scrollTop||r.scrollTop),new rt(o,e,i.width,i.height)},getViewportBounds:function(e){e=(n=e.ownerDocument).defaultView;var n=n.documentElement;return new rt(0,0,e.innerWidth||n.clientWidth,e.innerHeight||n.clientHeight)},getOffset:function(e,n){return Rt.getBounds(e,n).getPoint()},getSize:function(e){return Rt.getBounds(e,!0).getSize()},isInvisible:function(e){return Rt.getSize(e).equals(new it(0,0))},isInView:function(e){return!Rt.isInvisible(e)&&Rt.getViewportBounds(e).intersects(Rt.getBounds(e,!0))},isInserted:function(e){return kt.body.contains(e)},getPrefixed:function(e,n){return e&&t(e,n)},setPrefixed:function(e,n,i){if("object"==typeof n)for(var s in n)t(e,s,!0,n[s]);else t(e,n,!0,i)}}},Dt={add:function(t,e){if(t)for(var n in e)for(var i=e[n],s=n.split(/[\s,]+/g),r=0,a=s.length;r<a;r++){var o=s[r];t.addEventListener(o,i,t===kt&&("touchstart"===o||"touchmove"===o)&&{passive:!1})}},remove:function(t,e){if(t)for(var n in e)for(var i=e[n],s=n.split(/[\s,]+/g),r=0,a=s.length;r<a;r++)t.removeEventListener(s[r],i,!1)},getPoint:function(t){return new M((t=t.targetTouches?(t.targetTouches.length?t.targetTouches:t.changedTouches)[0]:t).pageX||t.clientX+kt.documentElement.scrollLeft,t.pageY||t.clientY+kt.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return Dt.getPoint(t).subtract(Rt.getOffset(e||Dt.getTarget(t)))}};Dt.requestAnimationFrame=new function(){var t,e=Rt.getPrefixed(yt,"requestAnimationFrame"),n=!1,i=[];function s(){var r=i;i=[];for(var a=0,o=r.length;a<o;a++)r[a]();(n=e&&i.length)&&e(s)}return function(r){i.push(r),e?n||(e(s),n=!0):t=t||setInterval(s,1e3/60)}};var qt,ge,Kt,at,Ye,Hn,ii,Ot=C.extend(un,{_class:"View",initialize:function t(e,n){function i(c){return n[c]||parseInt(n.getAttribute(c),10)}function s(){var c=Rt.getSize(n);return c.isNaN()||c.isZero()?new it(i("width"),i("height")):c}var r,a,o,u,l;yt&&n?(this._id=n.getAttribute("id"),null==this._id&&n.setAttribute("id",this._id="paper-view-"+t._id++),Dt.add(n,this._viewEvents),Rt.setPrefixed(n.style,{userDrag:l="none",userSelect:l,touchCallout:l,contentZooming:l,tapHighlightColor:"rgba(0,0,0,0)"}),$t.hasAttribute(n,"resize")&&Dt.add(yt,(a=this)._windowEvents={resize:function(){a.setViewSize(s())}}),r=s(),$t.hasAttribute(n,"stats")&&"undefined"!=typeof Stats&&(this._stats=new Stats,u=(o=this._stats.domElement).style,l=Rt.getOffset(n),u.position="absolute",u.left=l.x+"px",u.top=l.y+"px",kt.body.appendChild(o))):(r=new it(n),n=null),this._project=e,this._scope=e._scope,this._element=n,this._pixelRatio||(this._pixelRatio=yt&&yt.devicePixelRatio||1),this._setElementSize(r.width,r.height),this._viewSize=r,t._views.push(this),((t._viewsById[this._id]=this)._matrix=new gt)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!mt.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Ot._focused===this&&(Ot._focused=null),Ot._views.splice(Ot._views.indexOf(this),1),delete Ot._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),Dt.remove(this._element,this._viewEvents),Dt.remove(yt,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:C.each(pt._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(t){this[t]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){(this._autoUpdate=t)&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){var t;this._requested||(t=this,Dt.requestAnimationFrame(function(){var e;t._requested=!1,t._animate&&(t.requestUpdate(),e=t._element,Rt.getPrefixed(kt,"hidden")&&"true"!==$t.getAttribute(e,"keepalive")||!Rt.isInView(e)||t._handleFrame()),t._autoUpdate&&t.update()}),this._requested=!0)},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){mt=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new C({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var n=this._frameItems;e?(n[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[t._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems)(e=this._frameItems[e]).item.emit("frame",new C(t,{time:e.time+=t.delta,count:e.count++}))},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=K},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new Me(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=it.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var n=this._element;n&&(n.width!==t&&(n.width=t),n.height!==e&&(n.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new rt(new M,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return Rt.isInView(this._element)},isInserted:function(){return Rt.isInserted(this._element)},getPixelSize:function(t){var e,n,i=this._element;return i?(n=i.parentNode,(i=kt.createElement("div")).style.fontSize=t,n.appendChild(i),e=parseFloat(Rt.getStyles(i).fontSize),n.removeChild(i)):e=parseFloat(e),e},getTextWidth:function(t,e){return 0}},C.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var i=(e?C:M).read(n=arguments),n=M.read(n,0,{readNull:!0});return this.transform((new gt)[t](i,n||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new gt;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=M.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose().scaling;return(t.x+t.y)/2},setZoom:function(t){this.transform((new gt).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){var t=this._decompose().scaling;return new qe(t.x,t.y,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=M.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(M.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(M.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(M.read(arguments))},getEventPoint:function(t){return this.viewToProject(Dt.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return kt&&"string"==typeof e&&(e=kt.getElementById(e)),new(yt?tn:Ot)(t,e)}}},new function(){if(yt){var t,e,n,i,s,r=!1,a=!1;(o=yt.navigator).pointerEnabled||o.msPointerEnabled?(n="pointerdown MSPointerDown",i="pointermove MSPointerMove",s="pointerup pointercancel MSPointerUp MSPointerCancel"):(n="touchstart",i="touchmove",s="touchend touchcancel","ontouchstart"in yt&&o.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(n+=" mousedown",i+=" mousemove",s+=" mouseup"));var u={},o={mouseout:function(L){var T,P,q,O=Ot._focused,R=Dt.getRelatedTarget(L);!O||R&&"HTML"!==R.nodeName||(P=(T=Dt.getOffset(L,O._element)).x,R=(q=Math.abs)(P),T.x=q(q=R-(1<<25))<R?q*(P<0?-1:1):P,B(O,L,O.viewToProject(T)))},scroll:N};u[n]=function(L){var T=Ot._focused=w(L);r||(r=!0,T._handleMouseEvent("mousedown",L))},o[i]=function(L){var T,P=Ot._focused;a||((T=w(L))?P!==T&&(P&&B(P,L),t=t||P,P=Ot._focused=e=T):e&&e===P&&(t&&!t.isInserted()&&(t=null),P=Ot._focused=t,t=null,N())),P&&B(P,L)},o[n]=function(){a=!0},o[s]=function(L){var T=Ot._focused;T&&r&&T._handleMouseEvent("mouseup",L),a=r=!1},Dt.add(kt,o),Dt.add(yt,{load:N});var l,c,d,m,p,b,g,v,f=!1,y=!1,x={doubleclick:"click",mousedrag:"mousemove"},A=!1,I={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:u,_handleMouseEvent:function(L,T,P){var q=this._itemEvents,O=q.native[L],R="mousemove"===L,U=this._scope.tool,W=this;function G(_t){return q.virtual[_t]||W.responds(_t)||U&&U.responds(_t)}R&&r&&G("mousedrag")&&(L="mousedrag"),P=P||this.getEventPoint(T);var Q,X=this.getBounds().contains(P),et=(Q=O&&X&&W._project.hitTest(P,{tolerance:0,fill:!0,stroke:!0}))&&Q.item||null,tt=!1;if((Q={})[L.substr(5)]=!0,O&&et!==m&&(m&&D(m,null,"mouseleave",T,P),et&&D(et,null,"mouseenter",T,P),m=et),A^X&&(D(this,null,X?"mouseenter":"mouseleave",T,P),tt=!0),!X&&!Q.drag||P.equals(c)||(F(this,et,R?L:"mousemove",T,P,c),tt=!0),A=X,Q.down&&X||Q.up&&l){if(F(this,et,L,T,P,l),Q.down){if(v=et===b&&Date.now()-g<300,d=b=et,!y&&et){for(var wt=et;wt&&!wt.responds("mousedrag");)wt=wt._parent;wt&&(p=et)}l=P}else Q.up&&(y||et!==d||(g=Date.now(),F(this,et,v?"doubleclick":"click",T,P,l),v=!1),d=p=null);tt=!(A=!1)}c=P,tt&&U&&(f=U._handleMouseEvent(L,T,P,Q)||f),!1!==T.cancelable&&(f&&!Q.move||Q.down&&G("mouseup"))&&T.preventDefault()},_handleKeyEvent:function(L,T,P,q){var O,R=this._scope,U=R.tool;function W(G){G.responds(L)&&(mt=R,G.emit(L,O=O||new bn(L,T,P,q)))}this.isVisible()&&(W(this),U&&U.responds(L)&&W(U))},_countItemEvent:function(L,T){var P,O=(q=this._itemEvents).native,q=q.virtual;for(P in I)O[P]=(O[P]||0)+(I[P][L]||0)*T;q[L]=(q[L]||0)+T},statics:{updateFocus:N,_resetState:function(){r=a=f=A=!1,t=e=l=c=d=m=p=b=g=v=null}}}}function w(L){return(L=Dt.getTarget(L)).getAttribute&&Ot._viewsById[L.getAttribute("id")]}function N(){var L=Ot._focused;if(!L||!L.isVisible())for(var T=0,P=Ot._views.length;T<P;T++)if((L=Ot._views[T]).isVisible()){Ot._focused=e=L;break}}function B(L,T,P){L._handleMouseEvent("mousemove",T,P)}function D(L,T,P,q,O,R,U){for(var W,G=!1;L&&L!==U&&!function X(Q,et){if(Q.responds(et)){if(W=W||new ri(et,q,O,T||Q,R?O.subtract(R):null),Q.emit(et,W)&&(f=!0,W.prevented&&(y=!0),W.stopped))return G=!0}else if(et=x[et])return X(Q,et)}(L,P);)L=L._parent;return G}function F(L,T,P,q,O,R){return L._project.removeOn(P),y=f=!1,p&&D(p,null,P,q,O,R)||T&&T!==p&&!T.isDescendant(p)&&D(T,null,"mousedrag"===P?"mousemove":P,q,O,R,p)||D(L,p||T||L,P,q,O,R)}}),tn=Ot.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof yt.HTMLCanvasElement)){var n=it.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+C.slice(arguments,1));e=Ht.getCanvas(n)}var i=this._context=e.getContext("2d");i.save(),this._pixelRatio=1,/^off|false$/.test($t.getAttribute(e,"hidpi"))||(n=yt.devicePixelRatio||1,i=Rt.getPrefixed(i,"backingStorePixelRatio")||1,this._pixelRatio=n/i),Ot.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,n){var i,s,r=this._pixelRatio;t.base.call(this,e*r,n*r),1!==r&&(i=this._context,$t.hasAttribute(s=this._element,"resize")||((s=s.style).width=e+"px",s.height=n+"px"),i.restore(),i.save(),i.scale(r,r))},getContext:function(){return this._context},getPixelSize:function t(e){var n,i,s=mt.agent;return s&&s.firefox?n=t.base.call(this,e):(s=(i=this._context).font,i.font=e+" serif",n=parseFloat(i.font),i.font=s),n},getTextWidth:function(t,e){var n=this._context,i=n.font,s=0;n.font=t;for(var r=0,a=e.length;r<a;r++)s=Math.max(s,n.measureText(e[r]).width);return n.font=i,s},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,n=this._viewSize;return e.clearRect(0,0,n.width+1,n.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),!(this._needsUpdate=!1)}}),ze=C.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return si.modifiers}}),bn=ze.extend({_class:"KeyEvent",initialize:function(t,e,n,i){this.type=t,this.event=e,this.key=n,this.character=i},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),si=new function(){var t,e,n={"\t":"tab"," ":"space","\b":"backspace","\x7f":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},i={tab:"\t",space:" ",enter:"\r"},s={},r={},a=new C({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var l=mt&&mt.agent;return l&&l.mac?this.meta:this.control}}});function o(l){var c=/^U\+/.test(c=l.key||l.keyIdentifier)?String.fromCharCode(parseInt(c.substr(2),16)):/^Arrow[A-Z]/.test(c)?c.substr(5):"Unidentified"===c||c===K?String.fromCharCode(l.keyCode):c;return n[c]||(1<c.length?C.hyphenate(c):c.toLowerCase())}function u(l,c,d,m){var p,b=Ot._focused;if((s[c]=l)?r[c]=d:delete r[c],1<c.length&&(p=C.camelize(c))in a){a[p]=l;var g=mt&&mt.agent;if("meta"===p&&g&&g.mac)if(l)t={};else{for(var v in t)v in r&&u(!1,v,t[v],m);t=null}}else l&&t&&(t[c]=d);b&&b._handleKeyEvent(l?"keydown":"keyup",m,c,d)}return Dt.add(kt,{keydown:function(l){var c=o(l),d=mt&&mt.agent;1<c.length||d&&d.chrome&&(l.altKey||d.mac&&l.metaKey||!d.mac&&l.ctrlKey)?u(!0,c,i[c]||(1<c.length?"":c),l):e=c},keypress:function(l){var c,d;e&&(c=o(l),d=32<=(d=l.charCode)?String.fromCharCode(d):1<c.length?"":c,u(!0,c=c!==e?d.toLowerCase():c,d,l),e=null)},keyup:function(l){var c=o(l);c in r&&u(!1,c,r[c],l)}}),Dt.add(yt,{blur:function(l){for(var c in r)u(!1,c,r[c],l)}}),{modifiers:a,isDown:function(l){return!!s[l]}}},ri=ze.extend({_class:"MouseEvent",initialize:function(t,e,n,i,s){this.type=t,this.event=e,this.point=n,this.target=i,this.delta=s},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),en=ze.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,n){this.tool=t,this.type=e,this.event=n},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,n=e._parent;/^(Group|CompoundPath)$/.test(n._class);)n=(e=n)._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),zn=_n.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){_n.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){null!=(this._minDistance=t)&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,n,i){mt=this._scope,i.drag&&!this.responds(t)&&(t="mousemove");var s=i.move||i.drag,r=this.responds(t),a=this.minDistance,o=this.maxDistance,u=!1,l=this;function c(m,p){var b=n,g=s?l._point:l._downPoint||b;if(s){if(0<=l._moveCount&&b.equals(g))return;if(g&&(null!=m||null!=p)){var v=b.subtract(g),f=v.getLength();if(f<(m||0))return;p&&(b=g.add(v.normalize(Math.min(f,p))))}l._moveCount++}return l._point=b,l._lastPoint=g||b,i.down&&(l._moveCount=-1,l._downPoint=b,l._downCount++),1}function d(){r&&(u=l.emit(t,new en(l,t,e))||u)}if(i.down)c(),d();else if(i.up)c(null,o),d();else if(r)for(;c(a,o);)d();return u}}),De=C.extend(un,{_class:"Tween",statics:{easings:new C({linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:2*(2-t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}})},initialize:function t(e,n,i,s,r,a){this.object=e;var o=typeof r;this.type=(e="function"==o)?o:"string"==o?r:"linear",this.easing=e?r:t.easings[this.type],this.duration=s,this.running=!1,this._then=null,this._startTime=null,this._keys=(s=n||i)?Object.keys(s):[],this._parsedKeys=this._parseKeys(this._keys),this._from=s&&this._getState(n),this._to=s&&this._getState(i),!1!==a&&this.start()},then:function(t){return this._then=t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(t){if(this.running){let l=function(c){return"function"==typeof c?c(e,t):c};1<=t&&(this.running=!(t=1));for(var e=this.easing(t),n=this._keys,i=0,s=n&&n.length;i<s;i++){var r=n[i],a=l(this._from[r]),o=l(this._to[r]);a=a&&o&&a.__add&&o.__add?o.__subtract(a).__multiply(e).__add(a):(o-a)*e+a,this._setProperty(this._parsedKeys[r],a)}this.responds("update")&&this.emit("update",new C({progress:t,factor:e})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(t){var e=this._startTime,n=e?(t-e)/this.duration:0;e||(this._startTime=t),this.update(n)},_getState:function(t){for(var e=this._keys,n={},i=0,s=e.length;i<s;i++){var r,a=e[i],o=this._parsedKeys[a],u=this._getProperty(o);t?(r=this._resolveValue(u,t[a]),this._setProperty(o,r),r=(r=this._getProperty(o))&&r.clone?r.clone():r,this._setProperty(o,u)):r=u&&u.clone?u.clone():u,n[a]=r}return n},_resolveValue:function(t,e){if(e){if(Array.isArray(e)&&2===e.length){var n=e[0];return n&&n.match&&n.match(/^[+\-\*\/]=/)?this._calculate(t,n[0],e[1]):e}if("string"==typeof e&&(n=e.match(/^[+\-*/]=(.*)/)))return n=JSON.parse(n[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": ')),this._calculate(t,e[0],n)}return e},_calculate:function(t,e,n){return mt.PaperScript.calculateBinary(t,e,n)},_parseKeys:function(t){for(var e={},n=0,i=t.length;n<i;n++){var s=t[n],r=s.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");e[s]=r.split("/")}return e},_getProperty:function(t,e){for(var n=this.object,i=0,s=t.length-(e||0);i<s&&n;i++)n=n[t[i]];return n},_setProperty:function(t,e){var n=this._getProperty(t,1);n&&(n[t[t.length-1]]=e)}}),Un=function(t){var e=new Nt.XMLHttpRequest;return e.open((t.method||"get").toUpperCase(),t.url,C.pick(t.async,!0)),t.mimeType&&e.overrideMimeType(t.mimeType),e.onload=function(){var n=e.status;0===n||200===n?t.onLoad&&t.onLoad.call(e,e.responseText):e.onerror()},e.onerror=function(){var n=e.status,i='Could not load "'+t.url+'" (Status: '+n+")";if(!t.onError)throw new Error(i);t.onError(i,n)},e.send(null)},Ht=C.exports.CanvasProvider={canvases:[],getCanvas:function(t,e){if(!yt)return null;var n,i=!0;"object"==typeof t&&(e=t.height,t=t.width),this.canvases.length?n=this.canvases.pop():(n=kt.createElement("canvas"),i=!1);var s=n.getContext("2d");if(!s)throw new Error("Canvas "+n+" is unable to provide a 2D context.");return n.width===t&&n.height===e?i&&s.clearRect(0,0,t+1,e+1):(n.width=t,n.height=e),s.save(),n},getContext:function(t,e){return(e=this.getCanvas(t,e))?e.getContext("2d"):null},release:function(t){(t=t&&t.canvas?t.canvas:t)&&t.getContext&&(t.getContext("2d").restore(),this.canvases.push(t))}},$n=new function(){var t,e,n,i,s,r,a,o,u,l,c,d=Math.min,m=Math.max,p=Math.abs;function b(I,w,N){return.2989*I+.587*w+.114*N}function g(I,w,N,B){var D,F=B-b(I,w,N);B=b(u=I+F,l=w+F,c=N+F),N=d(u,l,c),F=m(u,l,c),N<0&&(u=B+(u-B)*B/(D=B-N),l=B+(l-B)*B/D,c=B+(c-B)*B/D),255<F&&(u=B+(u-B)*(D=255-B)/(F-=B),l=B+(l-B)*D/F,c=B+(c-B)*D/F)}function v(I,w,N){return m(I,w,N)-d(I,w,N)}function f(I,w,N,B){var D=[I,w,N],F=m(I,w,N);N=d(I,w,N),w=0===d(N=N===I?0:N===w?1:2,F=F===I?0:F===w?1:2)?1===m(N,F)?2:1:0,D[F]>D[N]?(D[w]=(D[w]-D[N])*B/(D[F]-D[N]),D[F]=B):D[w]=D[F]=0,D[N]=0,u=D[0],l=D[1],c=D[2]}var y={multiply:function(){u=s*t/255,l=r*e/255,c=a*n/255},screen:function(){u=s+t-s*t/255,l=r+e-r*e/255,c=a+n-a*n/255},overlay:function(){u=s<128?2*s*t/255:255-2*(255-s)*(255-t)/255,l=r<128?2*r*e/255:255-2*(255-r)*(255-e)/255,c=a<128?2*a*n/255:255-2*(255-a)*(255-n)/255},"soft-light":function(){var I=t*s/255;u=I+s*(255-(255-s)*(255-t)/255-I)/255,l=(I=e*r/255)+r*(255-(255-r)*(255-e)/255-I)/255,c=(I=n*a/255)+a*(255-(255-a)*(255-n)/255-I)/255},"hard-light":function(){u=t<128?2*t*s/255:255-2*(255-t)*(255-s)/255,l=e<128?2*e*r/255:255-2*(255-e)*(255-r)/255,c=n<128?2*n*a/255:255-2*(255-n)*(255-a)/255},"color-dodge":function(){u=0===s?0:255===t?255:d(255,255*s/(255-t)),l=0===r?0:255===e?255:d(255,255*r/(255-e)),c=0===a?0:255===n?255:d(255,255*a/(255-n))},"color-burn":function(){u=255===s?255:0===t?0:m(0,255-255*(255-s)/t),l=255===r?255:0===e?0:m(0,255-255*(255-r)/e),c=255===a?255:0===n?0:m(0,255-255*(255-a)/n)},darken:function(){u=s<t?s:t,l=r<e?r:e,c=a<n?a:n},lighten:function(){u=t<s?s:t,l=e<r?r:e,c=n<a?a:n},difference:function(){(u=s-t)<0&&(u=-u),(l=r-e)<0&&(l=-l),(c=a-n)<0&&(c=-c)},exclusion:function(){u=s+t*(255-s-s)/255,l=r+e*(255-r-r)/255,c=a+n*(255-a-a)/255},hue:function(){f(t,e,n,v(s,r,a)),g(u,l,c,b(s,r,a))},saturation:function(){f(s,r,a,v(t,e,n)),g(u,l,c,b(s,r,a))},luminosity:function(){g(s,r,a,b(t,e,n))},color:function(){g(t,e,n,b(s,r,a))},add:function(){u=d(s+t,255),l=d(r+e,255),c=d(a+n,255)},subtract:function(){u=m(s-t,0),l=m(r-e,0),c=m(a-n,0)},average:function(){u=(s+t)/2,l=(r+e)/2,c=(a+n)/2},negation:function(){u=255-p(255-t-s),l=255-p(255-e-r),c=255-p(255-n-a)}},x=this.nativeModes=C.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(I){this[I]=!0},{}),A=Ht.getContext(1,1);A&&(C.each(y,function(I,w){var N="darken"===w,B=!1;A.save();try{A.fillStyle=N?"#300":"#a00",A.fillRect(0,0,1,1),A.globalCompositeOperation=w,A.globalCompositeOperation===w&&(A.fillStyle=N?"#a00":"#300",A.fillRect(0,0,1,1),B=A.getImageData(0,0,1,1).data[0]!==N?170:51)}catch(D){}A.restore(),x[w]=B}),Ht.release(A)),this.process=function(I,w,N,B,D){var F=w.canvas,L="normal"===I;if(L||x[I])N.save(),N.setTransform(1,0,0,1,0,0),N.globalAlpha=B,L||(N.globalCompositeOperation=I),N.drawImage(F,D.x,D.y),N.restore();else{var T=y[I];if(T){for(var P=(I=N.getImageData(D.x,D.y,F.width,F.height)).data,q=w.getImageData(0,0,F.width,F.height).data,O=0,R=P.length;O<R;O+=4){t=q[O],s=P[O],e=q[O+1],r=P[O+1],n=q[O+2],a=P[O+2],i=q[O+3],o=P[O+3],T();var U=i*B/255,W=1-U;P[O]=U*u+W*s,P[O+1]=U*l+W*r,P[O+2]=U*c+W*a,P[O+3]=i*B+W*o}N.putImageData(I,D.x,D.y)}}}},Bt=new function(){var t="http://www.w3.org/2000/svg",e="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",i={href:n,xlink:e,xmlns:e+"/","xmlns:xlink":e+"/"};function s(r,a,o){for(var u in a){var l=a[u],c=i[u];"number"==typeof l&&o&&(l=o.number(l)),c?r.setAttributeNS(c,u,l):r.setAttribute(u,l)}return r}return{svg:t,xmlns:e,xlink:n,create:function(r,a,o){return s(kt.createElementNS(t,r),a,o)},get:function(r,a){var o=i[a];return"null"===(a=o?r.getAttributeNS(o,a):r.getAttribute(a))?null:a},set:s}},yn=C.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof Qe||t instanceof fe||t instanceof Z)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(t,e){var n=C.capitalize(e),i=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:i,fromSVG:i&&C.each(i,function(s,r){this[s]=r},{}),exportFilter:t[3],get:"get"+n,set:"set"+n}},{});function Ee(t,e,n){var i,s,r=new C,a=t.getTranslation();return e&&(t.isInvertible()?(i=(t=t._shiftless())._inverseTransform(a),a=null):i=new M,r[n?"cx":"x"]=i.x,r[n?"cy":"y"]=i.y),t.isIdentity()||((s=t.decompose())?(e=[],n=s.rotation,i=s.scaling,s=s.skewing,a&&!a.isZero()&&e.push("translate("+qt.point(a)+")"),n&&e.push("rotate("+qt.number(n)+")"),ct.isZero(i.x-1)&&ct.isZero(i.y-1)||e.push("scale("+qt.point(i)+")"),s.x&&e.push("skewX("+qt.number(s.x)+")"),s.y&&e.push("skewY("+qt.number(s.y)+")"),r.transform=e.join(" ")):r.transform="matrix("+t.getValues().join(",")+")"),r}function Wn(t,e){for(var n=Ee(t._matrix),i=t._children,s=Bt.create("g",n,qt),r=0,a=i.length;r<a;r++){var o,u=i[r],l=xn(u,e);l&&(u.isClipMask()?((o=Bt.create("clipPath")).appendChild(l),wn(u,o,"clip"),Bt.set(s,{"clip-path":"url(#"+o.id+")"})):s.appendChild(l))}return s}function Zn(t){var e,n=t._type,i=t._radius,s=Ee(t._matrix,!0,"rectangle"!==n);return"rectangle"===n&&(n="rect",t=(e=t._size).width,e=e.height,s.x-=t/2,s.y-=e/2,s.width=t,s.height=e,i.isZero()&&(i=null)),i&&("circle"===n?s.r=i:(s.rx=i.width,s.ry=i.height)),Bt.create(n,s,qt)}function He(t,e){return ge=ge||{ids:{},svgs:{}},t&&ge.svgs[e+"-"+(t._id||t.__id||(t.__id=Ze.get("svg")))]}function wn(t,e,n){ge||He();var i=ge.ids[n]=(ge.ids[n]||0)+1;e.id=n+"-"+i,ge.svgs[n+"-"+(t._id||t.__id)]=e}function Dn(t,e){var n=t,i=null;if(ge){for(var s in n="svg"===t.nodeName.toLowerCase()&&t,ge.svgs)i||(n||(n=Bt.create("svg")).appendChild(t),i=n.insertBefore(Bt.create("defs"),n.firstChild)),i.appendChild(ge.svgs[s]);ge=null}return e.asString?(new Nt.XMLSerializer).serializeToString(n):n}function xn(t,e,n){var i=Kt[t._class],s=i&&i(t,e);return s&&((i=e.onExport)&&(s=i(t,s,e)||s),(e=JSON.stringify(t._data))&&"{}"!==e&&"null"!==e&&s.setAttribute("data-paper-data",e)),s&&function(t,e,n){var i={},s=!n&&t.getParent(),r=[];return null!=t._name&&(i.id=t._name),C.each(yn,function(a){var o=a.get,u=a.type,l=t[o]();(a.exportFilter?!a.exportFilter(t,l):s&&C.equals(s[o](),l))||("color"!==u||null==l||(o=l.getAlpha())<1&&(i[a.attribute+"-opacity"]=o),"style"===u?r.push(a.attribute+": "+l):i[a.attribute]=null==l?"none":"color"===u?l.gradient?function(c){if(!(f=He(c,"color"))){var d,m,p=c.getGradient(),b=p._radial,g=c.getOrigin(),v=c.getDestination();b?(d={cx:g.x,cy:g.y,r:g.getDistance(v)},(m=c.getHighlight())&&(d.fx=m.x,d.fy=m.y)):d={x1:g.x,y1:g.y,x2:v.x,y2:v.y},d.gradientUnits="userSpaceOnUse";for(var f=Bt.create((b?"radial":"linear")+"Gradient",d,qt),y=p._stops,x=0,A=y.length;x<A;x++){var I,w=(I=y[x])._color,N=w.getAlpha();d={offset:null==(I=I._offset)?x/(A-1):I},w&&(d["stop-color"]=w.toCSS(!0)),N<1&&(d["stop-opacity"]=N),f.appendChild(Bt.create("stop",d,qt))}wn(c,f,"color")}return"url(#"+f.id+")"}(l):l.toCSS(!0):"array"===u?l.join(","):"lookup"===u?a.toSVG[l]:l)}),r.length&&(i.style=r.join(";")),1===i.opacity&&delete i.opacity,t._visible||(i.visibility="hidden"),Bt.set(e,i,qt)}(t,s,n)}function Xn(t){return qt=new Wt((t=t||{}).precision),t}function be(t,e,n,i,s,r){return n=null==(r=Bt.get(t,e)||r)?i?null:n?"":0:n?r:parseFloat(r),/%\s*$/.test(r)?n/100*(s?1:at[/x|^width/.test(e)?"width":"height"]):n}function _e(t,e,n,i,s,r,a){return e=be(t,e||"x",!1,i,s,r),n=be(t,n||"y",!1,i,s,a),!i||null!=e&&null!=n?new M(e,n):null}function nn(t,e,n,i,s){return e=be(t,e||"width",!1,i,s),n=be(t,n||"height",!1,i,s),!i||null!=e&&null!=n?new it(e,n):null}function Gn(t,e,n){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?hi(t)||t:"lookup"===e?n[t]:t}function Ae(t,e,n,i){var s=t.childNodes,r="clippath"===e,a="defs"===e,o=new Ne,u=o._project,l=(e=u._currentStyle,[]);if(r||a||(o=Cn(o,t,i),u._currentStyle=o._style.clone()),i)for(var c=t.querySelectorAll("defs"),d=0,m=c.length;d<m;d++)Fn(c[d],n,!1);for(d=0,m=s.length;d<m;d++){var p,b=s[d];1!==b.nodeType||/^defs$/i.test(b.nodeName)||!(p=Fn(b,n,!1))||p instanceof je||l.push(p)}return o.addChildren(l),r&&(o=Cn(o.reduce(),t,i)),u._currentStyle=e,(r||a)&&(o.remove(),o=null),o}function ln(t,e){for(var n=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),i=[],s=0,r=n.length;s<r;s+=2)i.push(new M(parseFloat(n[s]),parseFloat(n[s+1])));return t=new Ct(i),"polygon"===e&&t.closePath(),t}function Bn(t,e){var n;if(e="radialgradient"===e,i=(be(t,"href",!0)||"").substring(1))(n=Ye[i].getGradient())._radial^e&&((n=n.clone())._radial=e);else{for(var s=t.childNodes,r=[],a=0,o=s.length;a<o;a++){var u=s[a];1===u.nodeType&&r.push(Cn(new hn,u))}n=new he(r,e)}var l,c,d,i="userSpaceOnUse"!==be(t,"gradientUnits",!0);return e?(c=(l=_e(t,"cx","cy",!1,i,"50%","50%")).add(be(t,"r",!1,!1,i,"50%"),0),d=_e(t,"fx","fy",!0,i)):(l=_e(t,"x1","y1",!1,i,"0%","0%"),c=_e(t,"x2","y2",!1,i,"100%","0%")),Cn(new zt(n,l,c,d),t)._scaleToBounds=i,null}function ai(t,e,n,i){if(t.transform){for(var s=(i.getAttribute(n)||"").split(/\)\s*/g),r=new gt,a=0,o=s.length;a<o&&(u=s[a]);a++){for(var l=u.split(/\(\s*/),u=l[0],c=l[1].split(/[\s,]+/g),d=0,m=c.length;d<m;d++)c[d]=parseFloat(c[d]);switch(u){case"matrix":r.append(new gt(c[0],c[1],c[2],c[3],c[4],c[5]));break;case"rotate":r.rotate(c[0],c[1]||0,c[2]||0);break;case"translate":r.translate(c[0],c[1]||0);break;case"scale":r.scale(c);break;case"skewX":r.skew(c[0],0);break;case"skewY":r.skew(0,c[0])}}t.transform(r)}}function oi(t,e,n){(n=t[n="fill-opacity"===n?"getFillColor":"getStrokeColor"]&&t[n]())&&n.setAlpha(parseFloat(e))}function ui(t,e,n){var i;return!(i=(i=t.attributes[e])&&i.value)&&t.style&&(e=C.camelize(e),(i=t.style[e])||n.node[e]===n.parent[e]||(i=n.node[e])),i?"none"===i?null:i:K}function Cn(t,e,n){var i=e.parentNode,s={node:Rt.getStyles(e)||{},parent:!n&&!/^defs$/i.test(i.tagName)&&Rt.getStyles(i)||{}};return C.each(ii,function(r,a){var o=ui(e,a,s);t=o!==K&&r(t,o,a,e,s)||t}),t}function hi(t){return(t=(t=(t=t&&t.match(/\((?:["'#]*)([^"')]+)/))&&t[1])&&Ye[yt?t.replace(yt.location.href.split("#")[0]+"#",""):t])&&t._scaleToBounds&&((t=t.clone())._scaleToBounds=!0),t}function Fn(t,e,n){var i,s,r,o="#document"!==(a=t.nodeName.toLowerCase()),u=kt.body;n&&o&&(at=mt.getView().getSize(),at=nn(t,null,null,!0)||at,i=Bt.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),s=t.parentNode,r=t.nextSibling,i.appendChild(t),u.appendChild(i));var l=mt.settings,c=l.applyMatrix,d=l.insertItems;l.applyMatrix=!1,l.insertItems=!1;var m=Hn[a],a=m&&m(t,a,e,n)||null;return l.insertItems=d,l.applyMatrix=c,a&&(!o||a instanceof Ne||(a=Cn(a,t,n)),l=e.onImport,o=o&&t.getAttribute("data-paper-data"),l&&(a=l(t,a,e)||a),e.expandShapes&&a instanceof fe&&(a.remove(),a=a.toPath()),o&&(a._data=JSON.parse(o))),i&&(u.removeChild(i),s&&(r?s.insertBefore(t,r):s.appendChild(t))),n&&(Ye={},a&&C.pick(e.applyMatrix,c)&&a.matrix.apply(!0,!0)),a}function li(t,e,n){if(!t)return null;e="function"==typeof e?{onLoad:e}:e||{};var i=mt,s=null;function r(l){try{var c="object"==typeof l?l:(new Nt.DOMParser).parseFromString(l.trim(),"image/svg+xml");if(!c.nodeName)throw c=null,new Error("Unsupported SVG source: "+t);mt=i,s=Fn(c,e,!0),e&&!1===e.insert||n._insertItem(K,s);var d=e.onLoad;d&&d(s,l)}catch(m){a(m)}}function a(l,c){var d=e.onError;if(!d)throw new Error(l);d(l,c)}if("string"!=typeof t||/^[\s\S]*</.test(t)){if("undefined"!=typeof File&&t instanceof File){var o=new FileReader;return o.onload=function(){r(o.result)},o.onerror=function(){a(o.error)},o.readAsText(t)}r(t)}else{var u=kt.getElementById(t);u?r(u):Un({url:t,async:!0,onLoad:r,onError:a})}return s}Kt={Group:Wn,Layer:Wn,Raster:function(t,e){var n=Ee(t._matrix,!0),i=t.getSize(),s=t.getImage();return n.x-=i.width/2,n.y-=i.height/2,n.width=i.width,n.height=i.height,n.href=0==e.embedImages&&s&&s.src||t.toDataURL(),Bt.create("image",n,qt)},Path:function(t,e){var n=e.matchShapes;if(n){var i=t.toShape(!1);if(i)return Zn(i)}var s=t._segments,r=s.length,a=Ee(t._matrix);if(n&&2<=r&&!t.hasHandles())if(2<r){for(var o=t._closed?"polygon":"polyline",u=[],l=0;l<r;l++)u.push(qt.point(s[l]._point));a.points=u.join(" ")}else o="line",a.set({x1:(i=s[0]._point).x,y1:i.y,x2:(n=s[1]._point).x,y2:n.y});else o="path",a.d=t.getPathData(null,e.precision);return Bt.create(o,a,qt)},Shape:Zn,CompoundPath:function(t,e){var n=Ee(t._matrix);return(e=t.getPathData(null,e.precision))&&(n.d=e),Bt.create("path",n,qt)},SymbolItem:function(t,e){var n=Ee(t._matrix,!0),i=t._definition,s=He(i,"symbol"),r=i._item;return t=r.getStrokeBounds(),s||((s=Bt.create("symbol",{viewBox:qt.rectangle(t)})).appendChild(xn(r,e)),wn(i,s,"symbol")),n.href="#"+s.id,n.x+=t.x,n.y+=t.y,n.width=t.width,n.height=t.height,n.overflow="visible",Bt.create("use",n,qt)},PointText:function(t){var e=Bt.create("text",Ee(t._matrix,!0),qt);return e.textContent=t._content,e}},pt.inject({exportSVG:function(t){return Dn(xn(this,t=Xn(t),!0),t)}}),Le.inject({exportSVG:function(t){t=Xn(t);var e=this._children,n=this.getView(),i=C.pick(t.bounds,"view"),s=(s=t.matrix||"view"===i&&n._matrix)&&gt.read([s]);n="view"===i?new rt([0,0],n.getViewSize()):"content"===i?pt._getBounds(e,s,{stroke:!0}).rect:rt.read([i],0,{readNull:!0}),i={version:"1.1",xmlns:Bt.svg,"xmlns:xlink":Bt.xlink},n&&(i.width=n.width,i.height=n.height,(n.x||0===n.x||n.y||0===n.y)&&(i.viewBox=qt.rectangle(n)));var r=i=Bt.create("svg",i,qt);s&&!s.isIdentity()&&(r=i.appendChild(Bt.create("g",Ee(s),qt)));for(var a=0,o=e.length;a<o;a++)r.appendChild(xn(e[a],t,!0));return Dn(i,t)}}),Ye={},Hn={"#document":function(t,e,n,i){for(var s=t.childNodes,r=0,a=s.length;r<a;r++){var o=s[r];if(1===o.nodeType)return Fn(o,n,i)}},g:Ae,svg:Ae,clippath:Ae,polygon:ln,polyline:ln,path:function(t){return Qe.create(t.getAttribute("d"))},lineargradient:Bn,radialgradient:Bn,image:function(t){var e=new mn(be(t,"href",!0));return e.on("load",function(){var n=nn(t);this.setSize(n),n=_e(t).add(n.divide(2)),this._matrix.append((new gt).translate(n))}),e},symbol:function(t,e,n,i){return new je(Ae(t,e,n,i),!0)},defs:Ae,use:function(t){var e=(be(t,"href",!0)||"").substring(1);return e=Ye[e],t=_e(t),e?e instanceof je?e.place(t):e.clone().translate(t):null},circle:function(t){return new fe.Circle(_e(t,"cx","cy"),be(t,"r"))},ellipse:function(t){return new fe.Ellipse({center:_e(t,"cx","cy"),radius:nn(t,"rx","ry")})},rect:function(t){return new fe.Rectangle(new rt(_e(t),nn(t)),nn(t,"rx","ry"))},line:function(t){return new Ct.Line(_e(t,"x1","y1"),_e(t,"x2","y2"))},text:function(t){var e=new Ke(_e(t).add(_e(t,"dx","dy")));return e.setContent(t.textContent.trim()||""),e},switch:Ae},ii=C.set(C.each(yn,function(t){this[t.attribute]=function(e,n){e[t.set]&&(e[t.set](Gn(n,t.type,t.fromSVG)),"color"!==t.type||(n=e[t.get]())&&n._scaleToBounds&&(e=e.getBounds(),n.transform((new gt).translate(e.getPoint()).scale(e.getSize()))))}},{}),{id:function(t,e){(Ye[e]=t).setName&&t.setName(e)},"clip-path":function(t,e){if(e=hi(e)){if((e=e.clone()).setClipMask(!0),!(t instanceof Ne))return new Ne(e,t);t.insertChild(0,e)}},gradientTransform:ai,transform:ai,"fill-opacity":oi,"stroke-opacity":oi,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){var n;t.setOffset&&(n=e.match(/(.*)%$/),t.setOffset(n?n[1]/100:parseFloat(e)))},viewBox:function(t,e,n,i,s){var r,a,o=new rt(Gn(e,"array"));e=nn(i,null,null,!0),t instanceof Ne?(a=e?e.divide(o.getSize()):1,r=(new gt).scale(a).translate(o.getPoint().negate()),a=t):t instanceof je&&(e&&o.setSize(e),a=t._item),a&&("visible"!==ui(i,"overflow",s)&&((o=new fe.Rectangle(o)).setClipMask(!0),a.addChild(o)),r&&a.transform(r))}}),pt.inject({importSVG:function(t,e){return li(t,e,this)}}),Le.inject({importSVG:function(t,e){return this.activate(),li(t,e,this)}}),C.exports.PaperScript=function(){var t,e,n,i=this,s=i.acorn;if(!s&&"undefined"!=typeof require)try{s=require("acorn")}catch(g){}function r(g,v){return(i.acorn||s).parse(g,v)}s||(s=t=e={},u=this,n=function(g){"use strict";var v,f,y,x;g.version="0.5.0",g.parse=function(S,j){return f=String(S),y=f.length,I(j),Ni(),function($){R=U=w,v.locations&&(W=new On),G=Q=null,X=[],Pn();var nt=$||oe(),H=!0;for($||(nt.body=[]);L!==Mt;){var dt=$e();nt.body.push(dt),H&&xi(dt)&&wi(!0),H=!1}return vt(nt,"Program")}(v.program)};var A=g.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function I(S){for(var j in v=S||{},A)Object.prototype.hasOwnProperty.call(v,j)||(v[j]=A[j]);x=v.sourceFile||null}var w,N,B,D,F,L,T,P,q,O,R,U,W,G,X,Q,et=g.getLineInfo=function(S,j){for(var $=1,nt=0;;){qn.lastIndex=nt;var H=qn.exec(S);if(!(H&&H.index<j))break;++$,nt=H.index+H[0].length}return{line:$,column:j-nt}};function tt(S,j){var $=et(f,S);throw j+=" ("+$.line+":"+$.column+")",(j=new SyntaxError(j)).pos=S,j.loc=$,j.raisedAt=w,j}g.tokenize=function(S,j){f=String(S),y=f.length,I(j),Ni();var $={};function nt(H){return U=B,Pn(H),$.start=N,$.end=B,$.startLoc=D,$.endLoc=F,$.type=L,$.value=T,$}return nt.jumpTo=function(H,dt){var ft;if(w=H,v.locations)for(q=1,O=qn.lastIndex=0;(ft=qn.exec(f))&&ft.index<H;)++q,O=ft.index+ft[0].length;P=dt,jn()},nt};var wt,_t=[],xt={type:"num"},ot={type:"regexp"},It={type:"string"},lt={type:"name"},Mt={type:"eof"},Zt={keyword:"break"},ee={keyword:"case",beforeExpr:!0},Lt={keyword:"catch"},le={keyword:"continue"},ce={keyword:"debugger"},Xt={keyword:"default"},Yt={keyword:"do",isLoop:!0},cn={keyword:"else",beforeExpr:!0},Te={keyword:"finally"},dn={keyword:"for",isLoop:!0},Sn={keyword:"function"},ci={keyword:"if"},kn={keyword:"return",beforeExpr:!0},Rn={keyword:"switch"},Qn={keyword:"throw",beforeExpr:!0},pe={keyword:"try"},re={keyword:"var"},ae={keyword:"while",isLoop:!0},ye={keyword:"with"},te={keyword:"new",beforeExpr:!0},Ie={keyword:"this"},Ue={keyword:"null",atomValue:null},Xe={keyword:"true",atomValue:!0},we={keyword:"false",atomValue:!1},En={keyword:"in",binop:7,beforeExpr:!0},sn={break:Zt,case:ee,catch:Lt,continue:le,debugger:ce,default:Xt,do:Yt,else:cn,finally:Te,for:dn,function:Sn,if:ci,return:kn,switch:Rn,throw:Qn,try:pe,var:re,while:ae,with:ye,null:Ue,true:Xe,false:we,new:te,in:En,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Ie,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},An={type:"[",beforeExpr:!0},Tn={type:"]"},Be={type:"{",beforeExpr:!0},Fe={type:"}"},Re={type:"(",beforeExpr:!0},xe={type:")"},me={type:",",beforeExpr:!0},E={type:";",beforeExpr:!0},h={type:":",beforeExpr:!0},_={type:"."},k={type:"?",beforeExpr:!0},z={binop:10,beforeExpr:!0},V={isAssign:!0,beforeExpr:!0},Y={isAssign:!0,beforeExpr:!0},ut={postfix:!0,prefix:!0,isUpdate:!0},St={prefix:!0,beforeExpr:!0},Ut={binop:1,beforeExpr:!0},jt={binop:2,beforeExpr:!0},Et={binop:3,beforeExpr:!0},ne={binop:4,beforeExpr:!0},Gt={binop:5,beforeExpr:!0},Ce={binop:6,beforeExpr:!0},ve={binop:7,beforeExpr:!0},Ge={binop:8,beforeExpr:!0},rn={binop:9,prefix:!0,beforeExpr:!0},In={binop:10,beforeExpr:!0};for(wt in g.tokTypes={bracketL:An,bracketR:Tn,braceL:Be,braceR:Fe,parenL:Re,parenR:xe,comma:me,semi:E,colon:h,dot:_,question:k,slash:z,eq:V,name:lt,eof:Mt,num:xt,regexp:ot,string:It},sn)g.tokTypes["_"+wt]=sn[wt];function Oe(S){S=S.split(" ");var j="",$=[];t:for(var nt=0;nt<S.length;++nt){for(var H=0;H<$.length;++H)if($[H][0].length==S[nt].length){$[H].push(S[nt]);continue t}$.push([S[nt]])}function dt(Tt){if(1==Tt.length)return j+="return str === "+JSON.stringify(Tt[0])+";";j+="switch(str){";for(var ht=0;ht<Tt.length;++ht)j+="case "+JSON.stringify(Tt[ht])+":";j+="return true}return false;"}if(3<$.length){for($.sort(function(Tt,ht){return ht.length-Tt.length}),j+="switch(str.length){",nt=0;nt<$.length;++nt){var ft=$[nt];j+="case "+ft[0].length+":",dt(ft)}j+="}"}else dt(S);return new Function("str",j)}var an,Wi=Oe("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Zi=Oe("class enum extends super const export import"),Oi=Oe("implements interface let package private protected public static yield"),di=Oe("eval arguments"),Ki=Oe("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Xi=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Pi="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",Mi=new RegExp("["+Pi+"]"),Gi=new RegExp("["+Pi+"\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]"),fi=/[\n\r\u2028\u2029]/,qn=/\r\n|[\n\r\u2028\u2029]/g,gi=g.isIdentifierStart=function(S){return S<65?36===S:S<91||(S<97?95===S:S<123||170<=S&&Mi.test(String.fromCharCode(S)))},Li=g.isIdentifierChar=function(S){return S<48?36===S:S<58||!(S<65)&&(S<91||(S<97?95===S:S<123||170<=S&&Gi.test(String.fromCharCode(S))))};function On(){this.line=q,this.column=w-O}function Ni(){q=1,w=O=0,P=!0,jn()}function ie(S,j){B=w,v.locations&&(F=new On),L=S,jn(),T=j,P=S.beforeExpr}function yi(){for(var S=w,j=v.onComment&&v.locations&&new On,$=f.charCodeAt(w+=2);w<y&&10!==$&&13!==$&&8232!==$&&8233!==$;)++w,$=f.charCodeAt(w);v.onComment&&v.onComment(!1,f.slice(S+2,w),S,w,j,v.locations&&new On)}function jn(){for(;w<y;){var S,j=f.charCodeAt(w);if(32===j)++w;else if(13===j)++w,10===(S=f.charCodeAt(w))&&++w,v.locations&&(++q,O=w);else if(10===j||8232===j||8233===j)++w,v.locations&&(++q,O=w);else if(8<j&&j<14)++w;else if(47===j)if(42===(S=f.charCodeAt(w+1)))!function(){var $,nt=v.onComment&&v.locations&&new On,H=w,dt=f.indexOf("*/",w+=2);if(-1===dt&&tt(w-2,"Unterminated comment"),w=dt+2,v.locations)for(qn.lastIndex=H;($=qn.exec(f))&&$.index<w;)++q,O=$.index+$[0].length;v.onComment&&v.onComment(!0,f.slice(H+2,dt),H,w,nt,v.locations&&new On)}();else{if(47!==S)break;yi()}else if(160===j)++w;else{if(!(5760<=j&&Xi.test(String.fromCharCode(j))))break;++w}}}function Pn(S){if(S?w=N+1:N=w,v.locations&&(D=new On),S)return zi();if(y<=w)return ie(Mt);var j=f.charCodeAt(w);if(gi(j)||92===j)return Fi();if(S=function(S){switch(S){case 46:return 48<=(ft=f.charCodeAt(w+1))&&ft<=57?Di(!0):(++w,ie(_));case 40:return++w,ie(Re);case 41:return++w,ie(xe);case 59:return++w,ie(E);case 44:return++w,ie(me);case 91:return++w,ie(An);case 93:return++w,ie(Tn);case 123:return++w,ie(Be);case 125:return++w,ie(Fe);case 58:return++w,ie(h);case 63:return++w,ie(k);case 48:var j=f.charCodeAt(w+1);if(120===j||88===j)return function(){w+=2;var Tt=Jn(16);return null==Tt&&tt(N+2,"Expected hexadecimal number"),gi(f.charCodeAt(w))&&tt(w,"Identifier directly after number"),ie(xt,Tt)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Di(!1);case 34:case 39:return function(Tt){w++;for(var ht="";;){y<=w&&tt(N,"Unterminated string constant");var Jt=f.charCodeAt(w);if(Jt===Tt)return++w,ie(It,ht);if(92===Jt){Jt=f.charCodeAt(++w);var Ft=/^[0-7]+/.exec(f.slice(w,w+3));for(Ft=Ft&&Ft[0];Ft&&255<parseInt(Ft,8);)Ft=Ft.slice(0,-1);if(++w,Ft="0"===Ft?null:Ft)Q&&tt(w-2,"Octal literal in strict mode"),ht+=String.fromCharCode(parseInt(Ft,8)),w+=Ft.length-1;else switch(Jt){case 110:ht+="\n";break;case 114:ht+="\r";break;case 120:ht+=String.fromCharCode(_i(2));break;case 117:ht+=String.fromCharCode(_i(4));break;case 85:ht+=String.fromCharCode(_i(8));break;case 116:ht+="\t";break;case 98:ht+="\b";break;case 118:ht+="\v";break;case 102:ht+="\f";break;case 48:ht+="\0";break;case 13:10===f.charCodeAt(w)&&++w;case 10:v.locations&&(O=w,++q);break;default:ht+=String.fromCharCode(Jt)}}else 13!==Jt&&10!==Jt&&8232!==Jt&&8233!==Jt||tt(N,"Unterminated string constant"),ht+=String.fromCharCode(Jt),++w}}(S);case 47:return dt=f.charCodeAt(w+1),P?(++w,zi()):61===dt?se(Y,2):se(z,1);case 37:case 42:return 61===f.charCodeAt(w+1)?se(Y,2):se(In,1);case 124:case 38:return j=S,(dt=f.charCodeAt(w+1))===j?se(124===j?Ut:jt,2):61===dt?se(Y,2):se(124===j?Et:Gt,1);case 94:return 61===f.charCodeAt(w+1)?se(Y,2):se(ne,1);case 43:case 45:return nt=S,(H=f.charCodeAt(w+1))===nt?45==H&&62==f.charCodeAt(w+2)&&fi.test(f.slice(U,w))?(w+=3,yi(),jn(),Pn()):se(ut,2):61===H?se(Y,2):se(rn,1);case 60:case 62:return nt=S,$=1,(H=f.charCodeAt(w+1))===nt?($=62===nt&&62===f.charCodeAt(w+2)?3:2,61===f.charCodeAt(w+$)?se(Y,$+1):se(Ge,$)):33==H&&60==nt&&45==f.charCodeAt(w+2)&&45==f.charCodeAt(w+3)?(w+=4,yi(),jn(),Pn()):(61===H&&($=61===f.charCodeAt(w+2)?3:2),se(ve,$));case 61:case 33:return $=S,61===f.charCodeAt(w+1)?se(Ce,61===f.charCodeAt(w+2)?3:2):se(61===$?V:St,1);case 126:return se(St,1)}var $,nt,H,dt,ft;return!1}(j),!1===S){if("\\"===(j=String.fromCharCode(j))||Mi.test(j))return Fi();tt(w,"Unexpected character '"+j+"'")}return S}function se(S,j){var $=f.slice(w,w+j);w+=j,ie(S,$)}function zi(){for(var S,j,$=w;;){y<=w&&tt($,"Unterminated regular expression");var nt=f.charAt(w);if(fi.test(nt)&&tt($,"Unterminated regular expression"),S)S=!1;else{if("["===nt)j=!0;else if("]"===nt&&j)j=!1;else if("/"===nt&&!j)break;S="\\"===nt}++w}var H=f.slice($,w);++w;var dt=Bi();dt&&!/^[gmsiy]*$/.test(dt)&&tt($,"Invalid regexp flag");try{var ft=new RegExp(H,dt)}catch(Tt){Tt instanceof SyntaxError&&tt($,Tt.message),tt(Tt)}return ie(ot,ft)}function Jn(S,j){for(var $=w,nt=0,H=0,dt=null==j?1/0:j;H<dt;++H){var ft;if(S<=(ft=97<=(ft=f.charCodeAt(w))?ft-97+10:65<=ft?ft-65+10:48<=ft&&ft<=57?ft-48:1/0))break;++w,nt=nt*S+ft}return w===$||null!=j&&w-$!==j?null:nt}function Di(S){var H,j=w,$=!1,nt=48===f.charCodeAt(w);return S||null!==Jn(10)||tt(j,"Invalid number"),46===f.charCodeAt(w)&&(++w,Jn(10),$=!0),69!==(S=f.charCodeAt(w))&&101!==S||(43!==(S=f.charCodeAt(++w))&&45!==S||++w,null===Jn(10)&&tt(j,"Invalid number"),$=!0),gi(f.charCodeAt(w))&&tt(w,"Identifier directly after number"),S=f.slice(j,w),$?H=parseFloat(S):nt&&1!==S.length?/[89]/.test(S)||Q?tt(j,"Invalid number"):H=parseInt(S,8):H=parseInt(S,10),ie(xt,H)}function _i(S){return null===(S=Jn(16,S))&&tt(N,"Bad character escape sequence"),S}function Bi(){for(var S,j=!(an=!1),$=w;;){var nt=f.charCodeAt(w);if(Li(nt))an&&(S+=f.charAt(w)),++w;else{if(92!==nt)break;an||(S=f.slice($,w)),an=!0,117!=f.charCodeAt(++w)&&tt(w,"Expecting Unicode escape sequence \\uXXXX"),++w;var H=_i(4);(nt=String.fromCharCode(H))||tt(w-1,"Invalid Unicode escape"),(j?gi:Li)(H)||tt(w-4,"Invalid Unicode escape"),S+=nt}j=!1}return an?S:f.slice($,w)}function Fi(){var S=Bi(),j=lt;return ie(j=!an&&Ki(S)?sn[S]:j,S)}function At(){R=N,U=B,W=F,Pn()}function wi(S){if(Q=S,w=N,v.locations)for(;w<O;)O=f.lastIndexOf("\n",O-2)+1,--q;jn(),Pn()}function Ri(){this.type=null,this.start=N,this.end=null}function qi(){this.start=D,(this.end=null)!==x&&(this.source=x)}function oe(){var S=new Ri;return v.locations&&(S.loc=new qi),v.directSourceFile&&(S.sourceFile=v.directSourceFile),v.ranges&&(S.range=[N,0]),S}function fn(S){var j=new Ri;return j.start=S.start,v.locations&&(j.loc=new qi,j.loc.start=S.loc.start),v.ranges&&(j.range=[S.range[0],0]),j}function vt(S,j){return S.type=j,S.end=U,v.locations&&(S.loc.end=W),v.ranges&&(S.range[1]=U),S}function xi(S){return 5<=v.ecmaVersion&&"ExpressionStatement"===S.type&&"Literal"===S.expression.type&&"use strict"===S.expression.value}function Vt(S){return L===S&&(At(),1)}function pi(){return!v.strictSemicolons&&(L===Mt||L===Fe||fi.test(f.slice(U,N)))}function Mn(){Vt(E)||pi()||on()}function Qt(S){(L===S?At:on)()}function on(){tt(N,"Unexpected token")}function mi(S){"Identifier"!==S.type&&"MemberExpression"!==S.type&&tt(S.start,"Assigning to rvalue"),Q&&"Identifier"===S.type&&di(S.name)&&tt(S.start,"Assigning to "+S.name+" in strict mode")}var Ci={kind:"loop"},Ji={kind:"switch"};function $e(){(L===z||L===Y&&"/="==T)&&Pn(!0);var S,j,$,nt=L,H=oe();switch(nt){case Zt:case le:At();var dt=nt===Zt;Vt(E)||pi()?H.label=null:L!==lt?on():(H.label=gn(),Mn());for(var ft=0;ft<X.length;++ft){var Tt=X[ft];if((null==H.label||Tt.name===H.label.name)&&(null!=Tt.kind&&(dt||"loop"===Tt.kind)||H.label&&dt))break}return ft===X.length&&tt(H.start,"Unsyntactic "+nt.keyword),vt(H,dt?"BreakStatement":"ContinueStatement");case ce:return At(),Mn(),vt(H,"DebuggerStatement");case Yt:return At(),X.push(Ci),H.body=$e(),X.pop(),Qt(ae),H.test=Yn(),Mn(),vt(H,"DoWhileStatement");case dn:if(At(),X.push(Ci),Qt(Re),L===E)return Si(H,null);if(L===re){var ht=oe();return At(),Vi(ht,!0),vt(ht,"VariableDeclaration"),1===ht.declarations.length&&Vt(En)?ji(H,ht):Si(H,ht)}return ht=de(!1,!0),Vt(En)?(mi(ht),ji(H,ht)):Si(H,ht);case Sn:return At(),Ti(H,!0);case ci:return At(),H.test=Yn(),H.consequent=$e(),H.alternate=Vt(cn)?$e():null,vt(H,"IfStatement");case kn:return G||v.allowReturnOutsideFunction||tt(N,"'return' outside of function"),At(),Vt(E)||pi()?H.argument=null:(H.argument=de(),Mn()),vt(H,"ReturnStatement");case Rn:for(At(),H.discriminant=Yn(),H.cases=[],Qt(Be),X.push(Ji);L!=Fe;)L===ee||L===Xt?($=L===ee,S&&vt(S,"SwitchCase"),H.cases.push(S=oe()),S.consequent=[],At(),$?S.test=de():(j&&tt(R,"Multiple default clauses"),j=!0,S.test=null),Qt(h)):(S||on(),S.consequent.push($e()));return S&&vt(S,"SwitchCase"),At(),X.pop(),vt(H,"SwitchStatement");case Qn:return At(),fi.test(f.slice(U,N))&&tt(U,"Illegal newline after throw"),H.argument=de(),Mn(),vt(H,"ThrowStatement");case pe:return At(),H.block=ti(),H.handler=null,L===Lt&&(ue=oe(),At(),Qt(Re),ue.param=gn(),Q&&di(ue.param.name)&&tt(ue.param.start,"Binding "+ue.param.name+" in strict mode"),Qt(xe),ue.guard=null,ue.body=ti(),H.handler=vt(ue,"CatchClause")),H.guardedHandlers=_t,H.finalizer=Vt(Te)?ti():null,H.handler||H.finalizer||tt(H.start,"Missing catch or finally clause"),vt(H,"TryStatement");case re:return At(),Vi(H),Mn(),vt(H,"VariableDeclaration");case ae:return At(),H.test=Yn(),X.push(Ci),H.body=$e(),X.pop(),vt(H,"WhileStatement");case ye:return Q&&tt(N,"'with' in strict mode"),At(),H.object=Yn(),H.body=$e(),vt(H,"WithStatement");case Be:return ti();case E:return At(),vt(H,"EmptyStatement");default:var Jt=T,Ft=de();if(nt===lt&&"Identifier"===Ft.type&&Vt(h)){for(ft=0;ft<X.length;++ft)X[ft].name===Jt&&tt(Ft.start,"Label '"+Jt+"' is already declared");var ue=L.isLoop?"loop":L===Rn?"switch":null;return X.push({name:Jt,kind:ue}),H.body=$e(),X.pop(),H.label=Ft,vt(H,"LabeledStatement")}return H.expression=Ft,Mn(),vt(H,"ExpressionStatement")}}function Yn(){Qt(Re);var S=de();return Qt(xe),S}function ti(S){var j,$=oe(),nt=!0,H=!1;for($.body=[],Qt(Be);!Vt(Fe);){var dt=$e();$.body.push(dt),nt&&S&&xi(dt)&&(j=H,wi(H=!0)),nt=!1}return H&&!j&&wi(!1),vt($,"BlockStatement")}function Si(S,j){return S.init=j,Qt(E),S.test=L===E?null:de(),Qt(E),S.update=L===xe?null:de(),Qt(xe),S.body=$e(),X.pop(),vt(S,"ForStatement")}function ji(S,j){return S.left=j,S.right=de(),Qt(xe),S.body=$e(),X.pop(),vt(S,"ForInStatement")}function Vi(S,j){for(S.declarations=[],S.kind="var";;){var $=oe();if($.id=gn(),Q&&di($.id.name)&&tt($.id.start,"Binding "+$.id.name+" in strict mode"),$.init=Vt(V)?de(!0,j):null,S.declarations.push(vt($,"VariableDeclarator")),!Vt(me))break}return S}function de(S,j){var $=ki(j);if(S||L!==me)return $;var nt=fn($);for(nt.expressions=[$];Vt(me);)nt.expressions.push(ki(j));return vt(nt,"SequenceExpression")}function ki(S){var j=function(nt){var ft,H=(ft=nt,function Tt(ht,Jt,Ft){var ue=L.binop;if(null!=ue&&(!Ft||L!==En)&&Jt<ue){var We=fn(ht);We.left=ht,We.operator=T;var vi=L;return At(),We.right=Tt(Ei(),ue,Ft),Tt(vi=vt(We,vi===Ut||vi===jt?"LogicalExpression":"BinaryExpression"),Jt,Ft)}return ht}(Ei(),-1,ft));if(Vt(k)){var dt=fn(H);return dt.test=H,dt.consequent=de(!0),Qt(h),dt.alternate=de(!0,nt),vt(dt,"ConditionalExpression")}return H}(S);if(L.isAssign){var $=fn(j);return $.operator=T,$.left=j,At(),$.right=ki(S),mi(j),vt($,"AssignmentExpression")}return j}function Ei(){if(L.prefix){var S=oe(),j=L.isUpdate;return S.operator=T,S.prefix=!0,P=!0,At(),S.argument=Ei(),j?mi(S.argument):Q&&"delete"===S.operator&&"Identifier"===S.argument.type&&tt(S.start,"Deleting local variable in strict mode"),vt(S,j?"UpdateExpression":"UnaryExpression")}for(var $=ei(Ai());L.postfix&&!pi();)(S=fn($)).operator=T,S.prefix=!1,mi(S.argument=$),At(),$=vt(S,"UpdateExpression");return $}function ei(S,j){var $;return Vt(_)?(($=fn(S)).object=S,$.property=gn(!0),$.computed=!1,ei(vt($,"MemberExpression"),j)):Vt(An)?(($=fn(S)).object=S,$.property=de(),$.computed=!0,Qt(Tn),ei(vt($,"MemberExpression"),j)):j||!Vt(Re)?S:(($=fn(S)).callee=S,$.arguments=Ii(xe,!1),ei(vt($,"CallExpression"),j))}function Ai(){switch(L){case Ie:var S=oe();return At(),vt(S,"ThisExpression");case lt:return gn();case xt:case It:case ot:return(S=oe()).value=T,S.raw=f.slice(N,B),At(),vt(S,"Literal");case Ue:case Xe:case we:return(S=oe()).value=L.atomValue,S.raw=L.keyword,At(),vt(S,"Literal");case Re:var j=D,$=N;At();var nt=de();return nt.start=$,nt.end=B,v.locations&&(nt.loc.start=j,nt.loc.end=F),v.ranges&&(nt.range=[$,B]),Qt(xe),nt;case An:return S=oe(),At(),S.elements=Ii(Tn,!0,!0),vt(S,"ArrayExpression");case Be:return function(){var H=oe(),dt=!0,ft=!1;for(H.properties=[],At();!Vt(Fe);){if(dt)dt=!1;else if(Qt(me),v.allowTrailingCommas&&Vt(Fe))break;var Tt,ht={key:Hi()},Jt=!1;if(Vt(h)?(ht.value=de(!0),Tt=ht.kind="init"):5<=v.ecmaVersion&&"Identifier"===ht.key.type&&("get"===ht.key.name||"set"===ht.key.name)?(Jt=ft=!0,Tt=ht.kind=ht.key.name,ht.key=Hi(),L!==Re&&on(),ht.value=Ti(oe(),!1)):on(),"Identifier"===ht.key.type&&(Q||ft))for(var Ft=0;Ft<H.properties.length;++Ft){var ue,We=H.properties[Ft];We.key.name!==ht.key.name||(ue=!((ue=Tt==We.kind||Jt&&"init"===We.kind||"init"===Tt&&("get"===We.kind||"set"===We.kind))&&!Q&&"init"===Tt&&"init"===We.kind)&&ue)&&tt(ht.key.start,"Redefinition of property")}H.properties.push(ht)}return vt(H,"ObjectExpression")}();case Sn:return S=oe(),At(),Ti(S,!1);case te:return H=oe(),At(),H.callee=ei(Ai(),!0),H.arguments=Vt(Re)?Ii(xe,!1):_t,vt(H,"NewExpression");default:on()}var H}function Hi(){return L===xt||L===It?Ai():gn(!0)}function Ti(S,j){L===lt?S.id=gn():j?on():S.id=null,S.params=[];var $=!0;for(Qt(Re);!Vt(xe);)$?$=!1:Qt(me),S.params.push(gn());var nt=G,H=X;if(G=!0,X=[],S.body=ti(!0),G=nt,X=H,Q||S.body.body.length&&xi(S.body.body[0]))for(var dt=S.id?-1:0;dt<S.params.length;++dt){var ft=dt<0?S.id:S.params[dt];if((Oi(ft.name)||di(ft.name))&&tt(ft.start,"Defining '"+ft.name+"' in strict mode"),0<=dt)for(var Tt=0;Tt<dt;++Tt)ft.name===S.params[Tt].name&&tt(ft.start,"Argument name clash in strict mode")}return vt(S,j?"FunctionDeclaration":"FunctionExpression")}function Ii(S,j,$){for(var nt=[],H=!0;!Vt(S);){if(H)H=!1;else if(Qt(me),j&&v.allowTrailingCommas&&Vt(S))break;nt.push($&&L===me?null:de(!0))}return nt}function gn(S){var j=oe();return S&&"everywhere"==v.forbidReserved&&(S=!1),L===lt?(!S&&(v.forbidReserved&&(3===v.ecmaVersion?Wi:Zi)(T)||Q&&Oi(T))&&-1==f.slice(N,B).indexOf("\\")&&tt(N,"The keyword '"+T+"' is reserved"),j.name=T):S&&L.keyword?j.name=L.keyword:on(),P=!1,At(),vt(j,"Identifier")}},"object"==typeof t&&"object"==typeof e?n(t):"function"==typeof define&&define.amd?define(["exports"],n):n(u.acorn||(u.acorn={})),s.version||(s=null));var a={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},o={"-":"__negate","+":"__self"},u=C.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(g){this["__"+g]="#"+g},{__self:function(){return this}});function l(g,v,f){var y=a[v];if(g&&g[y])return y=g[y](f),"!="===v?!y:y;switch(v){case"+":return g+f;case"-":return g-f;case"*":return g*f;case"/":return g/f;case"%":return g%f;case"==":return g==f;case"!=":return g!=f}}function c(g,v){var f=o[g];if(v&&v[f])return v[f]();switch(g){case"+":return+v;case"-":return-v}}function d(g,v){if(!g)return"";var f=[];function y(O){for(var R=0,U=f.length;R<U;R++){var W=f[R];if(W[0]>=O)break;O+=W[1]}return O}function x(O){return g.substring(y(O.range[0]),y(O.range[1]))}function A(O,R){for(var U=y(O.range[0]),W=(O=y(O.range[1]),0),G=f.length-1;0<=G;G--)if(U>f[G][0]){W=G+1;break}f.splice(W,0,[U,R.length-O+U]),g=g.substring(0,U)+R+g.substring(O)}var w,N=(v=v||{}).url||"",B=v.sourceMaps,D=v.paperFeatures||{},F=v.source||g,L=v.offset||0,T=mt.agent,P=T.versionNumber,q=!1;return v=/\r\n|\n|\r/gm,B&&(T.chrome&&30<=P||T.webkit&&537.76<=P||T.firefox&&23<=P||T.node)&&(T.node?L-=2:yt&&N&&!yt.location.href.indexOf(N)&&(L=(w=kt.getElementsByTagName("html")[0].innerHTML).substr(0,w.indexOf(g)+1).match(v).length+1),(w=["AA"+function(O){var R="";for(O=(Math.abs(O)<<1)+(O<0?1:0);O||!R;){var U=31&O;(O>>=5)&&(U|=32),R+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[U]}return R}((q=0<L&&!(T.chrome&&36<=P||T.safari&&600<=P||T.firefox&&40<=P||T.node))?0:L)+"A"]).length=(g.match(v)||[]).length+1+(q?L:0),w={version:3,file:N,names:[],mappings:w.join(";AACA"),sourceRoot:"",sources:[N],sourcesContent:[F]}),!1===D.operatorOverloading&&!1===D.moduleExports||function O(R,U,W){if(R){for(var G in R)if("range"!==G&&"loc"!==G){var X=R[G];if(Array.isArray(X))for(var Q=0,et=X.length;Q<et;Q++)O(X[Q],R,W);else X&&"object"==typeof X&&O(X,R,W)}!1!==W.operatorOverloading&&function(O,R){switch(O.type){case"UnaryExpression":O.operator in o&&"Literal"!==O.argument.type&&(U=x(O.argument),A(O,'$__("'+O.operator+'", '+U+")"));break;case"BinaryExpression":O.operator in a&&"Literal"!==O.left.type&&(W=x(O.left),G=x(O.right),et=O.right,Q=g.substring(y((Q=O.left).range[1]),y(et.range[0])),et=O.operator,A(O,"__$__("+W+","+Q.replace(new RegExp("\\"+et),'"'+et+'"')+", "+G+")"));break;case"UpdateExpression":case"AssignmentExpression":var U,W,G,X;"ForStatement"===(Q=R&&R.type)||"BinaryExpression"===Q&&/^[=!<>]/.test(R.operator)||"MemberExpression"===Q&&R.computed||("UpdateExpression"===O.type?(et=(U=x(O.argument))+" = "+(X="__$__("+U+', "'+O.operator[0]+'", 1)'),O.prefix?et="("+et+")":"AssignmentExpression"!==Q&&"VariableDeclarator"!==Q&&"BinaryExpression"!==Q||(et=U+"; "+(et=x(R.left||R.id)===U?X:et)),A(O,et)):/^.=$/.test(O.operator)&&"Literal"!==O.left.type&&(W=x(O.left),G=x(O.right),X=W+" = __$__("+W+', "'+O.operator[0]+'", '+G+")",A(O,/^\(.*\)$/.test(x(O))?"("+X+")":X)))}var Q,et}(R,U),!1!==W.moduleExports&&function(tt){switch(tt.type){case"ExportDefaultDeclaration":A({range:[tt.start,tt.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var wt,_t=tt.declaration,xt=tt.specifiers;_t?(wt=_t.declarations)&&(wt.forEach(function(ot){A(ot,"module.exports."+x(ot))}),A({range:[tt.start,_t.start+_t.kind.length]},"")):!xt||(xt=xt.map(function(ot){return"module.exports."+(ot=x(ot))+" = "+ot+"; "}).join(""))&&A(tt,xt)}}(R)}}(r(g,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,D),w&&(q&&(g=new Array(L+1).join("\n")+g),/^(inline|both)$/.test(B)&&(g+="\n//# sourceMappingURL=data:application/json;base64,"+Nt.btoa(unescape(encodeURIComponent(JSON.stringify(w))))),g+="\n//# sourceURL="+(N||"paperscript")),{url:N,source:F,code:g,map:w}}function m(g,v,f){var y,x=(mt=v).getView(),A=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(g)&&!/\bnew\s+Tool\b/.test(g)?new zn:null,I=A?A._events:[],w=["onFrame","onResize"].concat(I),N=[],B=[],D="object"==typeof g?g:d(g,f);function F(P,q){for(var O in P)!q&&/^_/.test(O)||!new RegExp("([\\b\\s\\W]|^)"+O.replace(/\$/g,"\\$")+"\\b").test(g)||(N.push(O),B.push(P[O]))}g=D.code,F({__$__:l,$__:c,paper:v,tool:A},!0),F(v),g="var module = { exports: {} }; "+g;var L=C.each(w,function(P){new RegExp("\\s+"+P+"\\b").test(g)&&(N.push(P),this.push("module.exports."+P+" = "+P+";"))},[]).join("\n");L&&(g+="\n"+L),g+="\nreturn module.exports;",f=mt.agent,kt&&(f.chrome||f.firefox&&f.versionNumber<40)?(D=kt.createElement("script"),w=kt.head||kt.getElementsByTagName("head")[0],f.firefox&&(g="\n"+g),D.appendChild(kt.createTextNode("document.__paperscript__ = function("+N+") {"+g+"\n}")),w.appendChild(D),y=kt.__paperscript__,delete kt.__paperscript__,w.removeChild(D)):y=Function(N,g);var T=(L=y&&y.apply(v,B))||{};return C.each(I,function(P){var q=T[P];q&&(A[P]=q)}),x&&(T.onResize&&x.setOnResize(T.onResize),x.emit("resize",{size:x.size,delta:new M}),T.onFrame&&x.setOnFrame(T.onFrame),x.requestUpdate()),L}function p(g){if(/^text\/(?:x-|)paperscript$/.test(g.type)&&"true"!==$t.getAttribute(g,"ignore")){var v=$t.getAttribute(g,"canvas"),f=kt.getElementById(v),y=g.src||g.getAttribute("data-src"),x=$t.hasAttribute(g,"async"),A="data-paper-scope";if(!f)throw new Error('Unable to find canvas with id "'+v+'"');var I=$t.get(f.getAttribute(A))||(new $t).setup(f);return f.setAttribute(A,I._id),y?Un({url:y,async:x,mimeType:"text/plain",onLoad:function(w){m(w,I,y)}}):m(g.innerHTML,I,g.baseURI),g.setAttribute("data-paper-ignore","true"),I}}function b(){C.each(kt&&kt.getElementsByTagName("script"),p)}return M.inject(u),it.inject(u),zt.inject(u),yt&&("complete"===kt.readyState?setTimeout(b):Dt.add(yt,{load:b})),{compile:d,execute:m,load:function(g){return g?p(g):b()},parse:r,calculateBinary:l,calculateUnary:c}}.call(this);var mt=new($t.inject(C.exports,{Base:C,Numerical:ct,Key:si,DomEvent:Dt,DomElement:Rt,document:kt,window:yt,Symbol:je,PlacedSymbol:vn}));return mt.agent.node&&require("./node/extend.js")(mt),"function"==typeof define&&define.amd?define("paper",mt):"object"==typeof module&&module&&(module.exports=mt),mt}.call(this,"object"==typeof self?self:null);